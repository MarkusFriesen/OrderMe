(this.webpackJsonpbit=this.webpackJsonpbit||[]).push([[0],{152:function(e,t,a){e.exports=a(296)},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},281:function(e,t,a){},284:function(e,t,a){},296:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(17),c=a.n(r),i=(a(157),a(47)),s=(a(158),a(5)),o=a(23),d=a(39),m=a(356),u=a(348),E=a(64),b=a(26);a(159);const p=(e,t)=>a=>{t(a.target.value),e.store.searchText=a.target.value};function h(e,t,a,n){n(!a),t(""),e.store.searchText=""}const y=e=>()=>{e(!1)};var g=Object(o.b)("store")(Object(o.c)(e=>{const t=Object(n.useState)(!1),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),o=Object(s.a)(i,2),g=o[0],O=o[1],j=Object(n.useState)(!1),v=Object(s.a)(j,2),f=v[0],_=v[1];return r?l.a.createElement(d.a,{dense:!0,fixed:!0},l.a.createElement(d.d,null,l.a.createElement(d.e,{className:"search-field",alignStart:!0},l.a.createElement("input",{placeholder:"Search",autoFocus:!0,value:g,onChange:p(e,O)}),l.a.createElement(d.b,{"aria-label":"Search",icon:"clear",alt:"Search this Page",onClick:()=>h(e,O,r,c)})))):l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{dense:!0,fixed:!0,className:"no-print"},l.a.createElement(d.d,null,l.a.createElement(d.e,{alignStart:!0},l.a.createElement(d.c,{icon:"menu",onClick:()=>_(!0)}),l.a.createElement(d.f,null,e.store.kitchenMode?"BIt's Kitchen":"BIt")),l.a.createElement(d.e,{alignEnd:!0},l.a.createElement(d.b,{"aria-label":"Search",icon:"search",alt:"Search this Page",onClick:()=>h(e,O,r,c)})))),l.a.createElement(E.a,{modal:!0,open:f,onClose:y(_)},l.a.createElement(E.c,null,l.a.createElement(E.d,null,"Menu")),l.a.createElement(E.b,null,l.a.createElement(m.a,null,l.a.createElement(b.b,{to:"/orders"},l.a.createElement(u.d,{onClick:y(_)},l.a.createElement(u.e,{icon:"shopping_cart"}),l.a.createElement(u.i,null,"Orders"))),l.a.createElement(b.b,{to:"/orderHistory"},l.a.createElement(u.d,{onClick:y(_)},l.a.createElement(u.e,{icon:"history"}),l.a.createElement(u.i,null,"History"))),l.a.createElement(b.b,{to:"/dishes"},l.a.createElement(u.d,{onClick:y(_)},l.a.createElement(u.e,{icon:"shopping_basket"}),l.a.createElement(u.i,null,"Dishes"))),l.a.createElement(b.b,{to:"/dishExtra"},l.a.createElement(u.d,{onClick:y(_)},l.a.createElement(u.e,{icon:"loyalty"}),l.a.createElement(u.i,null,"Extras"))),l.a.createElement(b.b,{to:"/settings"},l.a.createElement(u.d,{onClick:y(_)},l.a.createElement(u.e,{icon:"settings"}),l.a.createElement(u.i,null,"Settings")))))))})),O=a(9),j=a(10),v=a(6),f=a(57),_=a(56),x=a.n(_),k=a(49),S=a(86);a(281);function D(){const e=Object(O.a)(["\n  mutation updateOrder($id: ID!, $dishes: [orderDishMutation]!){\n    updateOrder(_id: $id, dishes: $dishes){\n      _id,\n      name,\n      table,\n      notes,\n      dishes {\n        dish {\n          _id,\n          name,\n          cost\n        },\n        made,\n        delivered,\n        hasPayed\n      }\n    }\n  }"]);return D=function(){return e},e}const $=Object(v.b)(D());function C(e,t,a,n){return()=>{const l=n.dishes.map(e=>({id:e.dish._id,made:e.made,hasPayed:e.hasPayed,delivered:e.delivered,extras:e.extras.map(e=>e._id)}));if(n.store.kitchenMode){if(l[t].delivered)return;l[t].made=!l[t].made}else{if(!l[t].made)return;l[t].delivered=!l[t].delivered}a({variables:{id:e,dishes:l}})}}var w=Object(o.b)("store")(Object(o.c)(e=>{const t=Object(j.a)($),a=Object(s.a)(t,1)[0];return l.a.createElement(k.a,null,l.a.createElement(b.b,{to:"/orderDetails/".concat(e._id)},l.a.createElement(k.g,null,l.a.createElement("div",{style:{padding:"0 1rem 1rem 1rem"}},l.a.createElement(S.a,{use:"headline6",tag:"h2",style:{}},l.a.createElement("span",{className:"highlight"},e.table)," ",e.name)))),l.a.createElement("div",{style:{padding:"0 1rem 1rem 1rem"}},l.a.createElement(S.a,{use:"body1",tag:"div",theme:"textSecondaryOnBackground"},l.a.createElement(m.a,{className:"extendSecondaryText"},function(e,t){return e.dishes.map((a,n)=>{const r=e.store.kitchenMode&&a.delivered,c=!e.store.kitchenMode&&!a.made;return l.a.createElement(u.j,{key:n,className:a.delivered?"done":"",graphic:a.made?a.delivered?"done_all":"done":"radio_button_unchecked",onClick:C(e._id,n,t,e),disabled:r||c,text:a.dish.name,secondaryText:a.extras.map(e=>e.name).join(", "),ripple:a.made})})}(e,a)))),l.a.createElement(S.a,{use:"subtitle1",tag:"div",style:{padding:"0.5rem 1rem"},theme:"textSecondaryOnBackground"},e.notes),l.a.createElement(k.f,null,l.a.createElement(k.c,null,l.a.createElement(k.b,{onClick:t=>e.openJoinCard(e)},"Join")),l.a.createElement(k.e,null,l.a.createElement(b.b,{to:"/payOrder/".concat(e._id)},l.a.createElement(k.d,{icon:"credit_card"})))))})),F=a(24),I=a(355),T=a(37);function N(){const e=Object(O.a)(["\n  mutation join($id: ID!, $ids: [ID]!){\n    joinOrders(_id: $id, orderIds: $ids){\n      _id,\n      name,\n      table,\n      dishes {\n        dish {\n          _id,\n          name,\n          cost\n        },\n        made,\n        hasPayed,\n        extras {\n          _id,\n          name\n        }\n      }\n    }\n  }"]);return N=function(){return e},e}const P=Object(v.b)(N());function M(e,t,a){return()=>{const n=t.filter(e=>e.selected).map(e=>e.id);e({variables:{id:a,ids:n}})}}var A=e=>{const t=Object(n.useState)(e.data.map(e=>({id:e._id,name:e.name,selected:!1}))),a=Object(s.a)(t,2),r=a[0],c=a[1];Object(n.useEffect)(()=>{(e.data.length!==r.length||e.data.some((e,t)=>e._id!==r[t].id))&&c(e.data.map((e,t)=>({id:e._id,name:e.name,selected:r.length>t&&r[t].selected})))},[e.data,r.length,r]);const i=Object(j.a)(P),o=Object(s.a)(i,1)[0];return l.a.createElement(l.a.Fragment,null,l.a.createElement(I.e,null,"Everyone at table ",e.table),l.a.createElement(I.d,null,l.a.createElement(m.a,null,r.map((e,t)=>l.a.createElement(u.d,{key:e.id,onClick:()=>function(e,t,a){a(t.map((t,a)=>a===e?Object(T.a)({},t,{selected:!t.selected}):t))}(t,r,c)},l.a.createElement(u.e,{icon:e.selected?"radio_button_checked":"radio_button_unchecked"}),l.a.createElement(u.i,null,e.name))))),l.a.createElement(I.b,null,l.a.createElement(I.c,{action:"close"},"Cancel"),l.a.createElement(I.c,{action:"accept",onClick:M(o,r,e._id),isDefaultAction:!0},"Join")))};function B(){const e=Object(O.a)(["\n  query order($table: Int) {\n    orders(table: $table, hasPayed: false) {\n      _id,\n      name,\n    }\n  }"]);return B=function(){return e},e}const W=Object(v.b)(B());var q=e=>{const t=Object(j.b)(W,{variables:{table:e.table},pollInterval:500}),a=t.loading,n=t.error,r=t.data,c=void 0===r?{orders:[]}:r;return a||n?l.a.createElement(I.f,{title:"Everyone at table ".concat(e.table),body:"Fetching Data. ".concat(n?n.message:""),open:e.dialogOpen,onClose:e.closeDialog}):l.a.createElement(I.a,{open:e.dialogOpen,onClose:e.closeDialog},l.a.createElement(A,Object.assign({data:c.orders.filter(t=>t._id!==e._id)},e)))};function R(){const e=Object(O.a)(["query order($hasPayed: Boolean) {\n  orders(hasPayed: $hasPayed) {\n    _id,\n    name,\n    table,\n    notes,\n    dishes {\n      dish {\n        _id,\n        name,\n        cost,\n        type {\n          _id,\n          name\n        }\n      },\n      made,\n      delivered,\n      hasPayed,\n      extras {\n        _id, \n        name\n      }\n    }\n  }\n}"]);return R=function(){return e},e}const H=Object(v.b)(R());var L=Object(o.b)("store")(Object(o.c)(e=>{const t=e.store.searchText,a=Object(n.useState)({table:-1}),r=Object(s.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)(!1),d=Object(s.a)(o,2),m=d[0],u=d[1],E=Object(j.b)(H,{variables:{hasPayed:!1},pollInterval:500}),p=E.loading,h=E.error,y=E.data,g=void 0===y?{orders:[]}:y;return h?(console.warn(h),l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Error :("),l.a.createElement("span",null,h.message))):l.a.createElement(l.a.Fragment,null,(e=>e?l.a.createElement(F.a,null):l.a.createElement(l.a.Fragment,null))(p),l.a.createElement(x.a,{id:"masonry-layout"},((e,t,a,n,r)=>{const c=new RegExp(t,"i");return e.filter(e=>(!t||e.table.toString()===t||c.test(e.name)||e.dishes.some(e=>c.test(e.dish.type.name)))&&(!a.store.kitchenMode||e.dishes.some(e=>!e.made))).map((e,t)=>l.a.createElement("div",{key:t,style:{width:"-webkit-fill-available",maxWidth:"500px",minWidth:"320px"}},l.a.createElement(w,Object.assign({key:e._id},e,a,{openJoinCard:e=>{n(e),r(!0)}}))))})(g.orders,t,e,i,u)),l.a.createElement(q,Object.assign({dialogOpen:m,closeDialog:()=>{u(!1)}},c)),l.a.createElement(b.b,{to:"/orderDetails"},l.a.createElement(f.a,{className:"floating-right",icon:"add"})),l.a.createElement("div",{className:"bottomSpacer"}))})),U=a(34),z=a(8),K=a(36),J=a(352),Z=a(353),G=a(30),Q=a(43),V=a(58);const X=(e,t)=>()=>{e([]),t()},Y=(e,t)=>()=>{e([]),t()},ee=(e,t,a)=>()=>{a(t.map(e=>Object(T.a)({},e))),e([])},te=(e,t,a)=>()=>{t([a].concat(e))};var ae=e=>{const t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],c=a[1];Object(n.useEffect)(()=>{c(e.selectedExtras||[])},[e.selectedExtras]);const i=e.dish,o=e.extras,d=o&&o.length>0;let E=d?"Edit ".concat(i?i.name:"dish"," extras"):"Confirm ".concat(i?i.name:"dish"," Deletion");return l.a.createElement(I.a,{open:e.open,onClose:e.onClose},l.a.createElement(I.e,null,E),d?l.a.createElement(I.d,null,l.a.createElement(V.b,null,o.sort((e,t)=>e.name<t.name?-1:1).map(e=>l.a.createElement(V.a,{key:e._id,label:e.name,onClick:te(r,c,e)}))),l.a.createElement(m.a,null,r.map((e,t)=>l.a.createElement(u.j,{key:t,graphic:"close",text:e.name,onClick:()=>c(r.filter((e,a)=>a!==t))})))):l.a.createElement(l.a.Fragment,null),l.a.createElement(I.b,null,l.a.createElement(I.c,{theme:"secondary",action:"close",onClick:X(c,e.onDelete)},"Delete"),l.a.createElement(I.c,{theme:"primary",action:"close",isDefaultAction:!0,onClick:Y(c,e.onClose)},"Cancel"),d?l.a.createElement(I.c,{theme:"primary",action:"accept",onClick:ee(c,r,e.onSave)},"Save"):l.a.createElement(l.a.Fragment,null)))};a(284);function ne(){const e=Object(O.a)(["\n  mutation updateOrder($id: ID!, $name: String, $table: Int, $notes: String, $dishes: [orderDishMutation]){\n    updateOrder(_id: $id, table: $table, name: $name, dishes: $dishes, notes: $notes ){\n      _id, \n      name,\n      table,\n      notes\n    }\n  }\n"]);return ne=function(){return e},e}function le(){const e=Object(O.a)(["\n  mutation addOrder($name: String, $table: Int!, $notes: String, $dishes: [orderDishMutation]!){\n    addOrder(table: $table, name: $name, dishes: $dishes, notes: $notes){\n      _id, \n      name,\n      table,\n      notes\n    }\n  }\n"]);return le=function(){return e},e}const re=Object(v.b)(le()),ce=Object(v.b)(ne());const ie=(e,t,a)=>()=>{if(t.length<e)return;if(t[e].hasPayed||t[e].made)return;let n=t.filter((t,a)=>a!==e);a(n)};const se=(e,t,a)=>n=>{e[t].extras=n,a([...e])};var oe=e=>{const t=Object(n.useState)(e.order?e.order.name:""),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(!1),d=Object(s.a)(o,2),E=d[0],b=d[1],p=Object(n.useState)(e.order?e.order.table:0),h=Object(s.a)(p,2),y=h[0],g=h[1],O=Object(n.useState)(e.order?e.order.notes:""),v=Object(s.a)(O,2),f=v[0],_=v[1],x=Object(n.useState)(e.order?e.order.dishes.map(e=>Object(T.a)({},e,{dish:{id:e.dish._id,name:e.dish.name,typeName:e.dish.type.name}})):[]),k=Object(s.a)(x,2),S=k[0],D=k[1],$=Object(n.useState)(0),C=Object(s.a)($,2),w=C[0],I=C[1],N=Object(n.useState)(function(e){return e.reduce((e,t)=>(e[t.type.name]?e[t.type.name].push(t):e[t.type.name]=[t],e),{})}(e.dishes)),P=Object(s.a)(N,1)[0],M=Object(n.useState)(Object.keys(P).sort((e,t)=>e<t?-1:1)),A=Object(s.a)(M,1)[0],B=Object(n.useState)(-1),W=Object(s.a)(B,2),q=W[0],R=W[1],H=Object(n.useState)([]),L=Object(s.a)(H,2),U=L[0],z=L[1],V=Object(i.f)().id,X=Object(i.e)(),Y=Object(j.a)(V?ce:re),ee=Object(s.a)(Y,2),te=ee[0],ne=ee[1],le=ne.data,oe=ne.loading,de=ne.error;let me=l.a.createElement(Q.a,{onClick:()=>te({variables:{id:V,table:y?parseInt(y):0,name:r,notes:f,dishes:S.map(e=>({id:e.dish.id,made:e.made,hasPayed:e.hasPayed,delivered:e.delivered,extras:(e.extras||[]).map(e=>e._id)})).filter(e=>e&&e.id)}}),theme:"secondary"},"Save");return de&&console.error(de),le&&X.goBack(),l.a.createElement(l.a.Fragment,null,l.a.createElement(K.a,{className:"order-details"},l.a.createElement(K.b,{span:"12"},0===A.length?String():l.a.createElement(J.a,{activeTabIndex:w,onActivate:e=>I(e.detail.index)},A.map((e,t)=>l.a.createElement(Z.a,{key:t},e))),l.a.createElement(m.a,null,function(e,t,a,n,r){return(e[t[a]]||[]).sort((e,t)=>e.name<t.name?-1:1).map((e,c)=>{var i=n.reduce((t,a)=>t+(a.dish.id===e._id?1:0),0);return l.a.createElement(u.j,{key:c,onClick:l=>function(e,t,a,n,l){l([{dish:{id:e,name:t,typeName:a},made:!1,hasPayed:!1}].concat(n))}(e._id,e.name,t[a],n,r),text:e.name,graphic:i?"check":"none ",meta:i||null})})}(P,A,w,S,D)))),l.a.createElement(K.a,{className:"order-details"},l.a.createElement(K.b,{span:"6"},l.a.createElement(m.a,{className:"extendSecondaryText"},S.map((t,a)=>l.a.createElement(u.j,{onClick:()=>{t.hasPayed||t.made||t.delivered||function(e,t,a,n,l,r,c){if(!t||t.length<e)return;const i=t[e].dish;if(i.hasPayed||i.made)return;var s=c.find(e=>e._id===i.id);a(!0),n(e),l(r.filter(e=>!s.deselectedExtras.some(t=>t._id===e._id)&&e.type.name===s.type.name))}(a,S,b,R,z,e.extras,e.dishes)},key:a,text:t.dish.name,secondaryText:(t.extras||[]).map(e=>e.name).join(", "),graphic:t.hasPayed?"euro_symbol":t.delivered?"done_all":t.made?"done":"remove",ripple:!1,activated:!1,disabled:t.hasPayed||t.made||t.delivered})))),l.a.createElement(K.b,{span:"6"},l.a.createElement(G.a,{icon:"event_seat",label:"Table",type:"number",min:"0",inputMode:"numeric",pattern:"\\d*",value:y,onChange:e=>g(e.target.value)}),l.a.createElement(G.a,{icon:"account_circle",label:"Name",value:r,onChange:e=>c(e.target.value)}),l.a.createElement(G.a,{textarea:!0,fullwidth:!0,label:"Notes",type:"number",value:f,onChange:e=>_(e.target.value)}))),oe?l.a.createElement(F.a,null):l.a.createElement(l.a.Fragment,null),de?l.a.createElement("span",null,de.message):l.a.createElement(l.a.Fragment,null),me,l.a.createElement(ae,{open:E,onClose:()=>b(!1),dish:S[q]?S[q].dish:void 0,onDelete:ie(q,S,D),onSave:se(S,q,D),extras:U,selectedExtras:S[q]&&S[q].extras||[]}))};function de(){const e=Object(O.a)(["\n  {\n    dishes {\n      _id,\n      name,\n      type {\n        _id,\n        name\n      }, \n      deselectedExtras {\n        _id\n      }\n    },\n    dishExtras {\n      _id,\n      name,\n      type {\n        _id,\n        name\n      }\n    }\n  }"]);return de=function(){return e},e}function me(){const e=Object(O.a)(["\n  query order($id: ID) {\n    orders(_id: $id) {\n      _id,\n      name,\n      table,\n      notes,\n      dishes {\n        dish {\n          _id,\n          name,\n          type {\n            _id,\n            name\n          }\n        }, \n        made,\n        hasPayed,\n        delivered,\n        extras {\n          _id,\n          name,\n          type {\n            _id, \n            name\n          }\n        }\n      }\n    }\n  }"]);return me=function(){return e},e}const ue=Object(v.b)(me()),Ee=Object(v.b)(de());var be=e=>{const t=Object(i.f)().id,a=Object(i.e)(),n=Object(j.b)(Ee),r=n.loading,c=n.error,s=n.data,o=Object(j.b)(ue,{variables:{id:t}});let d=r?l.a.createElement(F.a,null):c?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Error :( "),l.a.createElement("span",null,c.message)):(({loading:e,error:t,data:a={orders:[]},dishes:n,extras:r,id:c})=>(t&&console.error(t),e?l.a.createElement(F.a,null):t?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Error :( "),l.a.createElement("span",null,t.message)):l.a.createElement(oe,{order:1===a.orders.length?a.orders[0]:null,dishes:n,extras:r,id:c})))(Object(T.a)({},o,{id:t,dishes:s.dishes,extras:s.dishExtras}));return l.a.createElement(U.a,{className:"main-elevation",z:24},l.a.createElement(z.a,null,l.a.createElement(z.c,null,l.a.createElement(z.d,{alignStart:!0},l.a.createElement(z.e,null,"Order Details")),l.a.createElement(z.d,{alignEnd:!0},l.a.createElement(z.b,{icon:"clear",onClick:a.goBack})))),d)},pe=a(350);function he(){const e=Object(O.a)(["{ company {\n                    name,\n                    street, \n                    postalCode,\n                    city, \n                    website,\n                    taxId\n                  }\n                }"]);return he=function(){return e},e}var ye=function(e,t){const a=e.reduce((e,t)=>e+(t.extras||[]).reduce((e,t)=>e+t.cost,0)+t.dish.cost,0).toFixed(2);return l.a.createElement(pe.a,{query:Object(v.b)(he())},({loading:n,error:r,data:c})=>{if(!n&&!r&&c){const n=c.company,r=n.name,i=n.street,s=n.postalCode,o=n.city,d=n.website,m=n.taxId,u=(new Date).toLocaleString("de").split(",");return l.a.createElement("div",{className:"receipt"},l.a.createElement("div",{className:"header"},l.a.createElement("h2",null,r),l.a.createElement("p",null,i),l.a.createElement("p",null,s," ",o),l.a.createElement("p",null,d),l.a.createElement("p",null,m)),l.a.createElement("table",{className:"receipt",align:"center"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Datum: ",u[0]),l.a.createElement("td",null,"Zeit: ",u[1])),l.a.createElement("tr",null,l.a.createElement("td",{className:"bill-split"}),l.a.createElement("td",{className:"bill-split"})),l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null,"EUR")),e.map((e,t)=>l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.dish.name),l.a.createElement("td",null,(e.dish.cost+(e.extras||[]).reduce((e,t)=>e+t.cost,0)).toFixed(2)))),l.a.createElement("tr",null,l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",{className:"bill-split"}),l.a.createElement("td",{className:"bill-split"})),l.a.createElement("tr",null,l.a.createElement("td",{className:"bill-payment"},"ANZAHL DER ARTIKEL ",e.length)),l.a.createElement("tr",null,l.a.createElement("td",null,"davon MwSt. (19%)"),l.a.createElement("td",null,(a-a/1.19).toFixed(2))),l.a.createElement("tr",null,l.a.createElement("td",{className:"bill-payment"},l.a.createElement("h5",null,"TOTAL")),l.a.createElement("td",{className:"bill-payment"},a)))),l.a.createElement("table",{className:"receipt",align:"center"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Bon: ",t)))))}return l.a.createElement(l.a.Fragment,null)})};function ge(){const e=Object(O.a)(["\n  mutation pay($id: ID!, $dishes: [orderDishMutation]!, $amountPayed: Float!){\n    updateOrder(_id: $id, dishes: $dishes, amountPayed: $amountPayed){\n      _id,\n      dishes {\n        hasPayed\n      }\n    }\n  }"]);return ge=function(){return e},e}const Oe=Object(v.b)(ge());function je(e,t,a,n){return()=>{const l=t.map((t,a)=>a===e?Object(T.a)({},t,{paying:!t.paying}):t);a(l),n(l.every(e=>e.paying))}}function ve(e,t,a,n){return()=>{t(e.map(e=>Object(T.a)({},e,{paying:!e.paying}))),n(a)}}function fe(e){return t=>{isNaN(t.target.value)||e(t.target.value?parseFloat(t.target.value):"")}}var _e=e=>{const t=Object(n.useState)(e.dishesToPay),a=Object(s.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(0),d=Object(s.a)(o,2),E=d[0],b=d[1],p=Object(n.useState)(!0),h=Object(s.a)(p,2),y=h[0],g=h[1],O=Object(j.a)(Oe),v=Object(s.a)(O,2),f=v[0],_=v[1],x=_.data,k=_.loading,S=_.error,D=Object(i.e)();Object(n.useEffect)(()=>{0!==e.dishesToPay.length&&(e.dishesToPay.length===r.length&&e.dishesToPay.every((e,t)=>e._id===r[t]._id)||c(e.dishesToPay.map(e=>Object(T.a)({},e,{paying:!1}))))},[e.dishesToPay,e.dishesToPay.length,r.length,r]);const $=e.id;let C=0,w=l.a.createElement(Q.a,{onClick:()=>{f({variables:{id:e.id,dishes:r.map(e=>({id:e.dish._id,made:e.made,hasPayed:e.paying,delivered:e.delivered,extras:e.extras.map(e=>e._id)})).concat(e.payedDishes.map(e=>({id:e.dish._id,made:e.made,hasPayed:e.hasPayed,delivered:e.delivered,extras:e.extras.map(e=>e._id)}))),amountPayed:E}})},disabled:!E}," Pay ");return k&&(w=l.a.createElement(l.a.Fragment,null,l.a.createElement(F.a,null),w)),S&&console.error(S),x&&x.updateOrder&&x.updateOrder.dishes.reduce((e,t)=>e&&t.hasPayed,!0)&&D.goBack(),l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,{className:"no-print"},l.a.createElement(u.d,{key:-1,onClick:ve(r,c,y,g)},l.a.createElement(u.e,{icon:y?"radio_button_checked":"radio_button_unchecked"}),l.a.createElement(u.i,null,"Everything")),l.a.createElement(u.a,null),r.map((e,t)=>{const a=e.extras.reduce((e,t)=>e+t.cost,0);return e.paying&&(C=e.dish.cost+C+a),l.a.createElement(u.d,{key:t,onClick:je(t,r,c,g)},l.a.createElement(u.e,{icon:e.paying?"radio_button_checked":"radio_button_unchecked"}),l.a.createElement(u.i,null,l.a.createElement(u.g,null,e.dish.name),l.a.createElement(u.h,null,e.extras.map(e=>e.name).join(", "))),l.a.createElement(u.f,{tag:"span",basename:""},(e.dish.cost+a).toFixed(2)))})),l.a.createElement(K.a,{className:"no-print"},l.a.createElement(K.b,{span:"12"},l.a.createElement(G.a,{icon:"euro_symbol",disabled:!0,label:"Total",value:C.toFixed(2)}),l.a.createElement(G.a,{icon:"euro_symbol",label:"Difference",value:(E-C).toFixed(2),onChange:()=>{},invalid:E-C<0}),l.a.createElement(G.a,{icon:"euro_symbol",label:"Paying",type:"number",inputMode:"numeric",pattern:"\\d*.*,*\\d*",value:E,invalid:!E,onChange:fe(b)}))),l.a.createElement("div",{className:"no-print"},w,l.a.createElement(Q.a,{theme:"secondary",onClick:window.print},l.a.createElement(Q.b,{icon:"receipt"}),"Print")),l.a.createElement("div",{className:"print"},ye(r.filter(e=>e.paying),$)))};function xe(){const e=Object(O.a)(["\n  query order($id: ID) {\n    orders(_id: $id) {\n      _id,\n      name,\n      table,\n      dishes {\n        dish {\n          _id,\n          name,\n          cost\n        },\n        hasPayed,\n        made,\n        delivered,\n        extras {\n          _id,\n          cost,\n          name\n        }\n      }\n    }\n  }"]);return xe=function(){return e},e}const ke=Object(v.b)(xe());var Se=()=>{const e=Object(i.f)().id,t=Object(j.b)(ke,{variables:{id:e},pollInterval:1e3}),a=t.loading,n=t.error,r=t.data,c=void 0===r?{orders:[]}:r,s=Object(i.e)(),o=c.orders[0]&&c.orders[0].name?"".concat(c.orders[0].name,"'s"):"";return l.a.createElement(U.a,{className:"main-elevation",z:24},l.a.createElement(z.a,{className:"no-print"},l.a.createElement(z.c,null,l.a.createElement(z.d,{alignStart:!0},l.a.createElement(z.e,null,"Pay ",o," order")),l.a.createElement(z.d,{alignEnd:!0},l.a.createElement(z.b,{icon:"clear",onClick:()=>s.goBack()})))),((e,t,a,n)=>t?l.a.createElement(F.a,null):a?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Error :("),l.a.createElement("span",null,a.message)):1!==n.orders.length?String():l.a.createElement(_e,{id:e,payedDishes:n.orders[0].dishes.filter(e=>e.hasPayed),dishesToPay:n.orders[0].dishes.filter(e=>!e.hasPayed).map(e=>({dish:e.dish,made:e.made,paying:!0,delivered:e.delivered,extras:e.extras}))}))(e,a,n,c))};var De=e=>{const t=e.setDevice,a=e.setIsDialogOpen;return l.a.createElement(U.a,{className:"main-elevation",z:24,style:{margin:"1rem"}},l.a.createElement(z.a,null,l.a.createElement(z.c,null,l.a.createElement(z.d,{alignStart:!0},l.a.createElement(z.e,null,e.typeName)))),l.a.createElement(m.a,{twoLine:!0},e.dishes.map(e=>l.a.createElement(u.j,{key:e._id,onClick:()=>{t(e),a(!0)},text:e.name,secondaryText:"\u20ac ".concat(e.cost.toFixed(2)),metaIcon:"edit"}))))},$e=a(82);function Ce(){const e=Object(O.a)(["\nquery dishExtras($typeId: ID) {\n  dishExtras(type: $typeId) {\n    _id,\n    name\n  }\n}"]);return Ce=function(){return e},e}function we(){const e=Object(O.a)(["mutation remove($id: ID!){\n removeDish(_id: $id, ){\n   _id, \n   name\n }\n}"]);return we=function(){return e},e}function Fe(){const e=Object(O.a)(["mutation update($id: ID!, $name: String, $cost: Float, $type: ID, $deselectedExtras: [ID]){\n updateDish(_id: $id, name: $name, cost: $cost, type: $type, deselectedExtras: $deselectedExtras){\n   _id, \n   name\n }\n}"]);return Fe=function(){return e},e}function Ie(){const e=Object(O.a)([" mutation add($name: String!, $cost: Float!, $type: ID!, $deselectedExtras: [ID]){\n addDish(name: $name, cost: $cost, type: $type, deselectedExtras: $deselectedExtras){\n   _id, \n   name\n }\n}"]);return Ie=function(){return e},e}const Te=Object(v.b)(Ie()),Ne=Object(v.b)(Fe()),Pe=Object(v.b)(we()),Me=Object(v.b)(Ce()),Ae=(e,t)=>a=>{const n=e.indexOf(a.target.chipId);t(n>-1?e.filter((e,t)=>t!==n):[...e,a.target.chipId])};var Be=e=>{const t=Object(n.useState)(e.name||""),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(e.cost||0),o=Object(s.a)(i,2),d=o[0],m=o[1],u=Object(n.useState)(e.type?e.type._id:""),E=Object(s.a)(u,2),b=E[0],p=E[1],h=Object(n.useState)((e.deselectedExtras||[]).map(e=>e._id)),y=Object(s.a)(h,2),g=y[0],O=y[1];Object(n.useEffect)(()=>{c(e.name||""),m(e.cost||0),p(e.type?e.type._id:""),O((e.deselectedExtras||[]).map(e=>e._id))},[e.name,e.cost,e.type,e.deselectedExtras]);const v=Object(j.a)(Pe),f=Object(s.a)(v,1)[0],_=Object(j.a)(e._id?Ne:Te),x=Object(s.a)(_,1)[0],k=Object(j.b)(Me,{variables:{typeId:b||null}}).data,S=void 0===k?{dishExtras:[]}:k;return l.a.createElement(I.a,{open:e.open,onClose:e.onClose},l.a.createElement(I.e,null,e._id?"Edit ".concat(e.name):"New dish"),l.a.createElement(I.d,null,l.a.createElement(G.a,{type:"text",label:"Name",value:r,onChange:e=>c(e.target.value||"")}),l.a.createElement(G.a,{type:"number",inputMode:"numeric",label:"Cost",invalid:!1,value:d,onChange:e=>m(e.target.value)}),l.a.createElement($e.a,{value:b,onChange:e=>p(e.target.value),placeholder:"",label:"Dish type",options:e.dishTypes}),l.a.createElement(V.b,null,S.dishExtras.map(e=>l.a.createElement(V.a,{key:e._id,label:e.name,checkmark:!0,selected:!g.some(t=>t===e._id),onInteraction:Ae(g,O)})))),l.a.createElement(I.b,null,l.a.createElement(I.c,{theme:"secondary",action:"close",isDefaultAction:!0},"Cancel"),l.a.createElement(I.c,{action:"accept",onClick:()=>f({variables:{id:e._id}}),disabled:!e._id},"Delete"),l.a.createElement(I.c,{action:"accept",onClick:()=>{const t=parseFloat(d);x({variables:{id:e._id,name:r,type:b,cost:t,deselectedExtras:g}})}},"Save")))};function We(){const e=Object(O.a)(["\n  query dishes {\n    dishes {\n      _id,\n      name,\n      cost,\n      type {\n        _id,\n        name\n      }, \n      deselectedExtras {\n        _id\n      }\n    }\n  }"]);return We=function(){return e},e}function qe(){const e=Object(O.a)(["\n  query dishTypes {\n    dishTypes {\n      _id,\n      name\n    }\n  }"]);return qe=function(){return e},e}const Re=Object(v.b)(qe()),He=Object(v.b)(We());var Le=Object(o.b)("store")(Object(o.c)(e=>{const t=Object(n.useState)({}),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(!1),o=Object(s.a)(i,2),d=o[0],m=o[1],u=e.store.searchText,E=new RegExp(u,"i"),b=Object(j.b)(Re,{pollInterval:1e4});let p=[];b.data&&b.data.dishTypes&&(p=b.data.dishTypes.map(e=>({label:e.name,value:e._id})));const h=Object(j.b)(He,{pollInterval:1e3}),y=h.loading,g=h.error,O=h.data,v=(_=(void 0===O?{dishes:[]}:O).dishes.filter(e=>!u||E.test(e.name)||E.test(e.type.name)),k=e=>e.type.name,_.reduce((function(e,t){return(e[k(t)]=e[k(t)]||[]).push(t),e}),{}));var _,k;const S=[];for(const n in v)S.push(l.a.createElement("div",{key:v[n][0]._id,style:{width:"-webkit-fill-available",maxWidth:"500px",minWidth:"320px"}},l.a.createElement(De,{typeName:n,dishes:v[n],dishTypes:p,setDevice:c,setIsDialogOpen:m})));return l.a.createElement(l.a.Fragment,null,y?l.a.createElement(F.a,null):l.a.createElement(l.a.Fragment,null),g?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Error :("),l.a.createElement("span",null,g.message)):l.a.createElement(l.a.Fragment,null),l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,{id:"masonry-layout"},S),l.a.createElement(f.a,{className:"floating-right",icon:"add",onClick:()=>{c({}),m(!0)}})),l.a.createElement(Be,Object.assign({},r,{dishTypes:p,open:d,onClose:()=>{c({}),m(!1)}})),l.a.createElement("div",{className:"bottomSpacer"}))}));var Ue=Object(o.b)("store")(Object(o.c)(e=>l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,null,l.a.createElement(z.c,null,l.a.createElement(z.d,{alignStart:!0},l.a.createElement(z.e,null,"Global Settings")))),l.a.createElement(m.a,null,l.a.createElement(u.d,{onClick:()=>e.store.setKitchenMode(!e.store.kitchenMode)},l.a.createElement(u.e,{icon:e.store.kitchenMode?"radio_button_checked":"radio_button_unchecked"}),l.a.createElement(u.i,null,"Kitchen Mode"))))));function ze(){const e=Object(O.a)(["mutation remove($id: ID!){\n removeDishType(_id: $id, ){\n   _id, \n   name\n }\n}"]);return ze=function(){return e},e}function Ke(){const e=Object(O.a)(["mutation update($id: ID!, $name: String!){\n updateDishType(_id: $id, name: $name){\n   _id, \n   name\n }\n}"]);return Ke=function(){return e},e}function Je(){const e=Object(O.a)([" mutation add($name: String!){\n addDishType(name: $name){\n   _id, \n   name\n }\n}"]);return Je=function(){return e},e}const Ze=Object(v.b)(Je()),Ge=Object(v.b)(Ke()),Qe=Object(v.b)(ze());var Ve=e=>{const t=Object(n.useState)(e.name||""),a=Object(s.a)(t,2),r=a[0],c=a[1],i=e.isDialogOpen,o=e.setIsDialogOpen;Object(n.useEffect)(()=>{c(e.name||"")},[e.name]);const d=!e._id,m=Object(j.a)(Qe),u=Object(s.a)(m,1)[0],E=Object(j.a)(d?Ze:Ge),b=Object(s.a)(E,1)[0];return l.a.createElement(I.a,{open:i,onClose:()=>o(!1)},l.a.createElement(I.e,null,d?"Edit dish type":"New dish type"),l.a.createElement(I.d,null,l.a.createElement(G.a,{type:"text",label:"Name",value:r,onChange:e=>c(e.target.value||"")})),l.a.createElement(I.b,null,l.a.createElement(I.c,{theme:"secondary",action:"cancel",isDefaultAction:!0},"Cancel"),l.a.createElement(I.c,{action:"accept",onClick:()=>u({variables:{id:e._id}}),disabled:d},"Delete"),l.a.createElement(I.c,{action:"accept",onClick:()=>b({variables:{id:e._id,name:r}})},"Save")))};function Xe(){const e=Object(O.a)(["\nquery dishTypes {\n  dishTypes {\n    _id,\n    name\n  }\n}"]);return Xe=function(){return e},e}const Ye=Object(v.b)(Xe());var et=e=>{const t=Object(n.useState)(!1),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)({_id:null}),o=Object(s.a)(i,2),d=o[0],E=o[1],b=Object(j.b)(Ye,{pollInterval:1e3}),p=b.loading,h=b.error,y=b.data,g=void 0===y?{dishTypes:[]}:y;return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,null,l.a.createElement(z.c,null,l.a.createElement(z.d,{alignStart:!0},l.a.createElement(z.e,null,"Dish types")),l.a.createElement(z.d,{alignEnd:!0},l.a.createElement(z.b,{icon:"add",onClick:()=>{E({_id:null}),c(!r)}})))),p?l.a.createElement(F.a,null):l.a.createElement(l.a.Fragment,null),h?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Error :("),l.a.createElement("span",null,h.message)):l.a.createElement(l.a.Fragment,null),l.a.createElement(m.a,null,g.dishTypes.map(e=>l.a.createElement(u.d,{key:e._id,onClick:()=>{E(e),c(!r)}},l.a.createElement(u.i,null,e.name),l.a.createElement(u.f,{icon:"edit"})))),l.a.createElement(Ve,Object.assign({isDialogOpen:r,setIsDialogOpen:c},d)))};var tt=()=>l.a.createElement(K.a,null,l.a.createElement(K.b,{span:"12"},l.a.createElement(U.a,{className:"main-elevation",z:24},l.a.createElement(Ue,null))),l.a.createElement(K.b,{span:"12"},l.a.createElement(U.a,{className:"main-elevation",z:24},l.a.createElement(et,null)))),at=a(87),nt=a(354),lt=a(107),rt=a.n(lt),ct=a(351);function it(){const e=Object(O.a)(["\n{\n  orders(hasPayed: true) {\n    _id,\n    timestamp,\n    amountPayed,\n    dishes {\n      dish {\n        name,\n        cost,\n        type{\n          name\n        } \n      }\n    }\n  }\n}"]);return it=function(){return e},e}const st=(e,t)=>a=>{let n=new Date("0"),l="History";1===a.detail.index?(n=function(e){let t=(e=new Date(e)).getDay();const a=e.getDate()-t+(0===t?-6:1);return new Date(e.setDate(a))}(new Date((new Date).toDateString())),l="This weeks History"):2===a.detail.index&&(n=new Date((new Date).toDateString()),l="Todays History"),e(n),t(l)},ot=Object(v.b)(it());var dt=()=>{const e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(new Date((new Date).toDateString())),i=Object(s.a)(c,2),o=i[0],d=i[1],E=Object(n.useState)("Todays History"),b=Object(s.a)(E,2),p=b[0],h=b[1],y=Object(n.useState)(0),g=Object(s.a)(y,2),O=g[0],v=g[1],f=Object(n.useState)(10),_=Object(s.a)(f,1)[0],x=Object(j.b)(ot),k=x.loading,S=x.error,D=x.data;let $=[],C=0,w=0,I=[];return D&&D.orders&&(I=D.orders.filter(e=>new Date(parseInt(e.timestamp))>=o)),I.forEach(e=>{e.dishes.forEach(t=>{$.push({timestamp:new Date(parseInt(e.timestamp)),name:t.dish.name,cost:t.dish.cost.toFixed(2),type:t.dish.type.name,id:e._id}),C+=t.dish.cost}),w=w+e.amountPayed||0}),l.a.createElement(U.a,{className:"main-elevation",z:24},l.a.createElement(z.a,null,l.a.createElement(z.c,null,l.a.createElement(z.d,{alignStart:!0},l.a.createElement(z.e,null,p)),l.a.createElement(z.d,{alignEnd:!0},l.a.createElement(at.b,null,l.a.createElement(nt.a,{open:a,onSelect:st(d,h),onClose:e=>r(!1)},l.a.createElement(nt.b,null,"Everything"),l.a.createElement(nt.b,null,"This Week"),l.a.createElement(nt.b,null,"Today")),l.a.createElement(z.b,{icon:"filter_list",onClick:e=>r(!a)})),l.a.createElement(z.b,{icon:"cloud_download",onClick:()=>function(e,t,a){const n=new Blob(["\ufeffid,timestamp,name,type,cost\n",...e.map(e=>"".concat(e.id,",").concat(e.timestamp.toISOString(),",").concat(e.name,",").concat(e.type,",").concat(e.cost,"\n"))],{encoding:"UTF-8",type:"text/csv;charset=UTF-8"});rt.a.saveAs(n,"Dishes sold ".concat(a.toISOString(),"-").concat((new Date).toISOString(),".csv"),!0);const l=new Blob(["\ufeffid, timestamp, totalPayed\n",...t.map(e=>"".concat(e._id,",").concat(new Date(e.timestamp).toISOString(),",").concat((e.amountPayed||0).toFixed(2),"\n"))],{encoding:"UTF-8",type:"text/csv;charset=UTF-8"});rt.a.saveAs(l,"Orders sold ".concat(a.toISOString()," -").concat((new Date).toISOString(),".csv"),!0)}($,I,o)})))),l.a.createElement(m.a,null,$.slice(O*_,O*_+_).map((e,t)=>l.a.createElement(u.d,{key:t},l.a.createElement(u.i,null,e.name,l.a.createElement(u.h,null," ",e.timestamp.toDateString()," ")),l.a.createElement(u.f,{tag:"span",basename:""},"\u20ac ".concat(e.cost)))),k||S||0!==$.length?l.a.createElement(l.a.Fragment,null):l.a.createElement(u.d,null,l.a.createElement(u.i,null," Nothing was found")),l.a.createElement(u.a,null),k?l.a.createElement(F.a,null):l.a.createElement(l.a.Fragment,null),S?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Error :("),l.a.createElement("span",null,S.message)):l.a.createElement(l.a.Fragment,null),l.a.createElement(u.d,null,l.a.createElement(u.i,null,"Total",l.a.createElement(u.h,null,"with tip: ","\u20ac ".concat(w.toFixed(2))," ")),l.a.createElement(u.f,{tag:"span",basename:""},"\u20ac ".concat(C.toFixed(2)))),l.a.createElement(u.a,null)),l.a.createElement("table",{style:{width:"100%"}},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement(ct.a,{rowsPerPageOptions:[],count:$.length,rowsPerPage:_,page:O,onChangePage:(e,t)=>v(t)})))))};var mt=e=>{const t=e.openDialog;return l.a.createElement(U.a,{className:"main-elevation",z:24,style:{margin:"1rem"}},l.a.createElement(z.a,null,l.a.createElement(z.c,null,l.a.createElement(z.d,{alignStart:!0},l.a.createElement(z.e,null,e.typeName)))),l.a.createElement(m.a,{twoLine:!0},e.extras.map(e=>l.a.createElement(u.j,{key:e._id,onClick:()=>t(e),text:e.name,secondaryText:"\u20ac ".concat(e.cost.toFixed(2)),metaIcon:"edit"}))))};function ut(){const e=Object(O.a)(["mutation remove($id: ID!){\n removeDishExtra(_id: $id, ) {\n   _id, \n   name\n }\n}"]);return ut=function(){return e},e}function Et(){const e=Object(O.a)(["mutation update($id: ID!, $name: String!, $cost: Float!, $type: ID!){\n updateDishExtra(_id: $id, name: $name, cost: $cost, type: $type) {\n   _id, \n   name\n }\n}"]);return Et=function(){return e},e}function bt(){const e=Object(O.a)([" mutation add($name: String!, $cost: Float!, $type: ID!){\n addDishExtra(name: $name, cost: $cost, type: $type) {\n   _id, \n   name\n }\n}"]);return bt=function(){return e},e}const pt=Object(v.b)(bt()),ht=Object(v.b)(Et()),yt=Object(v.b)(ut());var gt=e=>{const t=Object(n.useState)(e.name||""),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(e.cost?e.cost.toFixed(2):0),o=Object(s.a)(i,2),d=o[0],m=o[1],u=Object(n.useState)(e.type?e.type._id:""),E=Object(s.a)(u,2),b=E[0],p=E[1];Object(n.useEffect)(()=>{c(e.name||""),m(e.cost?e.cost.toFixed(2):0),p(e.type?e.type._id:"")},[e.name,e.cost,e.type]);const h=!e._id,y=Object(j.a)(yt),g=Object(s.a)(y,1)[0],O=Object(j.a)(h?pt:ht),v=Object(s.a)(O,1)[0];return l.a.createElement(I.a,{open:e.open,onClose:()=>{!function(e,t,a,n){e(n.name||""),t(n.cost||0),a(n.type?n.type._id:"")}(c,m,p,e),e.onClose()}},l.a.createElement(I.e,null,h?"New extra for dish type":"Edit ".concat(e.name)),l.a.createElement(I.d,null,l.a.createElement(G.a,{type:"text",label:"Name",value:r,onChange:e=>c(e.target.value||"")}),l.a.createElement(G.a,{type:"number",inputMode:"numeric",label:"Cost",invalid:!1,value:d,onChange:e=>m(e.target.value)}),l.a.createElement($e.a,{value:b,onChange:e=>p(e.target.value),placeholder:"",label:"Dish type",options:e.dishTypes})),l.a.createElement(I.b,null,l.a.createElement(I.c,{theme:"secondary",action:"cloase",isDefaultAction:!0},"Cancel"),l.a.createElement(I.c,{action:"accept",onClick:()=>g({variables:{id:e._id}}),disabled:h},"Delete"),l.a.createElement(I.c,{action:"accept",onClick:()=>{v({variables:{id:e._id,name:r,type:b,cost:parseFloat(d)}})}},"Save")))};function Ot(){const e=Object(O.a)(["\n{\n  dishExtras {\n    _id, \n    name, \n    cost, \n    type {\n      _id,\n      name\n    }\n  }\n}"]);return Ot=function(){return e},e}function jt(){const e=Object(O.a)(["\nquery dishTypes {\n  dishTypes {\n    _id,\n    name\n  }\n}"]);return jt=function(){return e},e}const vt=Object(v.b)(jt()),ft=Object(v.b)(Ot()),_t=(e,t)=>a=>{e(a),t(!0)};var xt=Object(o.b)("store")(Object(o.c)(e=>{const t=Object(n.useState)(!1),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)({}),o=Object(s.a)(i,2),d=o[0],m=o[1],u=e.store.searchText,E=new RegExp(u,"i"),b=Object(j.b)(vt,{pollInterval:1e4});let p=[];b.data&&b.data.dishTypes&&(p=b.data.dishTypes.map(e=>({label:e.name,value:e._id})));const h=Object(j.b)(ft,{pollInterval:1e3}),y=h.loading,g=h.error,O=h.data,v=(_=(void 0===O?{dishExtras:[]}:O).dishExtras.filter(e=>!u||E.test(e.name)||E.test(e.type.name)),k=e=>e.type.name,_.reduce((e,t)=>((e[k(t)]=e[k(t)]||[]).push(t),e),{}));var _,k;const S=[];for(const n in v)S.push(l.a.createElement("div",{key:v[n][0]._id,style:{width:"-webkit-fill-available",maxWidth:"500px",minWidth:"320px"}},l.a.createElement(mt,{typeName:n,extras:v[n],dishTypes:p,openDialog:_t(m,c)})));return l.a.createElement(l.a.Fragment,null,y?l.a.createElement(F.a,null):l.a.createElement(l.a.Fragment,null),g?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Error :("),l.a.createElement("span",null,g.message)):l.a.createElement(l.a.Fragment,null),l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,{id:"masonry-layout"},S),l.a.createElement(f.a,{className:"floating-right",icon:"add",onClick:()=>_t(m,c)({})})),l.a.createElement(gt,Object.assign({},d,{open:r,dishTypes:p,onClose:()=>c(!1)})))}));class kt extends n.Component{render(){return l.a.createElement("div",{className:"App"},l.a.createElement(g,null),l.a.createElement("div",{className:"mdc-top-app-bar--fixed-adjust"},l.a.createElement(i.a,{exact:!0,path:"/",component:L}),l.a.createElement(i.a,{path:"/orders",component:L}),l.a.createElement(i.a,{path:"/orderDetails/:id?",component:be}),l.a.createElement(i.a,{path:"/payOrder/:id",component:Se}),l.a.createElement(i.a,{path:"/dishes",component:Le}),l.a.createElement(i.a,{path:"/settings",component:tt}),l.a.createElement(i.a,{path:"/orderHistory",component:dt}),l.a.createElement(i.a,{path:"/dishExtra",component:xt})))}}var St=kt;const Dt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $t(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const a=e.installing;null!=a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}var Ct=a(22),wt=a(13);class Ft{constructor(){this.searchText="",this.kitchenMode="true"===localStorage.getItem("Bit.KitchenMode")||!1}setKitchenMode(e){this.kitchenMode=e,localStorage.setItem("Bit.KitchenMode",e)}}Object(wt.i)(Ft,{searchText:wt.n,kitchenMode:wt.n});var It=new Ft,Tt=a(141);const Nt=new v.a,Pt={store:It};c.a.render(l.a.createElement(Tt.a,{options:{primary:"#795548",secondary:"#486c79",background:"#fff"}},l.a.createElement(Ct.a,{client:Nt},l.a.createElement(o.a,Pt,l.a.createElement(b.a,null,l.a.createElement(St,null))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("","/service-worker.js");Dt?(!function(e,t){fetch(e).then(a=>{const n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):$t(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):$t(t,e)})}}()}},[[152,1,2]]]);
//# sourceMappingURL=main.b9471734.chunk.js.map