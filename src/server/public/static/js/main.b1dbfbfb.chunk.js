(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{214:function(e,t,n){e.exports=n(377)},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},349:function(e,t,n){},350:function(e,t,n){},377:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(48),c=n.n(i),s=(n(219),n(3)),o=n(4),l=n(8),d=n(7),u=n(9),m=n(405),h=(n(220),n(2)),p=n(25),y=n(40),f=n(399),b=n(401),E=n(77),v=n(400),g=(n(221),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={searching:!1,searchText:"",modalOpen:!1},n.toggleSearch=n.toggleSearch.bind(Object(h.a)(Object(h.a)(n))),n.handleSearchText=n.handleSearchText.bind(Object(h.a)(Object(h.a)(n))),n.onClick=n.onClick.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"onClick",value:function(){this.setState({modalOpen:!this.state.modalOpen})}},{key:"handleSearchText",value:function(){var e=this;return function(t){e.setState({searchText:t.target.value}),e.props.store.searchText=t.target.value}}},{key:"toggleSearch",value:function(){this.setState({searching:!this.state.searching,searchText:""}),this.props.store.searchText=""}},{key:"render",value:function(){var e=this,t=this.toggleSearch,n=this.onClick;return this.state.searching?r.a.createElement(y.a,{dense:!0,fixed:!0},r.a.createElement(y.d,null,r.a.createElement(y.e,{className:"search-field",alignStart:!0},r.a.createElement("input",{placeholder:"Search",autoFocus:!0,value:this.state.searchText,onChange:this.handleSearchText()}),r.a.createElement(y.b,{"aria-label":"Search",icon:"clear",alt:"Search this Page",onClick:t})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{dense:!0,fixed:!0},r.a.createElement(y.d,null,r.a.createElement(y.e,{alignStart:!0},r.a.createElement(y.c,{icon:"menu",onClick:n}),r.a.createElement(y.f,null,this.props.store.kitchenMode?"BIt's Kitchen":"BIt")),r.a.createElement(y.e,{alignEnd:!0},r.a.createElement(y.b,{"aria-label":"Search",icon:"search",alt:"Search this Page",onClick:t})))),r.a.createElement(E.a,{modal:!0,open:this.state.modalOpen,onClose:function(){return e.setState({modalOpen:!1})}},r.a.createElement(E.c,null,r.a.createElement(E.d,null,"Menu")),r.a.createElement(E.b,null,r.a.createElement(f.a,null,r.a.createElement(v.a,{to:"/orders"},r.a.createElement(b.d,{onClick:n},r.a.createElement(b.e,{icon:"shopping_cart"}),r.a.createElement(b.i,null,"Orders"))),r.a.createElement(v.a,{to:"/orderHistory"},r.a.createElement(b.d,{onClick:n},r.a.createElement(b.e,{icon:"history"}),r.a.createElement(b.i,null,"History"))),r.a.createElement(v.a,{to:"/dishes"},r.a.createElement(b.d,{onClick:n},r.a.createElement(b.e,{icon:"shopping_basket"}),r.a.createElement(b.i,null,"Dishes"))),r.a.createElement(v.a,{to:"/dishExtra"},r.a.createElement(b.d,{onClick:n},r.a.createElement(b.e,{icon:"loyalty"}),r.a.createElement(b.i,null,"Extras"))),r.a.createElement(v.a,{to:"/settings"},r.a.createElement(b.d,{onClick:n},r.a.createElement(b.e,{icon:"settings"}),r.a.createElement(b.i,null,"Settings")))))))}}]),t}(a.Component)),O=Object(p.b)("store")(Object(p.c)(g)),j=n(13),k=n(15),x=n(11),C=n.n(x),D=n(69),_=n(68),S=n.n(_),T=n(50),$=n(107),w=n(12);function F(){var e=Object(j.a)(["\n  mutation join($id: ID!, $ids: [ID]!){\n    joinOrders(_id: $id, orderIds: $ids){\n      _id,\n      name,\n      table,\n      dishes {\n        dish {\n          _id,\n          name,\n          cost\n        },\n        made,\n        hasPayed,\n        extras {\n          _id,\n          name\n        }\n      }\n    }\n  }"]);return F=function(){return e},e}var N=C()(F()),I=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={people:[]},e.handleJoin=e.handleJoin.bind(Object(h.a)(Object(h.a)(e))),e.joinOrders=e.joinOrders.bind(Object(h.a)(Object(h.a)(e))),e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){var n=this;JSON.stringify(e)!==JSON.stringify(t)&&this.setState({people:e.data.map(function(e,t){return{id:e._id,name:e.name,selected:n.state.people.length>t&&n.state.people[t].selected}})})}},{key:"componentDidMount",value:function(){this.setState({people:this.props.data.map(function(e){return{id:e._id,name:e.name,selected:!1}})})}},{key:"handleJoin",value:function(e){var t=this;return function(){var n=t.state.people;n[e].selected=!n[e].selected,t.setState({people:n})}}},{key:"joinOrders",value:function(e){var t=this;return function(){var n=t.state.people.filter(function(e){return e.selected}).map(function(e){return e.id});e({variables:{id:t.props._id,ids:n}})}}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.e,null,"Everyone at table ",this.props.table),r.a.createElement(w.d,null,r.a.createElement(f.a,null,this.state.people.map(function(t,n){return r.a.createElement(b.d,{key:t.id,onClick:e.handleJoin(n)},r.a.createElement(b.e,{icon:t.selected?"radio_button_checked":"radio_button_unchecked"}),r.a.createElement(b.i,null,t.name))}))),r.a.createElement(w.b,null,r.a.createElement(w.c,{action:"close"},"Cancel"),r.a.createElement(k.Mutation,{mutation:N},function(t){return r.a.createElement(w.c,{action:"accept",onClick:e.joinOrders(t),isDefaultAction:!0},"Join")})))}}]),t}(a.Component);function P(){var e=Object(j.a)(["\n                query order($table: Int) {\n                  orders(table: $table, hasPayed: false) {\n                    _id,\n                    name,\n                  }\n                }"]);return P=function(){return e},e}var M=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={standardDialogOpen:!1},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.Query,{query:C()(P()),variables:{table:this.props.table},pollInterval:5e3},function(t){var n=t.loading,a=t.error,i=t.data;return!n&&!a&&i&&i.orders?r.a.createElement(w.a,{open:e.state.standardDialogOpen,onClose:function(t){return e.setState({standardDialogOpen:!1})}},r.a.createElement(I,Object.assign({data:i.orders.filter(function(t){return t._id!==e.props._id})},e.props))):r.a.createElement(w.f,{title:"Everyone at table ".concat(e.props.table),body:"Fetching Data",open:e.state.standardDialogOpen,onClose:function(t){return e.setState({standardDialogOpen:!1})}})}),r.a.createElement(T.b,{onClick:function(t){return e.setState({standardDialogOpen:!0})}},"Join"))}}]),t}(a.Component);n(349);function A(){var e=Object(j.a)(["\n  mutation updateOrder($id: ID!, $dishes: [orderDishMutation]!){\n    updateOrder(_id: $id, dishes: $dishes){\n      _id,\n      name,\n      table,\n      notes,\n      dishes {\n        dish {\n          _id,\n          name,\n          cost\n        },\n        made,\n        delivered,\n        hasPayed\n      }\n    }\n  }"]);return A=function(){return e},e}var q=C()(A()),B=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).handleDishClick=e.handleDishClick.bind(Object(h.a)(Object(h.a)(e))),e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleDishClick",value:function(e,t,n){var a=this;return function(){var r=a.props.dishes.map(function(e){return{id:e.dish._id,made:e.made,hasPayed:e.hasPayed,delivered:e.delivered,extras:e.extras.map(function(e){return e._id})}});if(a.props.store.kitchenMode){if(r[t].delivered)return;r[t].made=!r[t].made}else{if(!r[t].made)return;r[t].delivered=!r[t].delivered}n({variables:{id:e,dishes:r}})}}},{key:"render",value:function(){var e=this,t=this.props;return r.a.createElement(T.a,null,r.a.createElement(v.a,{to:"/orderDetails/".concat(t._id)},r.a.createElement(T.g,null,r.a.createElement("div",{style:{padding:"0 1rem 1rem 1rem"}},r.a.createElement($.a,{use:"headline6",tag:"h2",style:{}},r.a.createElement("span",{className:"highlight"},t.table)," ",t.name)))),r.a.createElement("div",{style:{padding:"0 1rem 1rem 1rem"}},r.a.createElement(k.Mutation,{mutation:q},function(n){return r.a.createElement($.a,{use:"body1",tag:"div",theme:"textSecondaryOnBackground"},r.a.createElement(f.a,{className:"extendSecondaryText"},t.dishes.map(function(a,i){var c=e.props.store.kitchenMode&&a.delivered,s=!e.props.store.kitchenMode&&!a.made;return r.a.createElement(b.j,{key:i,className:a.delivered?"done":"",graphic:a.made?a.delivered?"done_all":"done":"radio_button_unchecked",onClick:e.handleDishClick(t._id,i,n),disabled:c||s,text:a.dish.name,secondaryText:a.extras.map(function(e){return e.name}).join(", "),ripple:a.made})})))})),r.a.createElement($.a,{use:"subtitle1",tag:"div",style:{padding:"0.5rem 1rem"},theme:"textSecondaryOnBackground"},this.props.notes),r.a.createElement(T.f,null,r.a.createElement(T.c,null,r.a.createElement(M,this.props)),r.a.createElement(T.e,null,r.a.createElement(v.a,{to:"/payOrder/".concat(t._id)},r.a.createElement(T.d,{icon:"credit_card"})))))}}]),t}(a.Component),W=Object(p.b)("store")(Object(p.c)(B)),R=n(32);function J(){var e=Object(j.a)(["query order($hasPayed: Boolean) {\n              orders(hasPayed: $hasPayed) {\n                _id,\n                name,\n                table,\n                notes,\n                dishes {\n                  dish {\n                    _id,\n                    name,\n                    cost,\n                    type {\n                      _id,\n                      name\n                    }\n                  },\n                  made,\n                  delivered,\n                  hasPayed,\n                  extras {\n                    _id, \n                    name\n                  }\n                }\n              }\n            }"]);return J=function(){return e},e}var Q=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.store.searchText,n=new RegExp(t,"i");return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.Query,{query:C()(J()),variables:{hasPayed:!1},pollInterval:500},function(a){var i=a.loading,c=a.error,s=a.data;s&&s.orders||(s={orders:[]});var o=r.a.createElement(S.a,{id:"masonry-layout"},s.orders.filter(function(a){return(!t||a.table.toString()===t||n.test(a.name)||a.dishes.some(function(e){return n.test(e.dish.type.name)}))&&(!e.props.store.kitchenMode||a.dishes.some(function(e){return!e.made}))}).map(function(t,n){return r.a.createElement("div",{key:n,style:{width:"-webkit-fill-available",maxWidth:"500px",minWidth:"320px"}},r.a.createElement(W,Object.assign({key:t._id},t,e.props)))}));return i&&(o=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),o)),c?(console.warn(c),r.a.createElement("p",null,"Error :(")):o}),r.a.createElement(v.a,{to:"/orderDetails"},r.a.createElement(D.a,{className:"floating-right",icon:"add"})),r.a.createElement("div",{className:"bottomSpacer"}))}}]),t}(a.Component),H=Object(p.b)("store")(Object(p.c)(Q)),z=n(38),L=n(6),K=n(39),U=n(403),G=n(404),Y=n(70),V=n(34),X=n(43),Z=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).onDelete=function(){n.setState({selectedExtras:[]}),n.props.onDelete()},n.onCancel=function(){n.setState({selectedExtras:[]}),n.props.onClose()},n.onSave=function(){n.props.onSave(n.state.selectedExtras.map(function(e){return Object.create(e)})),n.setState({selectedExtras:[]})},n.addExtra=function(e){var t=n.state.selectedExtras;n.setState({selectedExtras:[e].concat(t)})},n.state={selectedExtras:[]},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){JSON.stringify(e.selectedExtras)!==JSON.stringify(t.selectedExtras)&&this.setState({selectedExtras:e.selectedExtras})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dish,a=t.extras,i=a?"Edit ".concat(n?n.name:"dish"," extras"):"Confirm ".concat(n?n.name:"dish"," Deletion");return r.a.createElement(w.a,{open:this.props.open,onClose:this.props.onClose},r.a.createElement(w.e,null,i),a?r.a.createElement(w.d,null,r.a.createElement(Y.b,null,a.sort(function(e,t){return e.name<t.name?-1:1}).map(function(t){return r.a.createElement(Y.a,{key:t._id,label:t.name,onClick:function(){return e.addExtra(t)}})})),r.a.createElement(f.a,null,this.state.selectedExtras.map(function(t,n){return r.a.createElement(b.j,{key:n,graphic:"close",text:t.name,onClick:function(){e.state.selectedExtras.splice(n,1),e.setState({selectedExtras:e.state.selectedExtras})}})}))):r.a.createElement(r.a.Fragment,null),r.a.createElement(w.b,null,r.a.createElement(w.c,{theme:"secondary",action:"close",onClick:this.onDelete},"Delete"),r.a.createElement(w.c,{theme:"primary",action:"close",isDefaultAction:!0,onClick:this.onCancel},"Cancel"),a?r.a.createElement(w.c,{theme:"primary",action:"accept",onClick:this.onSave},"Save"):r.a.createElement(r.a.Fragment,null)))}}]),t}(a.Component);n(350);function ee(){var e=Object(j.a)(["\n  mutation updateOrder($id: ID!, $name: String, $table: Int, $notes: String, $dishes: [orderDishMutation]){\n    updateOrder(_id: $id, table: $table, name: $name, dishes: $dishes, notes: $notes ){\n      _id, \n      name,\n      table,\n      notes\n    }\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(j.a)(["\n  mutation addOrder($name: String, $table: Int!, $notes: String, $dishes: [orderDishMutation]!){\n    addOrder(table: $table, name: $name, dishes: $dishes, notes: $notes){\n      _id, \n      name,\n      table,\n      notes\n    }\n  }\n"]);return te=function(){return e},e}var ne=C()(te()),ae=C()(ee()),re=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={id:"",name:"",table:0,notes:"",dishes:[],activeTabIndex:0,dishTypes:{},extras:{},selectedChip:{}},e.addDish=e.addDish.bind(Object(h.a)(Object(h.a)(e))),e.removeDish=e.removeDish.bind(Object(h.a)(Object(h.a)(e))),e.changeTextField=e.changeTextField.bind(Object(h.a)(Object(h.a)(e))),e.selectDish=e.selectDish.bind(Object(h.a)(Object(h.a)(e))),e.saveExtras=e.saveExtras.bind(Object(h.a)(Object(h.a)(e))),e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.order&&this.setState({id:this.props.order._id,name:this.props.order.name,table:this.props.order.table,notes:this.props.order.notes,dishes:this.props.order.dishes.map(function(e){return{dish:{id:e.dish._id,name:e.dish.name,typeName:e.dish.type.name},made:e.made,hasPayed:e.hasPayed,extras:e.extras,delivered:e.delivered}})});var e=this.state.dishTypes;this.props.dishes.forEach(function(t){e[t.type.name]?e[t.type.name].push(t):e[t.type.name]=[t]});var t=this.state.extras;this.props.extras.forEach(function(e){t[e.type.name]?t[e.type.name].push(e):t[e.type.name]=[e]}),this.setState({dishTypes:e,extras:t})}},{key:"addDish",value:function(e,t,n){var a=[{dish:{id:e,name:t,typeName:n},made:!1,hasPayed:!1}].concat(this.state.dishes);this.setState({dishes:a})}},{key:"removeDish",value:function(){var e=this.state.selectedDishId,t=this.state.dishes;t.length<e||t[e].hasPayed||t[e].made||(1===t.length?t=[]:t.splice(e,1),this.setState({dishes:t}))}},{key:"changeTextField",value:function(e){var t=this;return function(n){var a={};a[e]=n.target.value,t.setState(a)}}},{key:"selectDish",value:function(e){var t=this.state.dishes;if(t&&!(t.length<e)){var n=t[e].dish;n.hasPayed||n.made||this.setState({openDialog:!0,selectedDish:n,selectedDishId:e,selectableExtras:this.state.extras[t[e].dish.typeName],dishExtras:t[e].extras})}}},{key:"saveExtras",value:function(e){var t=this.state.dishes;t[this.state.selectedDishId].extras=e,this.setState({dishes:t})}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.dishTypes),n=this.state,a=this.props,i=this.selectDish;return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{className:"order-details"},r.a.createElement(K.b,{span:"12"},0===t.length?String():r.a.createElement(U.a,{activeTabIndex:n.activeTabIndex,onActivate:function(t){e.setState({activeTabIndex:t.detail.index})}},t.map(function(e,t){return r.a.createElement(G.a,{key:t},e)})),r.a.createElement(Y.b,{choice:!0},(n.dishTypes[t[n.activeTabIndex]]||[]).sort(function(e,t){return e.name<t.name?-1:1}).map(function(a,i){return r.a.createElement(Y.a,{key:i,onClick:function(r){return e.addDish(a._id,a.name,t[n.activeTabIndex])},label:a.name,checkmark:!0,selected:n.dishes.some(function(e){return e.dish.id===a._id})})})))),r.a.createElement(K.a,{className:"order-details"},r.a.createElement(K.b,{span:"6"},r.a.createElement(f.a,{className:"extendSecondaryText"},n.dishes.map(function(e,t){return r.a.createElement(b.j,{onClick:function(){e.hasPayed||e.made||e.delivered||i(t)},key:t,text:e.dish.name,secondaryText:(e.extras||[]).map(function(e){return e.name}).join(", "),graphic:e.hasPayed?"euro_symbol":e.delivered?"done_all":e.made?"done":"remove",ripple:!1,activated:!1,disabled:e.hasPayed||e.made||e.delivered})}))),r.a.createElement(K.b,{span:"6"},r.a.createElement(V.a,{icon:"event_seat",label:"Table",type:"number",min:"0",inputMode:"numeric",pattern:"\\d*",value:n.table,onChange:this.changeTextField("table")}),r.a.createElement(V.a,{icon:"account_circle",label:"Name",value:n.name,onChange:this.changeTextField("name")}),r.a.createElement(V.a,{textarea:!0,fullwidth:!0,label:"Notes",type:"number",value:n.notes,onChange:this.changeTextField("notes")}))),r.a.createElement(k.Mutation,{mutation:a.id?ae:ne},function(e,t){var i=t.data,c=t.loading,s=t.error,o=r.a.createElement(X.a,{onClick:function(){return e({variables:{id:n.id,table:n.table,name:n.name,notes:n.notes,dishes:n.dishes.map(function(e){return{id:e.dish.id,made:e.made,hasPayed:e.hasPayed,delivered:e.delivered,extras:(e.extras||[]).map(function(e){return e._id})}}).filter(function(e){return e&&e.id})}})},theme:"secondary"},"Save");return c&&(o=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),o)),s&&console.error(s),i&&a.history.goBack(),o}),r.a.createElement(Z,{open:this.state.openDialog,onClose:function(){return e.setState({openDialog:!1})},dish:this.state.selectedDish,onDelete:this.removeDish,onSave:this.saveExtras,extras:this.state.selectableExtras,selectedExtras:this.state.dishExtras}))}}]),t}(a.Component);function ie(){var e=Object(j.a)(["\n            {\n              dishes {\n                _id,\n                name,\n                type {\n                  _id,\n                  name\n                }\n              },\n              dishExtras {\n                _id,\n                name,\n                type {\n                  _id,\n                  name\n                }\n              }\n            }"]);return ie=function(){return e},e}function ce(){var e=Object(j.a)(["\n        query order($id: ID) {\n          orders(_id: $id) {\n            _id,\n            name,\n            table,\n            notes,\n            dishes {\n              dish {\n                _id,\n                name,\n                type {\n                  _id,\n                  name\n                }\n              }, \n              made,\n              hasPayed,\n              delivered,\n              extras {\n                _id,\n                name,\n                type {\n                  _id, \n                  name\n                }\n              }\n            }\n          }\n        }"]);return ce=function(){return e},e}var se=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"fetchData",value:function(e,t,n){var a=this;return r.a.createElement(k.Query,{query:C()(ce()),variables:{id:e}},function(i){var c=i.loading,s=i.error,o=i.data;return c?r.a.createElement(R.a,null):s?(console.error(s),r.a.createElement("p",null,"Error :( ")):r.a.createElement(re,{order:o.orders[0],dishes:t,extras:n,id:e,history:a.props.history})})}},{key:"render",value:function(){var e=this,t=this.props.match.params.id;return r.a.createElement(z.a,{className:"main-elevation",z:24},r.a.createElement(L.a,null,r.a.createElement(L.c,null,r.a.createElement(L.d,{alignStart:!0},r.a.createElement(L.e,null,"Order Details")),r.a.createElement(L.d,{alignEnd:!0},r.a.createElement(L.b,{icon:"clear",onClick:function(){return e.props.history.goBack()}})))),r.a.createElement(k.Query,{query:C()(ie())},function(n){var a=n.loading,i=n.error,c=n.data;return a?r.a.createElement(R.a,null):i?r.a.createElement("p",null,"Error :( ",r.a.createElement("br",null),r.a.createElement("br",null),i.graphQLErrors.map(function(e,t){var n=e.message;return r.a.createElement("span",{key:t},n)})):t?e.fetchData(t,c.dishes,c.dishExtras):r.a.createElement(re,{dishes:c.dishes,extras:c.dishExtras,history:e.props.history})}))}}]),t}(a.Component);var oe=function(e){var t="",n=e.reduce(function(e,t){return e+t.cost},0).toFixed(2);return e.forEach(function(e){t+="  \n        <tr>\n          <td>".concat(e.name,"</td>\n          <td>").concat(e.cost.toFixed(2),"</td>\n        </tr>")}),'\n<!DOCTYPE html>\n<html lang="en">\n  <body>\n    <h1>Receipt</h1>\n    <h3>'.concat((new Date).toLocaleString(),"</h3>\n    <p>\n      <table>\n        <tr>\n          <th></th>\n          <th>Amount</th>\n        </tr>\n        ").concat(t,"\n        <tr>\n          <td></td>\n          <td></td>\n        </tr>\n        <tr>\n          <td></td>\n          <td></td>\n        </tr>\n        <tr>\n          <td>Total</td>\n          <td>").concat(n,"</td>\n        </tr>\n        <tr>\n          <td>Tax</td>\n          <td>").concat((n-n/1.19).toFixed(2),"</td>\n        </tr>\n      </table>\n    </p>\n  </body>\n</html>")},le=n(101),de=n.n(le);function ue(){var e=Object(j.a)(["\n  mutation pay($id: ID!, $dishes: [orderDishMutation]!){\n    updateOrder(_id: $id, dishes: $dishes){\n      _id\n    }\n  }"]);return ue=function(){return e},e}var me=C()(ue()),he=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(d.a)(t).call(this))).state={dishes:[],paying:0,selectAll:!0},e.changePayment=e.changePayment.bind(Object(h.a)(Object(h.a)(e))),e.toggleSelection=e.toggleSelection.bind(Object(h.a)(Object(h.a)(e))),e.toggleAll=e.toggleAll.bind(Object(h.a)(Object(h.a)(e))),e.saveFile=e.saveFile.bind(Object(h.a)(Object(h.a)(e))),e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"toggleSelection",value:function(e){var t=this;return function(){var n=t.state.dishes;n[e].paying=!n[e].paying,t.setState({dishes:n,selectAll:n.every(function(e){return e.paying})})}}},{key:"toggleAll",value:function(){var e=!this.state.selectAll,t=this.state.dishes,n=!0,a=!1,r=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){i.value.paying=e}}catch(s){a=!0,r=s}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}this.setState({dishes:t,selectAll:e})}},{key:"changePayment",value:function(){var e=this;return function(t){isNaN(t.target.value)||e.setState({paying:t.target.value})}}},{key:"componentDidMount",value:function(){this.setState({dishes:this.props.dishesToPay})}},{key:"saveFile",value:function(e){var t=new Blob([oe(e)],{type:"text/plain;charset=utf-8"});de.a.saveAs(t,"Receipt ".concat((new Date).toUTCString(),".html"),!0)}},{key:"render",value:function(){var e=this,t=0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(b.d,{key:-1,onClick:this.toggleAll},r.a.createElement(b.e,{icon:this.state.selectAll?"radio_button_checked":"radio_button_unchecked"}),r.a.createElement(b.i,null,"Everything")),r.a.createElement(b.a,null),this.state.dishes.map(function(n,a){var i=n.extras.reduce(function(e,t){return e+t.cost},0);return n.paying&&(t=n.dish.cost+t+i),r.a.createElement(b.d,{key:a,onClick:e.toggleSelection(a)},r.a.createElement(b.e,{icon:n.paying?"radio_button_checked":"radio_button_unchecked"}),r.a.createElement(b.i,null,r.a.createElement(b.g,null,n.dish.name),r.a.createElement(b.h,null,n.extras.map(function(e){return e.name}).join(", "))),r.a.createElement(b.f,{tag:"span",basename:""},(n.dish.cost+i).toFixed(2)))})),r.a.createElement(K.a,null,r.a.createElement(K.b,{span:"12"},r.a.createElement(V.a,{icon:"euro_symbol",disabled:!0,label:"Total",value:t.toFixed(2)}),r.a.createElement(V.a,{icon:"euro_symbol",label:"Difference",value:(this.state.paying-t).toFixed(2),onChange:function(){},invalid:this.state.paying-t<0}),r.a.createElement(V.a,{icon:"euro_symbol",label:"Paying",type:"number",inputMode:"numeric",pattern:"\\d*.*,*\\d*",value:this.state.paying,onChange:this.changePayment()}))),r.a.createElement(k.Mutation,{mutation:me},function(t,n){var a=n.data,i=n.loading,c=n.error,s=r.a.createElement(X.a,{onClick:function(){t({variables:{id:e.props.id,dishes:e.state.dishes.map(function(e){return{id:e.dish._id,made:e.made,hasPayed:e.paying,delivered:e.delivered,extras:e.extras.map(function(e){return e._id})}}).concat(e.props.payedDishes.map(function(e){return{id:e.dish._id,made:e.made,hasPayed:e.hasPayed,delivered:e.delivered,extras:e.extras.map(function(e){return e._id})}}))}})}},"Pay");return i&&(s=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),s)),c&&console.error(c),a&&e.props.history.goBack(),s}),r.a.createElement(X.a,{theme:"secondary",onClick:function(){return e.saveFile(e.state.dishes.filter(function(e){return e.paying}).map(function(e){return e.dish}))}},r.a.createElement(X.b,{icon:"cloud_download"}),"Download"))}}]),t}(a.Component);function pe(){var e=Object(j.a)(["\n                query order($id: ID) {\n                  orders(_id: $id) {\n                    _id,\n                    name,\n                    table,\n                    dishes {\n                      dish {\n                        _id,\n                        name,\n                        cost\n                      },\n                      hasPayed,\n                      made,\n                      delivered,\n                      extras {\n                        _id,\n                        cost,\n                        name\n                      }\n                    }\n                  }\n                }"]);return pe=function(){return e},e}var ye=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.match.params.id;return r.a.createElement(z.a,{className:"main-elevation",z:24},r.a.createElement(L.a,null,r.a.createElement(L.c,null,r.a.createElement(L.d,{alignStart:!0},r.a.createElement(L.e,null,"Pay Order")),r.a.createElement(L.d,{alignEnd:!0},r.a.createElement(L.b,{icon:"clear",onClick:function(){return e.props.history.goBack()}})))),r.a.createElement(k.Query,{query:C()(pe()),variables:{id:t}},function(n){var a=n.loading,i=n.error,c=n.data;return a?r.a.createElement("p",null,"Loading..."):i?r.a.createElement("p",null,"Error :("):1!==c.orders.length?String():r.a.createElement(he,{history:e.props.history,id:t,payedDishes:c.orders[0].dishes.filter(function(e){return e.hasPayed}),dishesToPay:c.orders[0].dishes.filter(function(e){return!e.hasPayed}).map(function(e){return{dish:e.dish,made:e.made,paying:!0,delivered:e.delivered,extras:e.extras}})})}))}}]),t}(a.Component),fe=n(103);function be(){var e=Object(j.a)(["mutation remove($id: ID!){\n removeDish(_id: $id, ){\n   _id, \n   name\n }\n}"]);return be=function(){return e},e}function Ee(){var e=Object(j.a)(["mutation update($id: ID!, $name: String, $cost: Float, $type: ID){\n updateDish(_id: $id, name: $name, cost: $cost, type: $type){\n   _id, \n   name\n }\n}"]);return Ee=function(){return e},e}function ve(){var e=Object(j.a)([" mutation add($name: String!, $cost: Float!, $type: ID!){\n addDish(name: $name, cost: $cost, type: $type){\n   _id, \n   name\n }\n}"]);return ve=function(){return e},e}var ge=C()(ve()),Oe=C()(Ee()),je=C()(be()),ke=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={name:"",cost:0,type:""},n.handleNameChange=n.handleNameChange.bind(Object(h.a)(Object(h.a)(n))),n.handleCostChange=n.handleCostChange.bind(Object(h.a)(Object(h.a)(n))),n.handleTypeChange=n.handleTypeChange.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){!e._id||e.name===t.name&&e.cost===t.cost&&e.type._id===t.type._id||this.setState({name:e.name,cost:e.cost.toFixed(2),type:e.type._id})}},{key:"componentDidMount",value:function(){this.props._id&&this.setState({name:this.props.name,cost:this.props.cost.toFixed(2),type:this.props.type._id})}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value||""})}},{key:"handleCostChange",value:function(e){this.setState({cost:e.target.value})}},{key:"handleTypeChange",value:function(e){this.setState({type:e.target.value})}},{key:"toggleDialog",value:function(){var e=this;return function(){e.setState({name:e.props.name||"",cost:e.props.cost||0,type:e.props.type?e.props.type._id:"",standardDialogOpen:!e.state.standardDialogOpen})}}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{open:this.props.open,onClose:this.props.onClose},r.a.createElement(w.e,null,this.props._id?"Edit ".concat(this.props.name):"New dish"),r.a.createElement(w.d,null,r.a.createElement(V.a,{type:"text",label:"Name",value:this.state.name,onChange:this.handleNameChange}),r.a.createElement(V.a,{type:"number",inputMode:"numeric",label:"Cost",invalid:!1,value:this.state.cost,onChange:this.handleCostChange}),r.a.createElement(fe.a,{value:this.state.type,onChange:this.handleTypeChange,placeholder:"",label:"Dish type",options:this.props.dishTypes})),r.a.createElement(w.b,null,r.a.createElement(w.c,{theme:"secondary",action:"close",isDefaultAction:!0},"Cancel"),this.props._id?r.a.createElement(k.Mutation,{mutation:je},function(t){return r.a.createElement(w.c,{action:"accept",onClick:function(){return t({variables:{id:e.props._id}})}},"Delete")}):String(),r.a.createElement(k.Mutation,{mutation:this.props._id?Oe:ge},function(t){return r.a.createElement(w.c,{action:"accept",onClick:function(){t({variables:{id:e.props._id,name:e.state.name,type:e.state.type,cost:e.state.cost}})}},"Save")}))))}}]),t}(a.Component),xe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={device:{},openDialog:!1},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(z.a,{className:"main-elevation",z:24,style:{margin:"1rem"}},r.a.createElement(L.a,null,r.a.createElement(L.c,null,r.a.createElement(L.d,{alignStart:!0},r.a.createElement(L.e,null,this.props.typeName)))),r.a.createElement(f.a,{twoLine:!0},this.props.dishes.map(function(t){return r.a.createElement(b.j,{key:t._id,onClick:function(){return e.setState({device:t,openDialog:!0})},text:t.name,secondaryText:"\u20ac ".concat(t.cost.toFixed(2)),metaIcon:"edit"})})),r.a.createElement(ke,Object.assign({},this.state.device,{open:this.state.openDialog,dishTypes:this.props.dishTypes,onClose:function(){e.setState({openDialog:!1})}})))}}]),t}(a.Component);function Ce(){var e=Object(j.a)(["query dishes {\n                  dishes {\n                    _id,\n                    name,\n                    cost,\n                    type {\n                      _id,\n                      name\n                    }\n                  }\n                }"]);return Ce=function(){return e},e}function De(){var e=Object(j.a)(["query dishTypes {\n              dishTypes {\n                _id,\n                name\n                }\n              }"]);return De=function(){return e},e}var _e=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={openDialog:!1},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"groupBy",value:function(e,t){return e.reduce(function(e,n){return(e[t(n)]=e[t(n)]||[]).push(n),e},{})}},{key:"render",value:function(){var e=this,t=this.props.store.searchText,n=new RegExp(t,"i");return r.a.createElement(k.Query,{query:C()(De()),pollInterval:1e3},function(a){var i=a.data,c=[];return i&&i.dishTypes&&(c=i.dishTypes.map(function(e){return{label:e.name,value:e._id}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(k.Query,{query:C()(Ce()),pollInterval:1e3},function(a){var i=a.loading,s=a.error,o=a.data;o&&o.dishes||(o={dishes:[]});var l=e.groupBy(o.dishes.filter(function(e){return!t||n.test(e.name)||n.test(e.type.name)}),function(e){return e.type.name}),d=[];for(var u in l)d.push(r.a.createElement("div",{key:l[u][0]._id,style:{width:"-webkit-fill-available",maxWidth:"500px",minWidth:"320px"}},r.a.createElement(xe,{typeName:u,dishes:l[u],dishTypes:c})));var m=r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{id:"masonry-layout"},d),r.a.createElement(D.a,{className:"floating-right",icon:"add",onClick:function(){return e.setState({openDialog:!0})}}));return i&&(m=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),m)),s?r.a.createElement("p",null,"Error :("):m}),r.a.createElement(ke,{dishTypes:c,open:e.state.openDialog,onClose:function(){return e.setState({openDialog:!1})}}),r.a.createElement("div",{className:"bottomSpacer"}))})}}]),t}(a.Component),Se=Object(p.b)("store")(Object(p.c)(_e)),Te=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(L.c,null,r.a.createElement(L.d,{alignStart:!0},r.a.createElement(L.e,null,"Global Settings")))),r.a.createElement(f.a,null,r.a.createElement(b.d,{onClick:function(){return e.props.store.setKitchenMode(!e.props.store.kitchenMode)}},r.a.createElement(b.e,{icon:this.props.store.kitchenMode?"radio_button_checked":"radio_button_unchecked"}),r.a.createElement(b.i,null,"Kitchen Mode"))))}}]),t}(a.Component),$e=Object(p.b)("store")(Object(p.c)(Te));function we(){var e=Object(j.a)(["mutation remove($id: ID!){\n removeDishType(_id: $id, ){\n   _id, \n   name\n }\n}"]);return we=function(){return e},e}function Fe(){var e=Object(j.a)(["mutation update($id: ID!, $name: String!){\n updateDishType(_id: $id, name: $name){\n   _id, \n   name\n }\n}"]);return Fe=function(){return e},e}function Ne(){var e=Object(j.a)([" mutation add($name: String!){\n addDishType(name: $name){\n   _id, \n   name\n }\n}"]);return Ne=function(){return e},e}var Ie=C()(Ne()),Pe=C()(Fe()),Me=C()(we()),Ae=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={name:""},n.handleNameChange=n.handleNameChange.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){e.name&&e.name!==t.name&&this.setState({name:e.name})}},{key:"componentDidMount",value:function(){this.props.name&&this.setState({name:this.props.name})}},{key:"toggleDialog",value:function(){var e=this;return function(){e.setState({name:e.props.name,standardDialogOpen:!e.state.standardDialogOpen})}}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value||""})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{open:this.state.standardDialogOpen,onClose:function(t){return e.setState({standardDialogOpen:!1})}},r.a.createElement(w.e,null,this.props._id?"Edit dish type":"New dish type"),r.a.createElement(w.d,null,r.a.createElement(V.a,{type:"text",label:"Name",value:this.state.name||"",onChange:this.handleNameChange})),r.a.createElement(w.b,null,r.a.createElement(w.c,{theme:"secondary",action:"cancel",isDefaultAction:!0},"Cancel"),this.props._id?r.a.createElement(k.Mutation,{mutation:Me},function(t){return r.a.createElement(w.c,{action:"accept",onClick:function(){return t({variables:{id:e.props._id}})}},"Delete")}):String(),r.a.createElement(k.Mutation,{mutation:this.props._id?Pe:Ie},function(t){return r.a.createElement(w.c,{action:"accept",onClick:function(){return t({variables:{id:e.props._id,name:e.state.name}})}},"Save")}))),this.props._id?r.a.createElement(b.d,{onClick:this.toggleDialog()},r.a.createElement(b.i,null,this.props.name),r.a.createElement(b.f,{icon:"edit"})):r.a.createElement(L.b,{icon:"add",onClick:this.toggleDialog()}))}}]),t}(a.Component);function qe(){var e=Object(j.a)(["query dishTypes {\n              dishTypes {\n                _id,\n                name\n                }\n              }"]);return qe=function(){return e},e}var Be=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(L.c,null,r.a.createElement(L.d,{alignStart:!0},r.a.createElement(L.e,null,"Dish types")),r.a.createElement(L.d,{alignEnd:!0},r.a.createElement(Ae,null)))),r.a.createElement(k.Query,{query:C()(qe()),variables:{hasPayed:!1},pollInterval:1e3},function(e){var t=e.loading,n=e.error,a=e.data;a&&a.dishTypes||(a={dishTypes:[]});var i=r.a.createElement(f.a,null,a.dishTypes.map(function(e){return r.a.createElement(Ae,Object.assign({key:e._id},e))}));return t&&(i=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),i)),n?r.a.createElement("p",null,"Error :("):i}))}}]),t}(a.Component),We=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(K.a,null,r.a.createElement(K.b,{span:"12"},r.a.createElement(z.a,{className:"main-elevation",z:24},r.a.createElement($e,null))),r.a.createElement(K.b,{span:"12"},r.a.createElement(z.a,{className:"main-elevation",z:24},r.a.createElement(Be,null))))}}]),t}(a.Component),Re=n(108),Je=n(407);function Qe(){var e=Object(j.a)(["\n            {\n              orders(hasPayed: true) {\n                timestamp\n                dishes {\n                  dish {\n                    name,\n                    cost,\n                    type{\n                      name\n                    } \n                  }\n                }\n              }\n            }"]);return Qe=function(){return e},e}var He=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={menuIsOpen:!1,minOrderTimestamp:new Date("0"),header:"History"},n.setHistoryFilter=n.setHistoryFilter.bind(Object(h.a)(Object(h.a)(n))),n.getMonday=n.getMonday.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"getMonday",value:function(e){var t=(e=new Date(e)).getDay(),n=e.getDate()-t+(0===t?-6:1);return new Date(e.setDate(n))}},{key:"downloadData",value:function(e){var t=new Blob(e.map(function(e){return"".concat(e.timestamp.toISOString(),",").concat(e.name,",").concat(e.type,",").concat(e.cost,"\n")}),{type:"text/plain;charset=utf-8"});de.a.saveAs(t,"Orders.csv",!0)}},{key:"setHistoryFilter",value:function(e){var t=new Date("0"),n="History";1===e.detail.index?(t=this.getMonday(new Date((new Date).toDateString())),n="This weeks History"):2===e.detail.index&&(t=new Date((new Date).toDateString()),n="Todays History"),this.setState({minOrderTimestamp:t,header:n})}},{key:"render",value:function(){var e=this,t=this.props.match.params.id;return r.a.createElement(z.a,{className:"main-elevation",z:24},r.a.createElement(k.Query,{query:C()(Qe())},function(n){var a=n.loading,i=n.error,c=n.data;if(a)return r.a.createElement(R.a,null);if(i)return r.a.createElement("p",null,"Error :(");if(t)return e.fetchData(t,c.dishes);var s=[];return c&&c.orders&&c.orders.forEach(function(t){t.dishes.forEach(function(n){var a=new Date(t.timestamp);a>=e.state.minOrderTimestamp&&s.push({timestamp:a,name:n.dish.name,cost:n.dish.cost.toFixed(2),type:n.dish.type.name})})}),r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(L.c,null,r.a.createElement(L.d,{alignStart:!0},r.a.createElement(L.e,null,e.state.header)),r.a.createElement(L.d,{alignEnd:!0},r.a.createElement(Re.b,null,r.a.createElement(Je.a,{open:e.state.menuIsOpen,onSelect:e.setHistoryFilter,onClose:function(t){return e.setState({menuIsOpen:!1})}},r.a.createElement(Je.b,null,"Everything"),r.a.createElement(Je.b,null,"This Week"),r.a.createElement(Je.b,null,"Today")),r.a.createElement(L.b,{icon:"filter_list",onClick:function(t){return e.setState({menuIsOpen:!e.state.menuIsOpen})}})),r.a.createElement(L.b,{icon:"cloud_download",onClick:function(){return e.downloadData(s)}})))),r.a.createElement(f.a,null,s.map(function(e,t){return r.a.createElement(b.d,{key:t},r.a.createElement(b.i,null,e.name,r.a.createElement(b.h,null," ",e.timestamp.toDateString()," ")),r.a.createElement(b.f,{tag:"span",basename:""},"\u20ac ".concat(e.cost)))})))}))}}]),t}(a.Component);function ze(){var e=Object(j.a)(["mutation remove($id: ID!){\n removeDishExtra(_id: $id, ) {\n   _id, \n   name\n }\n}"]);return ze=function(){return e},e}function Le(){var e=Object(j.a)(["mutation update($id: ID!, $name: String!, $cost: Float!, $type: ID!){\n updateDishExtra(_id: $id, name: $name, cost: $cost, type: $type) {\n   _id, \n   name\n }\n}"]);return Le=function(){return e},e}function Ke(){var e=Object(j.a)([" mutation add($name: String!, $cost: Float!, $type: ID!){\n addDishExtra(name: $name, cost: $cost, type: $type) {\n   _id, \n   name\n }\n}"]);return Ke=function(){return e},e}var Ue=C()(Ke()),Ge=C()(Le()),Ye=C()(ze()),Ve=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={name:"",cost:0,type:""},n.handleNameChange=n.handleNameChange.bind(Object(h.a)(Object(h.a)(n))),n.handleCostChange=n.handleCostChange.bind(Object(h.a)(Object(h.a)(n))),n.handleTypeChange=n.handleTypeChange.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){!e._id||e.name===t.name&&e.cost===t.cost&&e.type._id===t.type._id||this.setState({name:e.name,cost:e.cost.toFixed(2),type:e.type._id})}},{key:"componentDidMount",value:function(){this.props._id&&this.setState({name:this.props.name,cost:this.props.cost.toFixed(2),type:this.props.type._id})}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value||""})}},{key:"handleCostChange",value:function(e){this.setState({cost:e.target.value})}},{key:"handleTypeChange",value:function(e){this.setState({type:e.target.value})}},{key:"toggleDialog",value:function(){this.setState({name:this.props.name||"",cost:this.props.cost||0,type:this.props.type?this.props.type._id:"",standardDialogOpen:!this.state.standardDialogOpen})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{open:this.props.open,onClose:function(){e.toggleDialog(),e.props.onClose()}},r.a.createElement(w.e,null,this.props._id?"Edit ".concat(this.props.name):"New extra for dish type"),r.a.createElement(w.d,null,r.a.createElement(V.a,{type:"text",label:"Name",value:this.state.name,onChange:this.handleNameChange}),r.a.createElement(V.a,{type:"number",inputMode:"numeric",label:"Cost",invalid:!1,value:this.state.cost,onChange:this.handleCostChange}),r.a.createElement(fe.a,{value:this.state.type,onChange:this.handleTypeChange,placeholder:"",label:"Dish type",options:this.props.dishTypes})),r.a.createElement(w.b,null,r.a.createElement(w.c,{theme:"secondary",action:"cloase",isDefaultAction:!0},"Cancel"),this.props._id?r.a.createElement(k.Mutation,{mutation:Ye},function(t){return r.a.createElement(w.c,{action:"accept",onClick:function(){return t({variables:{id:e.props._id}})}},"Delete")}):String(),r.a.createElement(k.Mutation,{mutation:this.props._id?Ge:Ue},function(t){return r.a.createElement(w.c,{action:"accept",onClick:function(){t({variables:{id:e.props._id,name:e.state.name,type:e.state.type,cost:e.state.cost}})}},"Save")}))))}}]),t}(a.Component),Xe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={extra:{},openDialog:!1},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(z.a,{className:"main-elevation",z:24,style:{margin:"1rem"}},r.a.createElement(L.a,null,r.a.createElement(L.c,null,r.a.createElement(L.d,{alignStart:!0},r.a.createElement(L.e,null,this.props.typeName)))),r.a.createElement(f.a,{twoLine:!0},this.props.extras.map(function(t){return r.a.createElement(b.j,{key:t._id,onClick:function(){return e.setState({extra:t,openDialog:!0})},text:t.name,secondaryText:"\u20ac ".concat(t.cost.toFixed(2)),metaIcon:"edit"})})),r.a.createElement(Ve,Object.assign({},this.state.extra,{open:this.state.openDialog,dishTypes:this.props.dishTypes,onClose:function(){e.setState({openDialog:!1})}})))}}]),t}(a.Component);function Ze(){var e=Object(j.a)(["{\n                      dishExtras {\n                        _id, \n                        name, \n                        cost, \n                        type {\n                          _id,\n                          name\n                        }\n                      }\n                    }\n                "]);return Ze=function(){return e},e}function et(){var e=Object(j.a)(["query dishTypes {\n              dishTypes {\n                _id,\n                name\n                }\n              }"]);return et=function(){return e},e}var tt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={openDialog:!1},n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"groupBy",value:function(e,t){return e.reduce(function(e,n){return(e[t(n)]=e[t(n)]||[]).push(n),e},{})}},{key:"render",value:function(){var e=this,t=this.props.store.searchText,n=new RegExp(t,"i");return r.a.createElement(k.Query,{query:C()(et()),pollInterval:5e3},function(a){var i=a.data,c=[];return i&&i.dishTypes&&(c=i.dishTypes.map(function(e){return{label:e.name,value:e._id}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(k.Query,{query:C()(Ze()),pollInterval:1e3},function(a){var i=a.loading,s=a.error,o=a.data;o&&o.dishExtras||(o={dishExtras:[]});var l=e.groupBy(o.dishExtras.filter(function(e){return!t||n.test(e.name)||n.test(e.type.name)}),function(e){return e.type.name}),d=[];for(var u in l)d.push(r.a.createElement("div",{key:l[u][0]._id,style:{width:"-webkit-fill-available",maxWidth:"500px",minWidth:"320px"}},r.a.createElement(Xe,{typeName:u,extras:l[u],dishTypes:c})));var m=r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{id:"masonry-layout"},d),r.a.createElement(D.a,{className:"floating-right",icon:"add",onClick:function(){return e.setState({openDialog:!0})}}));return i&&(m=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),m)),s?r.a.createElement("p",null,"Error :("):m}),r.a.createElement(Ve,{dishTypes:c,open:e.state.openDialog,onClose:function(){return e.setState({openDialog:!1})}}))})}}]),t}(a.Component),nt=Object(p.b)("store")(Object(p.c)(tt)),at=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement("div",{className:"mdc-top-app-bar--fixed-adjust"},r.a.createElement(m.a,{exact:!0,path:"/",component:H}),r.a.createElement(m.a,{path:"/orders",component:H}),r.a.createElement(m.a,{path:"/orderDetails/:id?",component:se}),r.a.createElement(m.a,{path:"/payOrder/:id",component:ye}),r.a.createElement(m.a,{path:"/dishes",component:Se}),r.a.createElement(m.a,{path:"/settings",component:We}),r.a.createElement(m.a,{path:"/orderHistory",component:He}),r.a.createElement(m.a,{path:"/dishExtra",component:nt})))}}]),t}(a.Component),rt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function it(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ct=n(406),st=n(207),ot=n(28),lt=function(){function e(){Object(s.a)(this,e),this.searchText="",this.kitchenMode="true"===localStorage.getItem("Bit.KitchenMode")||!1}return Object(o.a)(e,[{key:"setKitchenMode",value:function(e){this.kitchenMode=e,localStorage.setItem("Bit.KitchenMode",e)}}]),e}();Object(ot.f)(lt,{searchText:ot.k,kitchenMode:ot.k});var dt=new lt,ut=n(208),mt=new st.a,ht={store:dt};c.a.render(r.a.createElement(ut.a,{options:{primary:"#795548",secondary:"#486c79",background:"#fff"}},r.a.createElement(k.ApolloProvider,{client:mt},r.a.createElement(p.a,ht,r.a.createElement(ct.a,null,r.a.createElement(at,null))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");rt?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):it(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):it(t,e)})}}()}},[[214,1,2]]]);
//# sourceMappingURL=main.b1dbfbfb.chunk.js.map