(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{216:function(e,t,n){e.exports=n(379)},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},351:function(e,t,n){},352:function(e,t,n){},379:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(48),c=n.n(i),l=(n(221),n(3)),s=n(4),o=n(8),d=n(7),u=n(9),m=n(407),h=(n(222),n(2)),p=n(25),E=n(40),y=n(401),f=n(403),b=n(77),v=n(402),g=(n(223),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={searching:!1,searchText:"",modalOpen:!1},n.toggleSearch=n.toggleSearch.bind(Object(h.a)(Object(h.a)(n))),n.handleSearchText=n.handleSearchText.bind(Object(h.a)(Object(h.a)(n))),n.onClick=n.onClick.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"onClick",value:function(){this.setState({modalOpen:!this.state.modalOpen})}},{key:"handleSearchText",value:function(){var e=this;return function(t){e.setState({searchText:t.target.value}),e.props.store.searchText=t.target.value}}},{key:"toggleSearch",value:function(){this.setState({searching:!this.state.searching,searchText:""}),this.props.store.searchText=""}},{key:"render",value:function(){var e=this,t=this.toggleSearch,n=this.onClick;return this.state.searching?r.a.createElement(E.a,{dense:!0,fixed:!0},r.a.createElement(E.d,null,r.a.createElement(E.e,{className:"search-field",alignStart:!0},r.a.createElement("input",{placeholder:"Search",autoFocus:!0,value:this.state.searchText,onChange:this.handleSearchText()}),r.a.createElement(E.b,{"aria-label":"Search",icon:"clear",alt:"Search this Page",onClick:t})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{dense:!0,fixed:!0,className:"no-print"},r.a.createElement(E.d,null,r.a.createElement(E.e,{alignStart:!0},r.a.createElement(E.c,{icon:"menu",onClick:n}),r.a.createElement(E.f,null,this.props.store.kitchenMode?"BIt's Kitchen":"BIt")),r.a.createElement(E.e,{alignEnd:!0},r.a.createElement(E.b,{"aria-label":"Search",icon:"search",alt:"Search this Page",onClick:t})))),r.a.createElement(b.a,{modal:!0,open:this.state.modalOpen,onClose:function(){return e.setState({modalOpen:!1})}},r.a.createElement(b.c,null,r.a.createElement(b.d,null,"Menu")),r.a.createElement(b.b,null,r.a.createElement(y.a,null,r.a.createElement(v.a,{to:"/orders"},r.a.createElement(f.d,{onClick:n},r.a.createElement(f.e,{icon:"shopping_cart"}),r.a.createElement(f.i,null,"Orders"))),r.a.createElement(v.a,{to:"/orderHistory"},r.a.createElement(f.d,{onClick:n},r.a.createElement(f.e,{icon:"history"}),r.a.createElement(f.i,null,"History"))),r.a.createElement(v.a,{to:"/dishes"},r.a.createElement(f.d,{onClick:n},r.a.createElement(f.e,{icon:"shopping_basket"}),r.a.createElement(f.i,null,"Dishes"))),r.a.createElement(v.a,{to:"/dishExtra"},r.a.createElement(f.d,{onClick:n},r.a.createElement(f.e,{icon:"loyalty"}),r.a.createElement(f.i,null,"Extras"))),r.a.createElement(v.a,{to:"/settings"},r.a.createElement(f.d,{onClick:n},r.a.createElement(f.e,{icon:"settings"}),r.a.createElement(f.i,null,"Settings")))))))}}]),t}(a.Component)),O=Object(p.b)("store")(Object(p.c)(g)),j=n(12),k=n(14),x=n(10),C=n.n(x),D=n(69),S=n(68),_=n.n(S),T=n(50),$=n(106),w=n(13);function N(){var e=Object(j.a)(["\n  mutation join($id: ID!, $ids: [ID]!){\n    joinOrders(_id: $id, orderIds: $ids){\n      _id,\n      name,\n      table,\n      dishes {\n        dish {\n          _id,\n          name,\n          cost\n        },\n        made,\n        hasPayed,\n        extras {\n          _id,\n          name\n        }\n      }\n    }\n  }"]);return N=function(){return e},e}var F=C()(N()),P=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(d.a)(t).call(this))).state={people:[]},e.handleJoin=e.handleJoin.bind(Object(h.a)(Object(h.a)(e))),e.joinOrders=e.joinOrders.bind(Object(h.a)(Object(h.a)(e))),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){var n=this;JSON.stringify(e)!==JSON.stringify(t)&&this.setState({people:e.data.map(function(e,t){return{id:e._id,name:e.name,selected:n.state.people.length>t&&n.state.people[t].selected}})})}},{key:"componentDidMount",value:function(){this.setState({people:this.props.data.map(function(e){return{id:e._id,name:e.name,selected:!1}})})}},{key:"handleJoin",value:function(e){var t=this;return function(){var n=t.state.people;n[e].selected=!n[e].selected,t.setState({people:n})}}},{key:"joinOrders",value:function(e){var t=this;return function(){var n=t.state.people.filter(function(e){return e.selected}).map(function(e){return e.id});e({variables:{id:t.props._id,ids:n}})}}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.e,null,"Everyone at table ",this.props.table),r.a.createElement(w.d,null,r.a.createElement(y.a,null,this.state.people.map(function(t,n){return r.a.createElement(f.d,{key:t.id,onClick:e.handleJoin(n)},r.a.createElement(f.e,{icon:t.selected?"radio_button_checked":"radio_button_unchecked"}),r.a.createElement(f.i,null,t.name))}))),r.a.createElement(w.b,null,r.a.createElement(w.c,{action:"close"},"Cancel"),r.a.createElement(k.Mutation,{mutation:F},function(t){return r.a.createElement(w.c,{action:"accept",onClick:e.joinOrders(t),isDefaultAction:!0},"Join")})))}}]),t}(a.Component);function I(){var e=Object(j.a)(["\n                query order($table: Int) {\n                  orders(table: $table, hasPayed: false) {\n                    _id,\n                    name,\n                  }\n                }"]);return I=function(){return e},e}var M=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={standardDialogOpen:!1},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.Query,{query:C()(I()),variables:{table:this.props.table},pollInterval:5e3},function(t){var n=t.loading,a=t.error,i=t.data;return!n&&!a&&i&&i.orders?r.a.createElement(w.a,{open:e.state.standardDialogOpen,onClose:function(t){return e.setState({standardDialogOpen:!1})}},r.a.createElement(P,Object.assign({data:i.orders.filter(function(t){return t._id!==e.props._id})},e.props))):r.a.createElement(w.f,{title:"Everyone at table ".concat(e.props.table),body:"Fetching Data",open:e.state.standardDialogOpen,onClose:function(t){return e.setState({standardDialogOpen:!1})}})}),r.a.createElement(T.b,{onClick:function(t){return e.setState({standardDialogOpen:!0})}},"Join"))}}]),t}(a.Component);n(351);function A(){var e=Object(j.a)(["\n  mutation updateOrder($id: ID!, $dishes: [orderDishMutation]!){\n    updateOrder(_id: $id, dishes: $dishes){\n      _id,\n      name,\n      table,\n      notes,\n      dishes {\n        dish {\n          _id,\n          name,\n          cost\n        },\n        made,\n        delivered,\n        hasPayed\n      }\n    }\n  }"]);return A=function(){return e},e}var q=C()(A()),B=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(d.a)(t).call(this))).handleDishClick=e.handleDishClick.bind(Object(h.a)(Object(h.a)(e))),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleDishClick",value:function(e,t,n){var a=this;return function(){var r=a.props.dishes.map(function(e){return{id:e.dish._id,made:e.made,hasPayed:e.hasPayed,delivered:e.delivered,extras:e.extras.map(function(e){return e._id})}});if(a.props.store.kitchenMode){if(r[t].delivered)return;r[t].made=!r[t].made}else{if(!r[t].made)return;r[t].delivered=!r[t].delivered}n({variables:{id:e,dishes:r}})}}},{key:"render",value:function(){var e=this,t=this.props;return r.a.createElement(T.a,null,r.a.createElement(v.a,{to:"/orderDetails/".concat(t._id)},r.a.createElement(T.g,null,r.a.createElement("div",{style:{padding:"0 1rem 1rem 1rem"}},r.a.createElement($.a,{use:"headline6",tag:"h2",style:{}},r.a.createElement("span",{className:"highlight"},t.table)," ",t.name)))),r.a.createElement("div",{style:{padding:"0 1rem 1rem 1rem"}},r.a.createElement(k.Mutation,{mutation:q},function(n){return r.a.createElement($.a,{use:"body1",tag:"div",theme:"textSecondaryOnBackground"},r.a.createElement(y.a,{className:"extendSecondaryText"},t.dishes.map(function(a,i){var c=e.props.store.kitchenMode&&a.delivered,l=!e.props.store.kitchenMode&&!a.made;return r.a.createElement(f.j,{key:i,className:a.delivered?"done":"",graphic:a.made?a.delivered?"done_all":"done":"radio_button_unchecked",onClick:e.handleDishClick(t._id,i,n),disabled:c||l,text:a.dish.name,secondaryText:a.extras.map(function(e){return e.name}).join(", "),ripple:a.made})})))})),r.a.createElement($.a,{use:"subtitle1",tag:"div",style:{padding:"0.5rem 1rem"},theme:"textSecondaryOnBackground"},this.props.notes),r.a.createElement(T.f,null,r.a.createElement(T.c,null,r.a.createElement(M,this.props)),r.a.createElement(T.e,null,r.a.createElement(v.a,{to:"/payOrder/".concat(t._id)},r.a.createElement(T.d,{icon:"credit_card"})))))}}]),t}(a.Component),W=Object(p.b)("store")(Object(p.c)(B)),R=n(32);function Q(){var e=Object(j.a)(["query order($hasPayed: Boolean) {\n              orders(hasPayed: $hasPayed) {\n                _id,\n                name,\n                table,\n                notes,\n                dishes {\n                  dish {\n                    _id,\n                    name,\n                    cost,\n                    type {\n                      _id,\n                      name\n                    }\n                  },\n                  made,\n                  delivered,\n                  hasPayed,\n                  extras {\n                    _id, \n                    name\n                  }\n                }\n              }\n            }"]);return Q=function(){return e},e}var H=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.store.searchText,n=new RegExp(t,"i");return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.Query,{query:C()(Q()),variables:{hasPayed:!1},pollInterval:500},function(a){var i=a.loading,c=a.error,l=a.data;l&&l.orders||(l={orders:[]});var s=r.a.createElement(_.a,{id:"masonry-layout"},l.orders.filter(function(a){return(!t||a.table.toString()===t||n.test(a.name)||a.dishes.some(function(e){return n.test(e.dish.type.name)}))&&(!e.props.store.kitchenMode||a.dishes.some(function(e){return!e.made}))}).map(function(t,n){return r.a.createElement("div",{key:n,style:{width:"-webkit-fill-available",maxWidth:"500px",minWidth:"320px"}},r.a.createElement(W,Object.assign({key:t._id},t,e.props)))}));return i&&(s=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),s)),c?(console.warn(c),r.a.createElement("p",null,"Error :(")):s}),r.a.createElement(v.a,{to:"/orderDetails"},r.a.createElement(D.a,{className:"floating-right",icon:"add"})),r.a.createElement("div",{className:"bottomSpacer"}))}}]),t}(a.Component),J=Object(p.b)("store")(Object(p.c)(H)),L=n(38),U=n(6),z=n(39),K=n(405),Z=n(406),G=n(70),V=n(34),X=n(43),Y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(d.a)(t).call(this,e))).onDelete=function(){n.setState({selectedExtras:[]}),n.props.onDelete()},n.onCancel=function(){n.setState({selectedExtras:[]}),n.props.onClose()},n.onSave=function(){n.props.onSave(n.state.selectedExtras.map(function(e){return Object.create(e)})),n.setState({selectedExtras:[]})},n.addExtra=function(e){var t=n.state.selectedExtras;n.setState({selectedExtras:[e].concat(t)})},n.state={selectedExtras:[]},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){JSON.stringify(e.selectedExtras)!==JSON.stringify(t.selectedExtras)&&this.setState({selectedExtras:e.selectedExtras})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dish,a=t.extras,i=a?"Edit ".concat(n?n.name:"dish"," extras"):"Confirm ".concat(n?n.name:"dish"," Deletion");return r.a.createElement(w.a,{open:this.props.open,onClose:this.props.onClose},r.a.createElement(w.e,null,i),a?r.a.createElement(w.d,null,r.a.createElement(G.b,null,a.sort(function(e,t){return e.name<t.name?-1:1}).map(function(t){return r.a.createElement(G.a,{key:t._id,label:t.name,onClick:function(){return e.addExtra(t)}})})),r.a.createElement(y.a,null,this.state.selectedExtras.map(function(t,n){return r.a.createElement(f.j,{key:n,graphic:"close",text:t.name,onClick:function(){e.state.selectedExtras.splice(n,1),e.setState({selectedExtras:e.state.selectedExtras})}})}))):r.a.createElement(r.a.Fragment,null),r.a.createElement(w.b,null,r.a.createElement(w.c,{theme:"secondary",action:"close",onClick:this.onDelete},"Delete"),r.a.createElement(w.c,{theme:"primary",action:"close",isDefaultAction:!0,onClick:this.onCancel},"Cancel"),a?r.a.createElement(w.c,{theme:"primary",action:"accept",onClick:this.onSave},"Save"):r.a.createElement(r.a.Fragment,null)))}}]),t}(a.Component);n(352);function ee(){var e=Object(j.a)(["\n  mutation updateOrder($id: ID!, $name: String, $table: Int, $notes: String, $dishes: [orderDishMutation]){\n    updateOrder(_id: $id, table: $table, name: $name, dishes: $dishes, notes: $notes ){\n      _id, \n      name,\n      table,\n      notes\n    }\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(j.a)(["\n  mutation addOrder($name: String, $table: Int!, $notes: String, $dishes: [orderDishMutation]!){\n    addOrder(table: $table, name: $name, dishes: $dishes, notes: $notes){\n      _id, \n      name,\n      table,\n      notes\n    }\n  }\n"]);return te=function(){return e},e}var ne=C()(te()),ae=C()(ee()),re=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(d.a)(t).call(this))).state={id:"",name:"",table:0,notes:"",dishes:[],activeTabIndex:0,dishTypes:{},extras:{},selectedChip:{}},e.addDish=e.addDish.bind(Object(h.a)(Object(h.a)(e))),e.removeDish=e.removeDish.bind(Object(h.a)(Object(h.a)(e))),e.changeTextField=e.changeTextField.bind(Object(h.a)(Object(h.a)(e))),e.selectDish=e.selectDish.bind(Object(h.a)(Object(h.a)(e))),e.saveExtras=e.saveExtras.bind(Object(h.a)(Object(h.a)(e))),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.order&&this.setState({id:this.props.order._id,name:this.props.order.name,table:this.props.order.table,notes:this.props.order.notes,dishes:this.props.order.dishes.map(function(e){return{dish:{id:e.dish._id,name:e.dish.name,typeName:e.dish.type.name},made:e.made,hasPayed:e.hasPayed,extras:e.extras,delivered:e.delivered}})});var e=this.state.dishTypes;this.props.dishes.forEach(function(t){e[t.type.name]?e[t.type.name].push(t):e[t.type.name]=[t]});var t=this.state.extras;this.props.extras.forEach(function(e){t[e.type.name]?t[e.type.name].push(e):t[e.type.name]=[e]}),this.setState({dishTypes:e,extras:t})}},{key:"addDish",value:function(e,t,n){var a=[{dish:{id:e,name:t,typeName:n},made:!1,hasPayed:!1}].concat(this.state.dishes);this.setState({dishes:a})}},{key:"removeDish",value:function(){var e=this.state.selectedDishId,t=this.state.dishes;t.length<e||t[e].hasPayed||t[e].made||(1===t.length?t=[]:t.splice(e,1),this.setState({dishes:t}))}},{key:"changeTextField",value:function(e){var t=this;return function(n){var a={};a[e]=n.target.value,t.setState(a)}}},{key:"selectDish",value:function(e){var t=this.state.dishes;if(t&&!(t.length<e)){var n=t[e].dish;n.hasPayed||n.made||this.setState({openDialog:!0,selectedDish:n,selectedDishId:e,selectableExtras:this.state.extras[t[e].dish.typeName],dishExtras:t[e].extras})}}},{key:"saveExtras",value:function(e){var t=this.state.dishes;t[this.state.selectedDishId].extras=e,this.setState({dishes:t})}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.dishTypes).sort(function(e,t){return e<t?-1:1}),n=this.state,a=this.props,i=this.selectDish;return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a,{className:"order-details"},r.a.createElement(z.b,{span:"12"},0===t.length?String():r.a.createElement(K.a,{activeTabIndex:n.activeTabIndex,onActivate:function(t){e.setState({activeTabIndex:t.detail.index})}},t.map(function(e,t){return r.a.createElement(Z.a,{key:t},e)})),r.a.createElement(G.b,{choice:!0},(n.dishTypes[t[n.activeTabIndex]]||[]).sort(function(e,t){return e.name<t.name?-1:1}).map(function(a,i){return r.a.createElement(G.a,{key:i,onClick:function(r){return e.addDish(a._id,a.name,t[n.activeTabIndex])},label:a.name,checkmark:!0,selected:n.dishes.some(function(e){return e.dish.id===a._id})})})))),r.a.createElement(z.a,{className:"order-details"},r.a.createElement(z.b,{span:"6"},r.a.createElement(y.a,{className:"extendSecondaryText"},n.dishes.map(function(e,t){return r.a.createElement(f.j,{onClick:function(){e.hasPayed||e.made||e.delivered||i(t)},key:t,text:e.dish.name,secondaryText:(e.extras||[]).map(function(e){return e.name}).join(", "),graphic:e.hasPayed?"euro_symbol":e.delivered?"done_all":e.made?"done":"remove",ripple:!1,activated:!1,disabled:e.hasPayed||e.made||e.delivered})}))),r.a.createElement(z.b,{span:"6"},r.a.createElement(V.a,{icon:"event_seat",label:"Table",type:"number",min:"0",inputMode:"numeric",pattern:"\\d*",value:n.table,onChange:this.changeTextField("table")}),r.a.createElement(V.a,{icon:"account_circle",label:"Name",value:n.name,onChange:this.changeTextField("name")}),r.a.createElement(V.a,{textarea:!0,fullwidth:!0,label:"Notes",type:"number",value:n.notes,onChange:this.changeTextField("notes")}))),r.a.createElement(k.Mutation,{mutation:a.id?ae:ne},function(e,t){var i=t.data,c=t.loading,l=t.error,s=r.a.createElement(X.a,{onClick:function(){return e({variables:{id:n.id,table:n.table,name:n.name,notes:n.notes,dishes:n.dishes.map(function(e){return{id:e.dish.id,made:e.made,hasPayed:e.hasPayed,delivered:e.delivered,extras:(e.extras||[]).map(function(e){return e._id})}}).filter(function(e){return e&&e.id})}})},theme:"secondary"},"Save");return c&&(s=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),s)),l&&console.error(l),i&&a.history.goBack(),s}),r.a.createElement(Y,{open:this.state.openDialog,onClose:function(){return e.setState({openDialog:!1})},dish:this.state.selectedDish,onDelete:this.removeDish,onSave:this.saveExtras,extras:this.state.selectableExtras,selectedExtras:this.state.dishExtras}))}}]),t}(a.Component);function ie(){var e=Object(j.a)(["\n            {\n              dishes {\n                _id,\n                name,\n                type {\n                  _id,\n                  name\n                }\n              },\n              dishExtras {\n                _id,\n                name,\n                type {\n                  _id,\n                  name\n                }\n              }\n            }"]);return ie=function(){return e},e}function ce(){var e=Object(j.a)(["\n        query order($id: ID) {\n          orders(_id: $id) {\n            _id,\n            name,\n            table,\n            notes,\n            dishes {\n              dish {\n                _id,\n                name,\n                type {\n                  _id,\n                  name\n                }\n              }, \n              made,\n              hasPayed,\n              delivered,\n              extras {\n                _id,\n                name,\n                type {\n                  _id, \n                  name\n                }\n              }\n            }\n          }\n        }"]);return ce=function(){return e},e}var le=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"fetchData",value:function(e,t,n){var a=this;return r.a.createElement(k.Query,{query:C()(ce()),variables:{id:e}},function(i){var c=i.loading,l=i.error,s=i.data;return c?r.a.createElement(R.a,null):l?(console.error(l),r.a.createElement("p",null,"Error :( ")):r.a.createElement(re,{order:s.orders[0],dishes:t,extras:n,id:e,history:a.props.history})})}},{key:"render",value:function(){var e=this,t=this.props.match.params.id;return r.a.createElement(L.a,{className:"main-elevation",z:24},r.a.createElement(U.a,null,r.a.createElement(U.c,null,r.a.createElement(U.d,{alignStart:!0},r.a.createElement(U.e,null,"Order Details")),r.a.createElement(U.d,{alignEnd:!0},r.a.createElement(U.b,{icon:"clear",onClick:function(){return e.props.history.goBack()}})))),r.a.createElement(k.Query,{query:C()(ie())},function(n){var a=n.loading,i=n.error,c=n.data;return a?r.a.createElement(R.a,null):i?r.a.createElement("p",null,"Error :( ",r.a.createElement("br",null),r.a.createElement("br",null),i.graphQLErrors.map(function(e,t){var n=e.message;return r.a.createElement("span",{key:t},n)})):t?e.fetchData(t,c.dishes,c.dishExtras):r.a.createElement(re,{dishes:c.dishes,extras:c.dishExtras,history:e.props.history})}))}}]),t}(a.Component),se=n(210);function oe(){var e=Object(j.a)(["{ company {\n                    name,\n                    street, \n                    postalCode,\n                    city, \n                    website,\n                    taxId\n                  }\n                }"]);return oe=function(){return e},e}var de=function(e,t){var n=e.reduce(function(e,t){return e+(t.extras||[]).reduce(function(e,t){return e+t.cost},0)+t.dish.cost},0).toFixed(2);return r.a.createElement(k.Query,{query:C()(oe())},function(a){var i=a.loading,c=a.error,l=a.data;if(!i&&!c&&l){var s=l.company,o=s.name,d=s.street,u=s.postalCode,m=s.city,h=s.website,p=s.taxId,E=(new Date).toLocaleString("de").split(",");return r.a.createElement("div",{className:"receipt"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,o),r.a.createElement("p",null,d),r.a.createElement("p",null,u," ",m),r.a.createElement("p",null,h),r.a.createElement("p",null,p)),r.a.createElement("table",{className:"receipt",align:"center"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Datum: ",E[0]),r.a.createElement("td",null,"Zeit: ",E[1])),r.a.createElement("tr",null,r.a.createElement("td",{className:"bill-split"}),r.a.createElement("td",{className:"bill-split"})),r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"EUR")),e.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.dish.name),r.a.createElement("td",null,(e.dish.cost+(e.extras||[]).reduce(function(e,t){return e+t.cost},0)).toFixed(2)))}),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",{className:"bill-split"}),r.a.createElement("td",{className:"bill-split"})),r.a.createElement("tr",null,r.a.createElement("td",{className:"bill-payment"},"ANZAHL DER ARTIKEL ",e.length)),r.a.createElement("tr",null,r.a.createElement("td",null,"davon MwSt. (19%)"),r.a.createElement("td",null,(n-n/1.19).toFixed(2))),r.a.createElement("tr",null,r.a.createElement("td",{className:"bill-payment"},r.a.createElement("h5",null,"TOTAL")),r.a.createElement("td",{className:"bill-payment"},n)))),r.a.createElement("table",{className:"receipt",align:"center"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Bon: ",t)))))}return r.a.createElement(r.a.Fragment,null)})};function ue(){var e=Object(j.a)(["\n  mutation pay($id: ID!, $dishes: [orderDishMutation]!, $amountPayed: Float!){\n    updateOrder(_id: $id, dishes: $dishes, amountPayed: $amountPayed){\n      _id,\n      dishes {\n        hasPayed\n      }\n    }\n  }"]);return ue=function(){return e},e}var me=C()(ue()),he=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(d.a)(t).call(this))).state={dishes:[],paying:0,selectAll:!0},e.changePayment=e.changePayment.bind(Object(h.a)(Object(h.a)(e))),e.toggleSelection=e.toggleSelection.bind(Object(h.a)(Object(h.a)(e))),e.toggleAll=e.toggleAll.bind(Object(h.a)(Object(h.a)(e))),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"toggleSelection",value:function(e){var t=this;return function(){var n=t.state.dishes;n[e].paying=!n[e].paying,t.setState({dishes:n,selectAll:n.every(function(e){return e.paying})})}}},{key:"toggleAll",value:function(){var e=!this.state.selectAll,t=this.state.dishes,n=!0,a=!1,r=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){i.value.paying=e}}catch(l){a=!0,r=l}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}this.setState({dishes:t,selectAll:e})}},{key:"changePayment",value:function(){var e=this;return function(t){isNaN(t.target.value)||e.setState({paying:t.target.value})}}},{key:"componentDidMount",value:function(){this.setState({dishes:this.props.dishesToPay})}},{key:"render",value:function(){var e=this,t=this.props.id,n=this.state,a=n.paying,i=n.dishes,c=n.selectAll,l=0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:"no-print"},r.a.createElement(f.d,{key:-1,onClick:this.toggleAll},r.a.createElement(f.e,{icon:c?"radio_button_checked":"radio_button_unchecked"}),r.a.createElement(f.i,null,"Everything")),r.a.createElement(f.a,null),i.map(function(t,n){var a=t.extras.reduce(function(e,t){return e+t.cost},0);return t.paying&&(l=t.dish.cost+l+a),r.a.createElement(f.d,{key:n,onClick:e.toggleSelection(n)},r.a.createElement(f.e,{icon:t.paying?"radio_button_checked":"radio_button_unchecked"}),r.a.createElement(f.i,null,r.a.createElement(f.g,null,t.dish.name),r.a.createElement(f.h,null,t.extras.map(function(e){return e.name}).join(", "))),r.a.createElement(f.f,{tag:"span",basename:""},(t.dish.cost+a).toFixed(2)))})),r.a.createElement(z.a,{className:"no-print"},r.a.createElement(z.b,{span:"12"},r.a.createElement(V.a,{icon:"euro_symbol",disabled:!0,label:"Total",value:l.toFixed(2)}),r.a.createElement(V.a,{icon:"euro_symbol",label:"Difference",value:(a-l).toFixed(2),onChange:function(){},invalid:a-l<0}),r.a.createElement(V.a,{icon:"euro_symbol",label:"Paying",type:"number",inputMode:"numeric",pattern:"\\d*.*,*\\d*",value:a,invalid:!a,onChange:this.changePayment()}))),r.a.createElement("div",{className:"no-print"},r.a.createElement(k.Mutation,{mutation:me},function(t,n){var c=n.data,l=n.loading,s=n.error,o=r.a.createElement(X.a,{onClick:function(){t({variables:{id:e.props.id,dishes:i.map(function(e){return{id:e.dish._id,made:e.made,hasPayed:e.paying,delivered:e.delivered,extras:e.extras.map(function(e){return e._id})}}).concat(e.props.payedDishes.map(function(e){return{id:e.dish._id,made:e.made,hasPayed:e.hasPayed,delivered:e.delivered,extras:e.extras.map(function(e){return e._id})}})),amountPayed:a}})},disabled:!a}," Pay ");return l&&(o=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),o)),s&&console.error(s),c&&c.updateOrder&&c.updateOrder.dishes.reduce(function(e,t){return e&&t.hasPayed},!0)&&e.props.history.goBack(),o}),r.a.createElement(X.a,{theme:"secondary",onClick:window.print},r.a.createElement(X.b,{icon:"receipt"}),"Print")),r.a.createElement("div",{className:"print"},de(i.filter(function(e){return e.paying}),t)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 0===e.dishesToPay.length?null:e.dishesToPay.length===t.dishes.length?null:{dishes:e.dishesToPay.map(function(e){return Object(se.a)({},e,{paying:!1})})}}}]),t}(a.Component);function pe(){var e=Object(j.a)(["\n                query order($id: ID) {\n                  orders(_id: $id) {\n                    _id,\n                    name,\n                    table,\n                    dishes {\n                      dish {\n                        _id,\n                        name,\n                        cost\n                      },\n                      hasPayed,\n                      made,\n                      delivered,\n                      extras {\n                        _id,\n                        cost,\n                        name\n                      }\n                    }\n                  }\n                }"]);return pe=function(){return e},e}var Ee=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.match.params.id;return r.a.createElement(L.a,{className:"main-elevation",z:24},r.a.createElement(U.a,{className:"no-print"},r.a.createElement(U.c,null,r.a.createElement(U.d,{alignStart:!0},r.a.createElement(U.e,null,"Pay Order")),r.a.createElement(U.d,{alignEnd:!0},r.a.createElement(U.b,{icon:"clear",onClick:function(){return e.props.history.goBack()}})))),r.a.createElement(k.Query,{query:C()(pe()),variables:{id:t},pollInterval:500},function(n){var a=n.loading,i=n.error,c=n.data;return a?r.a.createElement("p",null,"Loading..."):i?r.a.createElement("p",null,"Error :("):1!==c.orders.length?String():r.a.createElement(he,{history:e.props.history,id:t,payedDishes:c.orders[0].dishes.filter(function(e){return e.hasPayed}),dishesToPay:c.orders[0].dishes.filter(function(e){return!e.hasPayed}).map(function(e){return{dish:e.dish,made:e.made,paying:!0,delivered:e.delivered,extras:e.extras}})})}))}}]),t}(a.Component),ye=n(102);function fe(){var e=Object(j.a)(["mutation remove($id: ID!){\n removeDish(_id: $id, ){\n   _id, \n   name\n }\n}"]);return fe=function(){return e},e}function be(){var e=Object(j.a)(["mutation update($id: ID!, $name: String, $cost: Float, $type: ID){\n updateDish(_id: $id, name: $name, cost: $cost, type: $type){\n   _id, \n   name\n }\n}"]);return be=function(){return e},e}function ve(){var e=Object(j.a)([" mutation add($name: String!, $cost: Float!, $type: ID!){\n addDish(name: $name, cost: $cost, type: $type){\n   _id, \n   name\n }\n}"]);return ve=function(){return e},e}var ge=C()(ve()),Oe=C()(be()),je=C()(fe()),ke=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={name:"",cost:0,type:""},n.handleNameChange=n.handleNameChange.bind(Object(h.a)(Object(h.a)(n))),n.handleCostChange=n.handleCostChange.bind(Object(h.a)(Object(h.a)(n))),n.handleTypeChange=n.handleTypeChange.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){!e._id||e.name===t.name&&e.cost===t.cost&&e.type._id===t.type._id||this.setState({name:e.name,cost:e.cost.toFixed(2),type:e.type._id})}},{key:"componentDidMount",value:function(){this.props._id&&this.setState({name:this.props.name,cost:this.props.cost.toFixed(2),type:this.props.type._id})}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value||""})}},{key:"handleCostChange",value:function(e){this.setState({cost:e.target.value})}},{key:"handleTypeChange",value:function(e){this.setState({type:e.target.value})}},{key:"toggleDialog",value:function(){var e=this;return function(){e.setState({name:e.props.name||"",cost:e.props.cost||0,type:e.props.type?e.props.type._id:"",standardDialogOpen:!e.state.standardDialogOpen})}}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{open:this.props.open,onClose:this.props.onClose},r.a.createElement(w.e,null,this.props._id?"Edit ".concat(this.props.name):"New dish"),r.a.createElement(w.d,null,r.a.createElement(V.a,{type:"text",label:"Name",value:this.state.name,onChange:this.handleNameChange}),r.a.createElement(V.a,{type:"number",inputMode:"numeric",label:"Cost",invalid:!1,value:this.state.cost,onChange:this.handleCostChange}),r.a.createElement(ye.a,{value:this.state.type,onChange:this.handleTypeChange,placeholder:"",label:"Dish type",options:this.props.dishTypes})),r.a.createElement(w.b,null,r.a.createElement(w.c,{theme:"secondary",action:"close",isDefaultAction:!0},"Cancel"),this.props._id?r.a.createElement(k.Mutation,{mutation:je},function(t){return r.a.createElement(w.c,{action:"accept",onClick:function(){return t({variables:{id:e.props._id}})}},"Delete")}):String(),r.a.createElement(k.Mutation,{mutation:this.props._id?Oe:ge},function(t){return r.a.createElement(w.c,{action:"accept",onClick:function(){t({variables:{id:e.props._id,name:e.state.name,type:e.state.type,cost:e.state.cost}})}},"Save")}))))}}]),t}(a.Component),xe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={device:{},openDialog:!1},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(L.a,{className:"main-elevation",z:24,style:{margin:"1rem"}},r.a.createElement(U.a,null,r.a.createElement(U.c,null,r.a.createElement(U.d,{alignStart:!0},r.a.createElement(U.e,null,this.props.typeName)))),r.a.createElement(y.a,{twoLine:!0},this.props.dishes.map(function(t){return r.a.createElement(f.j,{key:t._id,onClick:function(){return e.setState({device:t,openDialog:!0})},text:t.name,secondaryText:"\u20ac ".concat(t.cost.toFixed(2)),metaIcon:"edit"})})),r.a.createElement(ke,Object.assign({},this.state.device,{open:this.state.openDialog,dishTypes:this.props.dishTypes,onClose:function(){e.setState({openDialog:!1})}})))}}]),t}(a.Component);function Ce(){var e=Object(j.a)(["query dishes {\n                  dishes {\n                    _id,\n                    name,\n                    cost,\n                    type {\n                      _id,\n                      name\n                    }\n                  }\n                }"]);return Ce=function(){return e},e}function De(){var e=Object(j.a)(["query dishTypes {\n              dishTypes {\n                _id,\n                name\n                }\n              }"]);return De=function(){return e},e}var Se=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={openDialog:!1},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"groupBy",value:function(e,t){return e.reduce(function(e,n){return(e[t(n)]=e[t(n)]||[]).push(n),e},{})}},{key:"render",value:function(){var e=this,t=this.props.store.searchText,n=new RegExp(t,"i");return r.a.createElement(k.Query,{query:C()(De()),pollInterval:1e3},function(a){var i=a.data,c=[];return i&&i.dishTypes&&(c=i.dishTypes.map(function(e){return{label:e.name,value:e._id}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(k.Query,{query:C()(Ce()),pollInterval:1e3},function(a){var i=a.loading,l=a.error,s=a.data;s&&s.dishes||(s={dishes:[]});var o=e.groupBy(s.dishes.filter(function(e){return!t||n.test(e.name)||n.test(e.type.name)}),function(e){return e.type.name}),d=[];for(var u in o)d.push(r.a.createElement("div",{key:o[u][0]._id,style:{width:"-webkit-fill-available",maxWidth:"500px",minWidth:"320px"}},r.a.createElement(xe,{typeName:u,dishes:o[u],dishTypes:c})));var m=r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{id:"masonry-layout"},d),r.a.createElement(D.a,{className:"floating-right",icon:"add",onClick:function(){return e.setState({openDialog:!0})}}));return i&&(m=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),m)),l?r.a.createElement("p",null,"Error :("):m}),r.a.createElement(ke,{dishTypes:c,open:e.state.openDialog,onClose:function(){return e.setState({openDialog:!1})}}),r.a.createElement("div",{className:"bottomSpacer"}))})}}]),t}(a.Component),_e=Object(p.b)("store")(Object(p.c)(Se)),Te=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,null,r.a.createElement(U.c,null,r.a.createElement(U.d,{alignStart:!0},r.a.createElement(U.e,null,"Global Settings")))),r.a.createElement(y.a,null,r.a.createElement(f.d,{onClick:function(){return e.props.store.setKitchenMode(!e.props.store.kitchenMode)}},r.a.createElement(f.e,{icon:this.props.store.kitchenMode?"radio_button_checked":"radio_button_unchecked"}),r.a.createElement(f.i,null,"Kitchen Mode"))))}}]),t}(a.Component),$e=Object(p.b)("store")(Object(p.c)(Te));function we(){var e=Object(j.a)(["mutation remove($id: ID!){\n removeDishType(_id: $id, ){\n   _id, \n   name\n }\n}"]);return we=function(){return e},e}function Ne(){var e=Object(j.a)(["mutation update($id: ID!, $name: String!){\n updateDishType(_id: $id, name: $name){\n   _id, \n   name\n }\n}"]);return Ne=function(){return e},e}function Fe(){var e=Object(j.a)([" mutation add($name: String!){\n addDishType(name: $name){\n   _id, \n   name\n }\n}"]);return Fe=function(){return e},e}var Pe=C()(Fe()),Ie=C()(Ne()),Me=C()(we()),Ae=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={name:""},n.handleNameChange=n.handleNameChange.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){e.name&&e.name!==t.name&&this.setState({name:e.name})}},{key:"componentDidMount",value:function(){this.props.name&&this.setState({name:this.props.name})}},{key:"toggleDialog",value:function(){var e=this;return function(){e.setState({name:e.props.name,standardDialogOpen:!e.state.standardDialogOpen})}}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value||""})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{open:this.state.standardDialogOpen,onClose:function(t){return e.setState({standardDialogOpen:!1})}},r.a.createElement(w.e,null,this.props._id?"Edit dish type":"New dish type"),r.a.createElement(w.d,null,r.a.createElement(V.a,{type:"text",label:"Name",value:this.state.name||"",onChange:this.handleNameChange})),r.a.createElement(w.b,null,r.a.createElement(w.c,{theme:"secondary",action:"cancel",isDefaultAction:!0},"Cancel"),this.props._id?r.a.createElement(k.Mutation,{mutation:Me},function(t){return r.a.createElement(w.c,{action:"accept",onClick:function(){return t({variables:{id:e.props._id}})}},"Delete")}):String(),r.a.createElement(k.Mutation,{mutation:this.props._id?Ie:Pe},function(t){return r.a.createElement(w.c,{action:"accept",onClick:function(){return t({variables:{id:e.props._id,name:e.state.name}})}},"Save")}))),this.props._id?r.a.createElement(f.d,{onClick:this.toggleDialog()},r.a.createElement(f.i,null,this.props.name),r.a.createElement(f.f,{icon:"edit"})):r.a.createElement(U.b,{icon:"add",onClick:this.toggleDialog()}))}}]),t}(a.Component);function qe(){var e=Object(j.a)(["query dishTypes {\n              dishTypes {\n                _id,\n                name\n                }\n              }"]);return qe=function(){return e},e}var Be=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,null,r.a.createElement(U.c,null,r.a.createElement(U.d,{alignStart:!0},r.a.createElement(U.e,null,"Dish types")),r.a.createElement(U.d,{alignEnd:!0},r.a.createElement(Ae,null)))),r.a.createElement(k.Query,{query:C()(qe()),variables:{hasPayed:!1},pollInterval:1e3},function(e){var t=e.loading,n=e.error,a=e.data;a&&a.dishTypes||(a={dishTypes:[]});var i=r.a.createElement(y.a,null,a.dishTypes.map(function(e){return r.a.createElement(Ae,Object.assign({key:e._id},e))}));return t&&(i=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),i)),n?r.a.createElement("p",null,"Error :("):i}))}}]),t}(a.Component),We=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(z.a,null,r.a.createElement(z.b,{span:"12"},r.a.createElement(L.a,{className:"main-elevation",z:24},r.a.createElement($e,null))),r.a.createElement(z.b,{span:"12"},r.a.createElement(L.a,{className:"main-elevation",z:24},r.a.createElement(Be,null))))}}]),t}(a.Component),Re=n(135),Qe=n(107),He=n(409),Je=n(133),Le=n.n(Je);function Ue(){var e=Object(j.a)(["\n            {\n              orders(hasPayed: true) {\n                _id,\n                timestamp,\n                amountPayed,\n                dishes {\n                  dish {\n                    name,\n                    cost,\n                    type{\n                      name\n                    } \n                  }\n                }\n              }\n            }"]);return Ue=function(){return e},e}var ze=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={menuIsOpen:!1,minOrderTimestamp:new Date((new Date).toDateString()),header:"Todays History"},n.setHistoryFilter=n.setHistoryFilter.bind(Object(h.a)(Object(h.a)(n))),n.getMonday=n.getMonday.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"getMonday",value:function(e){var t=(e=new Date(e)).getDay(),n=e.getDate()-t+(0===t?-6:1);return new Date(e.setDate(n))}},{key:"downloadData",value:function(e,t){var n=new Blob(["\ufeffid,timestamp,name,type,cost\n"].concat(Object(Re.a)(e.map(function(e){return"".concat(e.id,",").concat(e.timestamp.toISOString(),",").concat(e.name,",").concat(e.type,",").concat(e.cost,"\n")}))),{encoding:"UTF-8",type:"text/csv;charset=UTF-8"});Le.a.saveAs(n,"Dishes sold ".concat(this.state.minOrderTimestamp.toISOString(),"-").concat((new Date).toISOString(),".csv"),!0);var a=new Blob(["\ufeffid, timestamp, totalPayed\n"].concat(Object(Re.a)(t.map(function(e){return"".concat(e._id,",").concat(new Date(e.timestamp).toISOString(),",").concat((e.amountPayed||0).toFixed(2),"\n")}))),{encoding:"UTF-8",type:"text/csv;charset=UTF-8"});Le.a.saveAs(a,"Orders sold ".concat(this.state.minOrderTimestamp.toISOString()," -").concat((new Date).toISOString(),".csv"),!0)}},{key:"setHistoryFilter",value:function(e){var t=new Date("0"),n="History";1===e.detail.index?(t=this.getMonday(new Date((new Date).toDateString())),n="This weeks History"):2===e.detail.index&&(t=new Date((new Date).toDateString()),n="Todays History"),this.setState({minOrderTimestamp:t,header:n})}},{key:"render",value:function(){var e=this,t=this.props.match.params.id;return r.a.createElement(L.a,{className:"main-elevation",z:24},r.a.createElement(k.Query,{query:C()(Ue())},function(n){var a=n.loading,i=n.error,c=n.data;if(a)return r.a.createElement(R.a,null);if(i)return r.a.createElement("p",null,"Error :(");if(t)return e.fetchData(t,c.dishes);var l=[],s=0,o=0,d=[];return c&&c.orders&&(d=c.orders.filter(function(t){return new Date(t.timestamp)>=e.state.minOrderTimestamp})),d.forEach(function(e){var t=new Date(e.timestamp);e.dishes.forEach(function(n){l.push({timestamp:t,name:n.dish.name,cost:n.dish.cost.toFixed(2),type:n.dish.type.name,id:e._id}),s+=n.dish.cost}),o=o+e.amountPayed||0}),r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,null,r.a.createElement(U.c,null,r.a.createElement(U.d,{alignStart:!0},r.a.createElement(U.e,null,e.state.header)),r.a.createElement(U.d,{alignEnd:!0},r.a.createElement(Qe.b,null,r.a.createElement(He.a,{open:e.state.menuIsOpen,onSelect:e.setHistoryFilter,onClose:function(t){return e.setState({menuIsOpen:!1})}},r.a.createElement(He.b,null,"Everything"),r.a.createElement(He.b,null,"This Week"),r.a.createElement(He.b,null,"Today")),r.a.createElement(U.b,{icon:"filter_list",onClick:function(t){return e.setState({menuIsOpen:!e.state.menuIsOpen})}})),r.a.createElement(U.b,{icon:"cloud_download",onClick:function(){return e.downloadData(l,d)}})))),r.a.createElement(y.a,null,l.map(function(e,t){return r.a.createElement(f.d,{key:t},r.a.createElement(f.i,null,e.name,r.a.createElement(f.h,null," ",e.timestamp.toDateString()," ")),r.a.createElement(f.f,{tag:"span",basename:""},"\u20ac ".concat(e.cost)))}),r.a.createElement(f.a,null),r.a.createElement(f.d,null,r.a.createElement(f.i,null,"Total",r.a.createElement(f.h,null,"with tip: ","\u20ac ".concat(o.toFixed(2))," ")),r.a.createElement(f.f,{tag:"span",basename:""},"\u20ac ".concat(s.toFixed(2))))))}))}}]),t}(a.Component);function Ke(){var e=Object(j.a)(["mutation remove($id: ID!){\n removeDishExtra(_id: $id, ) {\n   _id, \n   name\n }\n}"]);return Ke=function(){return e},e}function Ze(){var e=Object(j.a)(["mutation update($id: ID!, $name: String!, $cost: Float!, $type: ID!){\n updateDishExtra(_id: $id, name: $name, cost: $cost, type: $type) {\n   _id, \n   name\n }\n}"]);return Ze=function(){return e},e}function Ge(){var e=Object(j.a)([" mutation add($name: String!, $cost: Float!, $type: ID!){\n addDishExtra(name: $name, cost: $cost, type: $type) {\n   _id, \n   name\n }\n}"]);return Ge=function(){return e},e}var Ve=C()(Ge()),Xe=C()(Ze()),Ye=C()(Ke()),et=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={name:"",cost:0,type:""},n.handleNameChange=n.handleNameChange.bind(Object(h.a)(Object(h.a)(n))),n.handleCostChange=n.handleCostChange.bind(Object(h.a)(Object(h.a)(n))),n.handleTypeChange=n.handleTypeChange.bind(Object(h.a)(Object(h.a)(n))),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){!e._id||e.name===t.name&&e.cost===t.cost&&e.type._id===t.type._id||this.setState({name:e.name,cost:e.cost.toFixed(2),type:e.type._id})}},{key:"componentDidMount",value:function(){this.props._id&&this.setState({name:this.props.name,cost:this.props.cost.toFixed(2),type:this.props.type._id})}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value||""})}},{key:"handleCostChange",value:function(e){this.setState({cost:e.target.value})}},{key:"handleTypeChange",value:function(e){this.setState({type:e.target.value})}},{key:"toggleDialog",value:function(){this.setState({name:this.props.name||"",cost:this.props.cost||0,type:this.props.type?this.props.type._id:"",standardDialogOpen:!this.state.standardDialogOpen})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{open:this.props.open,onClose:function(){e.toggleDialog(),e.props.onClose()}},r.a.createElement(w.e,null,this.props._id?"Edit ".concat(this.props.name):"New extra for dish type"),r.a.createElement(w.d,null,r.a.createElement(V.a,{type:"text",label:"Name",value:this.state.name,onChange:this.handleNameChange}),r.a.createElement(V.a,{type:"number",inputMode:"numeric",label:"Cost",invalid:!1,value:this.state.cost,onChange:this.handleCostChange}),r.a.createElement(ye.a,{value:this.state.type,onChange:this.handleTypeChange,placeholder:"",label:"Dish type",options:this.props.dishTypes})),r.a.createElement(w.b,null,r.a.createElement(w.c,{theme:"secondary",action:"cloase",isDefaultAction:!0},"Cancel"),this.props._id?r.a.createElement(k.Mutation,{mutation:Ye},function(t){return r.a.createElement(w.c,{action:"accept",onClick:function(){return t({variables:{id:e.props._id}})}},"Delete")}):String(),r.a.createElement(k.Mutation,{mutation:this.props._id?Xe:Ve},function(t){return r.a.createElement(w.c,{action:"accept",onClick:function(){t({variables:{id:e.props._id,name:e.state.name,type:e.state.type,cost:e.state.cost}})}},"Save")}))))}}]),t}(a.Component),tt=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={extra:{},openDialog:!1},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(L.a,{className:"main-elevation",z:24,style:{margin:"1rem"}},r.a.createElement(U.a,null,r.a.createElement(U.c,null,r.a.createElement(U.d,{alignStart:!0},r.a.createElement(U.e,null,this.props.typeName)))),r.a.createElement(y.a,{twoLine:!0},this.props.extras.map(function(t){return r.a.createElement(f.j,{key:t._id,onClick:function(){return e.setState({extra:t,openDialog:!0})},text:t.name,secondaryText:"\u20ac ".concat(t.cost.toFixed(2)),metaIcon:"edit"})})),r.a.createElement(et,Object.assign({},this.state.extra,{open:this.state.openDialog,dishTypes:this.props.dishTypes,onClose:function(){e.setState({openDialog:!1})}})))}}]),t}(a.Component);function nt(){var e=Object(j.a)(["{\n                      dishExtras {\n                        _id, \n                        name, \n                        cost, \n                        type {\n                          _id,\n                          name\n                        }\n                      }\n                    }\n                "]);return nt=function(){return e},e}function at(){var e=Object(j.a)(["query dishTypes {\n              dishTypes {\n                _id,\n                name\n                }\n              }"]);return at=function(){return e},e}var rt=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={openDialog:!1},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"groupBy",value:function(e,t){return e.reduce(function(e,n){return(e[t(n)]=e[t(n)]||[]).push(n),e},{})}},{key:"render",value:function(){var e=this,t=this.props.store.searchText,n=new RegExp(t,"i");return r.a.createElement(k.Query,{query:C()(at()),pollInterval:5e3},function(a){var i=a.data,c=[];return i&&i.dishTypes&&(c=i.dishTypes.map(function(e){return{label:e.name,value:e._id}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(k.Query,{query:C()(nt()),pollInterval:1e3},function(a){var i=a.loading,l=a.error,s=a.data;s&&s.dishExtras||(s={dishExtras:[]});var o=e.groupBy(s.dishExtras.filter(function(e){return!t||n.test(e.name)||n.test(e.type.name)}),function(e){return e.type.name}),d=[];for(var u in o)d.push(r.a.createElement("div",{key:o[u][0]._id,style:{width:"-webkit-fill-available",maxWidth:"500px",minWidth:"320px"}},r.a.createElement(tt,{typeName:u,extras:o[u],dishTypes:c})));var m=r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{id:"masonry-layout"},d),r.a.createElement(D.a,{className:"floating-right",icon:"add",onClick:function(){return e.setState({openDialog:!0})}}));return i&&(m=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null),m)),l?r.a.createElement("p",null,"Error :("):m}),r.a.createElement(et,{dishTypes:c,open:e.state.openDialog,onClose:function(){return e.setState({openDialog:!1})}}))})}}]),t}(a.Component),it=Object(p.b)("store")(Object(p.c)(rt)),ct=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement("div",{className:"mdc-top-app-bar--fixed-adjust"},r.a.createElement(m.a,{exact:!0,path:"/",component:J}),r.a.createElement(m.a,{path:"/orders",component:J}),r.a.createElement(m.a,{path:"/orderDetails/:id?",component:le}),r.a.createElement(m.a,{path:"/payOrder/:id",component:Ee}),r.a.createElement(m.a,{path:"/dishes",component:_e}),r.a.createElement(m.a,{path:"/settings",component:We}),r.a.createElement(m.a,{path:"/orderHistory",component:ze}),r.a.createElement(m.a,{path:"/dishExtra",component:it})))}}]),t}(a.Component),lt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function st(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ot=n(408),dt=n(208),ut=n(28),mt=function(){function e(){Object(l.a)(this,e),this.searchText="",this.kitchenMode="true"===localStorage.getItem("Bit.KitchenMode")||!1}return Object(s.a)(e,[{key:"setKitchenMode",value:function(e){this.kitchenMode=e,localStorage.setItem("Bit.KitchenMode",e)}}]),e}();Object(ut.f)(mt,{searchText:ut.k,kitchenMode:ut.k});var ht=new mt,pt=n(209),Et=new dt.a,yt={store:ht};c.a.render(r.a.createElement(pt.a,{options:{primary:"#795548",secondary:"#486c79",background:"#fff"}},r.a.createElement(k.ApolloProvider,{client:Et},r.a.createElement(p.a,yt,r.a.createElement(ot.a,null,r.a.createElement(ct,null))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");lt?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):st(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):st(t,e)})}}()}},[[216,1,2]]]);
//# sourceMappingURL=main.33db7672.chunk.js.map