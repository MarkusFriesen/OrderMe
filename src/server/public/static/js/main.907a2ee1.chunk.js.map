{"version":3,"sources":["components/navigation/Nav.js","components/orders/JoinDialogSurface.js","components/orders/JoinDialog.js","components/orders/OrderCard.js","pages/Orders.js","components/order-details/DetailExtraDialog.js","components/order-details/DetailContent.js","pages/OrderDetails.js","components/orders/CreateReciept.js","components/orders/PayOrderContent.js","pages/PayOrder.js","components/dishes/DishDialog.js","components/dishes/DishCard.js","pages/Dishes.js","components/settings/GlobalSettings.js","components/settings/DishTypeDialog.js","components/settings/DishTypes.js","pages/Settings.js","pages/History.js","components/extras/ExtraDialog.js","components/extras/ExtraCard.js","pages/DishExtra.js","App.js","serviceWorker.js","stores/Store.js","index.js"],"names":["Nav","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","searching","searchText","modalOpen","toggleSearch","bind","assertThisInitialized","handleSearchText","onClick","setState","_this2","e","target","value","store","_this3","react_default","a","createElement","next","dense","fixed","className","alignStart","placeholder","autoFocus","onChange","aria-label","icon","alt","Fragment","kitchenMode","alignEnd","drawer_next","modal","open","onClose","list","Link","to","list_item","Component","inject","observer","JOIN","gql","_templateObject","JoinOrderSurface","people","handleJoin","joinOrders","newProps","oldProps","JSON","stringify","data","map","o","i","id","_id","name","selected","length","join","_this4","ordersToJoin","filter","s","variables","ids","_this5","dialog_next","table","p","key","action","react_apollo_browser_umd","mutation","isDefaultAction","JoinOrder","standardDialogOpen","query","JoinDialog_templateObject","pollInterval","_ref","loading","error","orders","evt","JoinDialogSurface_JoinOrderSurface","assign","title","concat","body","card_next","MADE","OrderCard_templateObject","OrderCard","handleDishClick","made","dishes","d","dish","hasPayed","delivered","extras","style","padding","typography_next","use","tag","theme","v","disabledKitchen","disabledServer","graphic","disabled","text","secondaryText","ripple","notes","JoinDialog_JoinOrder","Order","matchesFilter","RegExp","Orders_templateObject","result","lib_default","toString","test","some","type","order","width","maxWidth","minWidth","orders_OrderCard","linear_progress_next","console","warn","fab_next","DetailExtraDialog","onDelete","selectedExtras","onCancel","onSave","create","addExtra","_this$props","chip_next","sort","b","label","splice","AddOrder","DetailContent_templateObject","UpdateOrder","_templateObject2","DetailContent","activeTabIndex","dishTypes","selectedChip","addDish","removeDish","changeTextField","selectDish","saveExtras","typeName","forEach","push","selectedDishId","field","openDialog","selectedDish","selectableExtras","dishExtras","keys","grid_next","span","String","tab_bar","onActivate","detail","index","tab","choice","_","checkmark","activated","textfield_next","min","inputMode","pattern","textarea","fullwidth","addOrUpdate","button_next","history","goBack","DetailExtraDialog_DetailExtraDialog","OrderDetails","OrderDetails_templateObject","DetailContent_DetailContent","match","params","elevation_next","z","toolbar_next","OrderDetails_templateObject2","_ref2","graphQLErrors","_ref3","message","fetchData","CreateReceipt","totalCosts","reduce","c","cost","toFixed","Date","toLocaleString","PAY","PayOrderContent_templateObject","PayOrderContent","paying","selectAll","changePayment","toggleSelection","toggleAll","saveFile","every","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","err","return","isNaN","dishesToPay","blob","Blob","FileSaver","saveAs","toUTCString","total","extraCost","basename","invalid","pay","payedDishes","PayOrder","PayOrder_templateObject","PayOrderContent_PayOrderContent","ADD","DishDialog_templateObject","UPDATE","DishDialog_templateObject2","REMOVE","_templateObject3","DishDialog","handleNameChange","handleCostChange","handleTypeChange","select_next","options","remove","DishCard","device","margin","twoLine","metaIcon","DishDialog_DishDialog","Dishes","xs","func","rv","x","Dishes_templateObject","Dishes_templateObject2","grouped","groupBy","groupedDishes","group","DishCard_DishCard","GlobalSettings","setKitchenMode","DishTypeDialog_templateObject","DishTypeDialog_templateObject2","DishTypeDialog_templateObject3","DishTypeDialog","toggleDialog","DishTypes","DishTypeDialog_DishTypeDialog","DishTypes_templateObject","Settings","settings_GlobalSettings","DishTypes_DishTypes","History","menuIsOpen","minOrderTimestamp","header","setHistoryFilter","getMonday","day","getDay","diff","getDate","setDate","timestamp","toISOString","tmsp","toDateString","History_templateObject","ordered","menu_surface","menu","onSelect","downloadData","ExtraDialog_templateObject","ExtraDialog_templateObject2","ExtraDialog_templateObject3","ExtraDialog","extra","ExtraDialog_ExtraDialog","DishExtra","DishExtra_templateObject","DishExtra_templateObject2","groupedExtras","ExtraCard_DishCard","App","components_navigation_Nav","Route","exact","path","component","Orders","Hist","Extras","isLocalhost","Boolean","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","catch","Store","localStorage","getItem","isOn","setItem","decorate","observable","DefaultStore","client","ApolloClient","stores","ReactDOM","render","theme_next","primary","secondary","background","index_module","HashRouter","src_App_0","document","getElementById","URL","process","href","origin","addEventListener","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.907a2ee1.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport { inject, observer } from 'mobx-react'\r\nimport {\r\n  TopAppBar,\r\n  TopAppBarRow,\r\n  TopAppBarSection,\r\n  TopAppBarActionItem,\r\n  TopAppBarTitle,\r\n  TopAppBarNavigationIcon\r\n} from '@rmwc/top-app-bar'\r\nimport {\r\n  List,\r\n  ListItemGraphic,\r\n  ListItem,\r\n  ListItemText\r\n} from '@rmwc/list';\r\nimport {\r\n  Drawer,\r\n  DrawerHeader,\r\n  DrawerContent,\r\n  DrawerTitle\r\n} from '@rmwc/drawer';\r\nimport {\r\n  Link\r\n} from 'react-router-dom'\r\n\r\nimport './Nav.css'\r\n\r\nclass Nav extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      searching: false,\r\n      searchText: \"\",\r\n      modalOpen: false\r\n    }\r\n\r\n    this.toggleSearch = this.toggleSearch.bind(this)\r\n    this.handleSearchText = this.handleSearchText.bind(this)\r\n    this.onClick = this.onClick.bind(this)\r\n  }\r\n\r\n  \r\n  onClick(){\r\n    this.setState({ modalOpen: !this.state.modalOpen })\r\n  }\r\n  handleSearchText(){\r\n    return (e)=>{\r\n      this.setState({\r\n        searchText: e.target.value\r\n      })\r\n      this.props.store.searchText = e.target.value\r\n    }\r\n  }\r\n\r\n  toggleSearch(){\r\n    this.setState({ searching: !this.state.searching, searchText: \"\" })\r\n    this.props.store.searchText = \"\"\r\n  }\r\n\r\n  render(){\r\n    const { toggleSearch, onClick } = this \r\n    if (this.state.searching)\r\n      return (\r\n        <TopAppBar dense fixed>\r\n          <TopAppBarRow>\r\n            <TopAppBarSection className=\"search-field\" alignStart>\r\n              <input placeholder=\"Search\" autoFocus value={this.state.searchText} onChange={this.handleSearchText()}/>\r\n              <TopAppBarActionItem aria-label=\"Search\" icon=\"clear\" alt=\"Search this Page\" onClick={toggleSearch}/>\r\n            </TopAppBarSection>          \r\n          </TopAppBarRow>\r\n       </TopAppBar>\r\n      )\r\n\r\n    return (\r\n      <React.Fragment>\r\n      <TopAppBar dense fixed>\r\n        <TopAppBarRow>\r\n          <TopAppBarSection alignStart>\r\n            <TopAppBarNavigationIcon icon=\"menu\" onClick={onClick}/>\r\n            <TopAppBarTitle>{this.props.store.kitchenMode ? \"BIt's Kitchen\" : \"BIt\"}</TopAppBarTitle>\r\n          </TopAppBarSection>\r\n          <TopAppBarSection alignEnd>\r\n            <TopAppBarActionItem aria-label=\"Search\" icon=\"search\" alt=\"Search this Page\" onClick={toggleSearch}/>\r\n          </TopAppBarSection>\r\n        </TopAppBarRow>\r\n      </TopAppBar>\r\n\r\n      <Drawer\r\n          modal\r\n          open={this.state.modalOpen}\r\n          onClose={() => this.setState({ modalOpen: false })}\r\n        >\r\n          <DrawerHeader>\r\n            <DrawerTitle>Menu</DrawerTitle>\r\n          </DrawerHeader>\r\n          <DrawerContent>\r\n            <List>\r\n              <Link to=\"/orders\">\r\n                <ListItem onClick={onClick}>\r\n                  <ListItemGraphic icon=\"shopping_cart\" />\r\n                  <ListItemText>Orders</ListItemText>\r\n                </ListItem>\r\n              </Link>\r\n              <Link to=\"/orderHistory\">\r\n              <ListItem onClick={onClick}>\r\n                <ListItemGraphic icon=\"history\"/>\r\n                <ListItemText>History</ListItemText>\r\n                </ListItem>\r\n              </Link>\r\n              <Link to=\"/dishes\">\r\n              <ListItem onClick={onClick}>\r\n                <ListItemGraphic icon = \"shopping_basket\" />\r\n                <ListItemText>Dishes</ListItemText>\r\n                </ListItem>\r\n              </Link>\r\n              <Link to=\"/dishExtra\">\r\n              <ListItem onClick={onClick}>\r\n                <ListItemGraphic icon = \"loyalty\" />\r\n                <ListItemText>Extras</ListItemText>\r\n                </ListItem>\r\n              </Link>\r\n              <Link to=\"/settings\">\r\n              <ListItem onClick={onClick}>\r\n                <ListItemGraphic icon=\"settings\" />  \r\n                <ListItemText>Settings</ListItemText>\r\n                </ListItem>\r\n              </Link>\r\n            </List>\r\n          </DrawerContent>\r\n        </Drawer>\r\n      </React.Fragment>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default inject(\"store\")(observer(Nav))","import React, { Component } from 'react'\r\nimport {\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  DialogButton\r\n} from '@rmwc/dialog';\r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemGraphic,\r\n} from '@rmwc/list';\r\nimport gql from \"graphql-tag\";\r\nimport { Mutation } from \"react-apollo\";\r\n\r\nconst JOIN = gql`\r\n  mutation join($id: ID!, $ids: [ID]!){\r\n    joinOrders(_id: $id, orderIds: $ids){\r\n      _id,\r\n      name,\r\n      table,\r\n      dishes {\r\n        dish {\r\n          _id,\r\n          name,\r\n          cost\r\n        },\r\n        made,\r\n        hasPayed,\r\n        extras {\r\n          _id,\r\n          name\r\n        }\r\n      }\r\n    }\r\n  }`\r\n\r\nexport default class JoinOrderSurface extends Component {\r\n  constructor(){\r\n    super()\r\n\r\n    this.handleJoin = this.handleJoin.bind(this)\r\n    this.joinOrders = this.joinOrders.bind(this)\r\n  }\r\n  \r\n  state = {\r\n    people: []\r\n  }\r\n\r\n  componentWillReceiveProps(newProps, oldProps){\r\n    if (JSON.stringify(newProps) !== JSON.stringify(oldProps))\r\n      this.setState({\r\n        people: newProps.data.map((o, i) => { return { id: o._id, name: o.name, selected: (this.state.people.length > i ? this.state.people[i].selected : false) } })\r\n      })\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.setState({\r\n      people: this.props.data.map(o => {return {id: o._id, name: o.name, selected: false}})\r\n    })\r\n  }\r\n\r\n  handleJoin(i){\r\n    return () => {\r\n      const selected = this.state.people\r\n      selected[i].selected = !selected[i].selected\r\n      this.setState({\r\n        people: selected\r\n      })\r\n      \r\n    }\r\n  }\r\n\r\n  joinOrders(join){\r\n    return () => {\r\n      const ordersToJoin = this.state.people.filter(s => s.selected).map(s => s.id)\r\n      join({variables: {id: this.props._id, ids: ordersToJoin}})\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <React.Fragment>\r\n        <DialogTitle>Everyone at table {this.props.table}</DialogTitle>\r\n        < DialogContent >\r\n          <List>\r\n          {\r\n            this.state.people.map((p, i) => \r\n                <ListItem key={p.id} onClick={this.handleJoin(i)}>\r\n                <ListItemGraphic icon={p.selected ? \"radio_button_checked\" : \"radio_button_unchecked\"}/>\r\n                <ListItemText>{ p.name }</ListItemText>\r\n              </ListItem>\r\n            )\r\n          }\r\n          </List>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <DialogButton action=\"close\">Cancel</DialogButton >\r\n          <Mutation mutation={JOIN}>\r\n            {(join) => \r\n              <DialogButton action=\"accept\" onClick={this.joinOrders(join)} isDefaultAction>Join</DialogButton >\r\n            }\r\n            </Mutation>\r\n        </DialogActions>\r\n      </React.Fragment>)\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport { Query } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport {\r\n  Dialog,\r\n  SimpleDialog\r\n} from '@rmwc/dialog';\r\nimport {\r\n  CardActionButton\r\n} from '@rmwc/card';\r\n\r\nimport JoinDialogSurface from \"./JoinDialogSurface\"\r\n\r\nexport default class JoinOrder extends Component {\r\n  state = {\r\n    standardDialogOpen: false\r\n  }\r\n  render(){\r\n    return (\r\n    <React.Fragment>\r\n        <Query\r\n          query={gql`\r\n                query order($table: Int) {\r\n                  orders(table: $table, hasPayed: false) {\r\n                    _id,\r\n                    name,\r\n                  }\r\n                }`} variables={{ table: this.props.table }} pollInterval={5000}>\r\n          {({ loading, error, data }) => {\r\n            if (!loading && !error && data && data.orders)\r\n              return(\r\n              <Dialog\r\n                open={this.state.standardDialogOpen}\r\n                onClose={evt => this.setState({ standardDialogOpen: false })}\r\n              >\r\n                  <JoinDialogSurface data={data.orders.filter(o => o._id !== this.props._id)} {...this.props}/>\r\n              </Dialog>)\r\n            return (\r\n              <SimpleDialog\r\n                title={`Everyone at table ${this.props.table}`}\r\n                body=\"Fetching Data\"\r\n                open={this.state.standardDialogOpen}\r\n                onClose={evt => this.setState({ standardDialogOpen: false })}\r\n              />\r\n            )\r\n\r\n          }}\r\n        </Query>\r\n      <CardActionButton\r\n          onClick={evt => this.setState({ standardDialogOpen: true })}\r\n        >\r\n          Join\r\n      </CardActionButton>\r\n    </React.Fragment>)\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport {\r\n  Card,\r\n  CardPrimaryAction,\r\n  CardActionIcon,\r\n  CardActions,\r\n  CardActionButtons,\r\n  CardActionIcons\r\n} from '@rmwc/card';\r\nimport {\r\n  List,\r\n  SimpleListItem\r\n} from '@rmwc/list';\r\nimport gql from \"graphql-tag\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { observer, inject } from \"mobx-react\";\r\n\r\nimport { Typography } from '@rmwc/typography';\r\n\r\nimport JoinOrder from './JoinDialog';\r\n\r\nimport './card.css';\r\n\r\nconst MADE = gql`\r\n  mutation updateOrder($id: ID!, $dishes: [orderDishMutation]!){\r\n    updateOrder(_id: $id, dishes: $dishes){\r\n      _id,\r\n      name,\r\n      table,\r\n      notes,\r\n      dishes {\r\n        dish {\r\n          _id,\r\n          name,\r\n          cost\r\n        },\r\n        made,\r\n        delivered,\r\n        hasPayed\r\n      }\r\n    }\r\n  }`\r\n\r\nclass OrderCard extends Component {\r\n  constructor(){\r\n    super()\r\n    this.handleDishClick = this.handleDishClick.bind(this)\r\n  }\r\n\r\n  handleDishClick(id, i, made){\r\n    return () => {\r\n      const dishes = this.props.dishes.map(d => {return {id: d.dish._id, made: d.made, hasPayed: d.hasPayed, delivered: d.delivered, extras: d.extras.map(e => e._id)}})\r\n\r\n      if (this.props.store.kitchenMode){\r\n        if (dishes[i].delivered) return;\r\n        dishes[i].made = !dishes[i].made;\r\n      } else {\r\n        if (!dishes[i].made) return;\r\n        dishes[i].delivered = !dishes[i].delivered;\r\n      }\r\n\r\n      made({variables: {\r\n        id: id, \r\n        dishes: dishes\r\n      }})\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const props = this.props\r\n    return (\r\n      <Card>\r\n        <Link to={`/orderDetails/${props._id}`}>\r\n          <CardPrimaryAction>\r\n            <div style={{ padding: '0 1rem 1rem 1rem' }}>\r\n              <Typography use=\"headline6\" tag=\"h2\" style={{}}>\r\n                <span className=\"highlight\">{props.table}</span> {props.name}\r\n              </Typography>\r\n            </div>\r\n          </CardPrimaryAction>\r\n        </Link>\r\n        <div style={{ padding: '0 1rem 1rem 1rem' }}>\r\n          <Mutation mutation={MADE}>\r\n            {(made) => \r\n                <Typography use=\"body1\" tag=\"div\" theme=\"textSecondaryOnBackground\">\r\n                <List>\r\n                  {props.dishes.map((v, i) =>{\r\n                    const disabledKitchen = this.props.store.kitchenMode && v.delivered;\r\n                    const disabledServer = !this.props.store.kitchenMode && !v.made;\r\n                    return (\r\n                    <SimpleListItem key={i} className={v.delivered ? \"done\" : \"\"} \r\n                      graphic = {\r\n                        v.made ? (v.delivered ? \"done_all\" : \"done\") : \"radio_button_unchecked\"\r\n                      }\r\n                      onClick={this.handleDishClick(props._id, i, made)} \r\n                      disabled = {disabledKitchen || disabledServer}\r\n                      text={v.dish.name}\r\n                      secondaryText={v.extras.map(e => e.name).join(\", \")}\r\n                      ripple={v.made} />)}\r\n                    )}\r\n                </List>\r\n              </Typography>\r\n            }\r\n          </Mutation>\r\n        </div>\r\n        <Typography\r\n          use=\"subtitle1\"\r\n          tag=\"div\"\r\n          style={{ padding: '0.5rem 1rem' }}\r\n          theme=\"textSecondaryOnBackground\"\r\n        >\r\n          {this.props.notes}\r\n        </Typography>\r\n        <CardActions>\r\n          <CardActionButtons>\r\n            <JoinOrder {...this.props}/>\r\n          </CardActionButtons>\r\n          <CardActionIcons>\r\n            <Link to={`/payOrder/${props._id}`}>\r\n              <CardActionIcon icon = \"credit_card\" />\r\n            </Link>\r\n          </CardActionIcons>\r\n        </CardActions>\r\n      </Card>)\r\n  }\r\n}\r\n\r\nexport default inject(\"store\")(observer(OrderCard))\r\n","import React, { Component } from 'react'\r\nimport { Query } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport { Fab } from '@rmwc/fab';\r\nimport Masonry from 'react-masonry-component';\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport OrderCard from '../components/orders/OrderCard'\r\nimport { observer, inject } from \"mobx-react\"\r\nimport { LinearProgress } from '@rmwc/linear-progress'\r\n\r\nclass Order extends Component {\r\n  render() {\r\n    const filter = this.props.store.searchText\r\n    const matchesFilter = new RegExp(filter, \"i\")\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Query\r\n          query={gql`query order($hasPayed: Boolean) {\r\n              orders(hasPayed: $hasPayed) {\r\n                _id,\r\n                name,\r\n                table,\r\n                notes,\r\n                dishes {\r\n                  dish {\r\n                    _id,\r\n                    name,\r\n                    cost,\r\n                    type {\r\n                      _id,\r\n                      name\r\n                    }\r\n                  },\r\n                  made,\r\n                  delivered,\r\n                  hasPayed,\r\n                  extras {\r\n                    _id, \r\n                    name\r\n                  }\r\n                }\r\n              }\r\n            }`}\r\n          variables={{ hasPayed: false }}\r\n          pollInterval={500}>\r\n          {({ loading, error, data }) => {\r\n            if (!data || !data.orders)\r\n              data = {orders: []}\r\n            let result = <Masonry id=\"masonry-layout\">\r\n              {\r\n                data.orders.filter(o => {\r\n                  return (!filter || (o.table.toString() === filter) || matchesFilter.test(o.name) || o.dishes.some(d => matchesFilter.test(d.dish.type.name))) &&\r\n                    (!this.props.store.kitchenMode || o.dishes.some(d => !d.made))\r\n                }).map((order, i) => {\r\n\r\n                  return (<div\r\n                    key={i}\r\n                    style={{\r\n                      width: '-webkit-fill-available',\r\n                      maxWidth: '500px',\r\n                      minWidth: '320px'\r\n                    }}>\r\n                    <OrderCard key={order._id} {...order} {...this.props} />\r\n                    \r\n                  </div>)\r\n                })\r\n              }\r\n            </Masonry>\r\n\r\n            if (loading) result = \r\n              <React.Fragment>\r\n                <LinearProgress />\r\n                {result}\r\n              </React.Fragment>\r\n            if (error){\r\n              console.warn(error)\r\n              return <p>Error :(</p>;\r\n            } \r\n\r\n            return result\r\n            \r\n          }}\r\n        </Query>\r\n\r\n        <Link to=\"/orderDetails\">\r\n          <Fab className=\"floating-right\" icon=\"add\" />\r\n        </Link>\r\n        <div className=\"bottomSpacer\"/>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default inject(\"store\")(observer(Order))","import React, { Component } from 'react'\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  DialogButton\r\n} from '@rmwc/dialog'\r\nimport { List, SimpleListItem } from '@rmwc/list'\r\nimport { Chip, ChipSet } from '@rmwc/chip';\r\n\r\nexport default class DetailExtraDialog extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = { selectedExtras: [] }\r\n  }\r\n\r\n  componentWillReceiveProps(newProps, oldProps) {\r\n    if (JSON.stringify(newProps.selectedExtras) !== JSON.stringify(oldProps.selectedExtras)) {\r\n      this.setState({\r\n        selectedExtras: newProps.selectedExtras\r\n      })\r\n    }\r\n  }\r\n  \r\n  onDelete = () => {\r\n    this.setState({ selectedExtras: []})\r\n    this.props.onDelete()\r\n  }\r\n\r\n  onCancel = () => {\r\n    this.setState({ selectedExtras: []})\r\n    this.props.onClose()\r\n  }\r\n\r\n  onSave = () => {\r\n    this.props.onSave(this.state.selectedExtras.map(e => Object.create(e)))\r\n    this.setState({ selectedExtras: []})\r\n  }\r\n\r\n  addExtra = (e) => {\r\n    const { selectedExtras } = this.state\r\n    this.setState({selectedExtras: [e].concat(selectedExtras)})\r\n  }\r\n  render() {\r\n    const {dish, extras} = this.props;\r\n    let title = extras ? `Edit ${dish? dish.name : \"dish\"} extras` : `Confirm ${dish? dish.name : \"dish\"} Deletion`;\r\n\r\n    return(\r\n      <Dialog\r\n        open={this.props.open}\r\n        onClose={this.props.onClose}\r\n      >\r\n        <DialogTitle>{title}</DialogTitle>\r\n\r\n        { extras ? \r\n          < DialogContent >\r\n            <ChipSet>\r\n              {extras.sort((a, b) => a.name < b.name ? -1 : 1)\r\n                .map(e => <Chip key={e._id} label={e.name} onClick={() => this.addExtra(e)}/>)}\r\n            </ChipSet>\r\n\r\n            <List>\r\n              {this.state.selectedExtras.map((s, id)=> \r\n              <SimpleListItem\r\n                key={id}\r\n                graphic=\"close\"\r\n                text={s.name}\r\n                onClick={() => {\r\n                  this.state.selectedExtras.splice(id, 1) \r\n                  this.setState({\r\n                    selectedExtras: this.state.selectedExtras\r\n                  })\r\n                  }}\r\n              />)}\r\n            </List>\r\n          </DialogContent> : \r\n          <React.Fragment/>}\r\n        <DialogActions>\r\n          <DialogButton \r\n            theme=\"secondary\" \r\n            action=\"close\" \r\n            onClick={this.onDelete}>Delete</DialogButton>\r\n          <DialogButton\r\n            theme=\"primary\"\r\n            action=\"close\"\r\n            isDefaultAction\r\n            onClick={this.onCancel}>Cancel</DialogButton>\r\n          {\r\n            extras ? < DialogButton\r\n            theme=\"primary\" \r\n            action=\"accept\"\r\n            onClick = {this.onSave} >Save</DialogButton> : <React.Fragment/> }\r\n        </DialogActions>\r\n      </Dialog>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport { Grid, GridCell } from '@rmwc/grid';\r\nimport { TabBar, Tab } from '@rmwc/tabs';\r\nimport { Chip, ChipSet } from '@rmwc/chip';\r\nimport {\r\n  List,\r\n  SimpleListItem\r\n} from '@rmwc/list';\r\nimport { TextField } from '@rmwc/textfield';\r\nimport { Button } from '@rmwc/button';\r\nimport gql from \"graphql-tag\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport { LinearProgress } from '@rmwc/linear-progress';\r\n\r\nimport DetailExtraDialog from './DetailExtraDialog';\r\n\r\nimport './Details.css'\r\n\r\nconst AddOrder = gql`\r\n  mutation addOrder($name: String, $table: Int!, $notes: String, $dishes: [orderDishMutation]!){\r\n    addOrder(table: $table, name: $name, dishes: $dishes, notes: $notes){\r\n      _id, \r\n      name,\r\n      table,\r\n      notes\r\n    }\r\n  }\r\n`;\r\n\r\nconst UpdateOrder = gql`\r\n  mutation updateOrder($id: ID!, $name: String, $table: Int, $notes: String, $dishes: [orderDishMutation]){\r\n    updateOrder(_id: $id, table: $table, name: $name, dishes: $dishes, notes: $notes ){\r\n      _id, \r\n      name,\r\n      table,\r\n      notes\r\n    }\r\n  }\r\n`;\r\n\r\nexport default class DetailContent extends Component {\r\n  constructor(){\r\n    super()\r\n\r\n    this.addDish = this.addDish.bind(this)\r\n    this.removeDish = this.removeDish.bind(this)\r\n    this.changeTextField = this.changeTextField.bind(this)\r\n    this.selectDish = this.selectDish.bind(this)\r\n\r\n    this.saveExtras = this.saveExtras.bind(this)\r\n  }\r\n\r\n  state = {\r\n    id: \"\",\r\n    name: \"\",\r\n    table: 0, \r\n    notes : \"\",\r\n    dishes: [],\r\n    activeTabIndex: 0,\r\n    dishTypes: {},\r\n    extras: {},\r\n    selectedChip: {}\r\n  } \r\n\r\n  componentDidMount(){\r\n    if (this.props.order)\r\n      this.setState({\r\n        id: this.props.order._id,\r\n        name: this.props.order.name,\r\n        table: this.props.order.table,\r\n        notes: this.props.order.notes,\r\n        dishes: this.props.order.dishes.map(d => {return {dish: {id: d.dish._id, name: d.dish.name, typeName: d.dish.type.name }, made: d.made, hasPayed: d.hasPayed, extras: d.extras, delivered: d.delivered}})\r\n      })\r\n      \r\n    const dishTypes = this.state.dishTypes\r\n    this.props.dishes.forEach(d => {\r\n      if (dishTypes[d.type.name]){\r\n        dishTypes[d.type.name].push(d)\r\n      } else {\r\n        dishTypes[d.type.name] = [d]\r\n      }\r\n    });\r\n\r\n    const extras = this.state.extras\r\n    this.props.extras.forEach(e => {\r\n      if (extras[e.type.name]) {\r\n        extras[e.type.name].push(e)\r\n      } else {\r\n        extras[e.type.name] = [e]\r\n      }\r\n    });\r\n\r\n    this.setState({\r\n      dishTypes: dishTypes,\r\n      extras: extras\r\n    })\r\n  }\r\n\r\n  addDish(id, name, typeName){\r\n    const dishes = [{ dish: { id, name, typeName }, made: false, hasPayed: false }].concat(this.state.dishes)\r\n    this.setState(\r\n      {\r\n        dishes: dishes\r\n      })\r\n  }\r\n\r\n  removeDish(){\r\n    const id = this.state.selectedDishId\r\n    let dishes = this.state.dishes\r\n\r\n    if (dishes.length < id) return\r\n    if (dishes[id].hasPayed || dishes[id].made) return\r\n\r\n    if (dishes.length === 1)\r\n      dishes = []\r\n    else \r\n      dishes.splice(id, 1)\r\n    this.setState({ dishes: dishes})\r\n  }\r\n\r\n  changeTextField(field){\r\n    return (e) =>{\r\n      const state = {}\r\n      state[field] = e.target.value\r\n      this.setState(state)\r\n    }\r\n  }\r\n\r\n  selectDish(id){\r\n    const { dishes } = this.state\r\n\r\n    if (!dishes || dishes.length < id) return;\r\n    const dish = dishes[id].dish;\r\n\r\n    if (dish.hasPayed || dish.made) return;\r\n\r\n    this.setState({\r\n      openDialog: true,\r\n      selectedDish: dish,\r\n      selectedDishId: id,\r\n      selectableExtras: this.state.extras[dishes[id].dish.typeName],\r\n      dishExtras: dishes[id].extras\r\n    })\r\n  }\r\n\r\n  saveExtras(extras){\r\n    const dishes = this.state.dishes;\r\n    const dish = dishes[this.state.selectedDishId];\r\n\r\n    dish.extras = extras\r\n\r\n    this.setState({\r\n      \"dishes\": dishes,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const keys = Object.keys(this.state.dishTypes)\r\n    const { state, props, selectDish } = this\r\n\r\n    return (\r\n      <React.Fragment>\r\n      <Grid className=\"order-details\">\r\n        <GridCell span=\"12\">\r\n          { keys.length === 0 ? String() : \r\n              <TabBar\r\n                activeTabIndex={state.activeTabIndex}\r\n                onActivate={evt => {\r\n                  this.setState({ 'activeTabIndex': evt.detail.index })\r\n                }}\r\n              >\r\n                {keys.map((v, i) => <Tab key={i}>{v}</Tab>)}\r\n              </TabBar>\r\n          }\r\n            <ChipSet choice>\r\n              {\r\n                (state.dishTypes[keys[state.activeTabIndex]] || []).sort((a, b) => a.name < b.name ? -1 : 1).map((v, i) =>\r\n                <Chip key={i} onClick={_ => this.addDish(v._id, v.name, keys[state.activeTabIndex])} label={v.name} checkmark selected={\r\n                  state.dishes.some(d => d.dish.id === v._id)\r\n                }/>\r\n              )}\r\n            </ChipSet>  \r\n\r\n        </GridCell>\r\n      </Grid>\r\n      <Grid className=\"order-details\">\r\n        <GridCell span=\"6\">\r\n          <List>\r\n            {state.dishes.map((v, i) => \r\n                <SimpleListItem\r\n                  onClick={() => {\r\n                    if (v.hasPayed || v.made || v.delivered) return;\r\n                    selectDish(i)\r\n                  }}\r\n                  key={i}\r\n                  text={v.dish.name}\r\n                  secondaryText={(v.extras || []).map(e => e.name).join(\", \")}\r\n                  graphic={v.hasPayed ? \"euro_symbol\" : v.delivered ? \"done_all\" : v.made ? \"done\" : \"remove\"}\r\n                  ripple={false}\r\n                  activated={false}\r\n                  disabled={v.hasPayed || v.made || v.delivered}\r\n                />  \r\n            )}\r\n          </List>\r\n        </GridCell>\r\n        <GridCell span=\"6\">\r\n            <TextField icon=\"event_seat\" label=\"Table\" type=\"number\" min=\"0\" inputMode=\"numeric\" pattern=\"\\d*\" value={state.table} onChange={this.changeTextField(\"table\")} />\r\n            <TextField icon=\"account_circle\" label=\"Name\" value={state.name} onChange={this.changeTextField(\"name\")} />\r\n            <TextField textarea fullwidth label=\"Notes\" type=\"number\" value={state.notes} onChange={this.changeTextField(\"notes\")} />\r\n        </GridCell>\r\n      </Grid>\r\n      <Mutation mutation={props.id ? UpdateOrder : AddOrder}>\r\n      {(addOrUpdate, {data, loading, error}) => {\r\n          let result = <Button onClick={() => addOrUpdate({\r\n            variables: {\r\n              id: state.id,\r\n              table: state.table,\r\n              name: state.name,\r\n              notes: state.notes,\r\n              dishes: state.dishes.map(d => { return { id: d.dish.id, made: d.made, hasPayed: d.hasPayed, delivered: d.delivered, extras: (d.extras|| []).map(e => e._id)} }).filter(d => d && d.id)\r\n            }\r\n          })} theme=\"secondary\">Save</Button>\r\n\r\n          if (loading) \r\n            result = \r\n            <React.Fragment>\r\n              <LinearProgress />\r\n              {result}\r\n            </React.Fragment>\r\n          if (error) console.error(error);\r\n\r\n          if (data) props.history.goBack()\r\n\r\n          return result\r\n        }}\r\n        </Mutation>\r\n        <DetailExtraDialog \r\n          open={this.state.openDialog} \r\n          onClose={() => this.setState({openDialog: false})}\r\n          dish={this.state.selectedDish}\r\n          onDelete={this.removeDish}\r\n          onSave={this.saveExtras}\r\n          extras={this.state.selectableExtras}\r\n          selectedExtras={this.state.dishExtras}\r\n        />\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport { Query } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\n\r\nimport { Elevation } from '@rmwc/elevation';\r\nimport {\r\n  Toolbar,\r\n  ToolbarRow,\r\n  ToolbarSection,\r\n  ToolbarTitle,\r\n  ToolbarIcon\r\n} from '@rmwc/toolbar';\r\nimport { LinearProgress } from '@rmwc/linear-progress';\r\n\r\nimport DetailContent from \"../components/order-details/DetailContent\"\r\n\r\n\r\nexport default class OrderDetails extends Component {\r\n  fetchData(id, dishes, extras){\r\n    return <Query\r\n      query={gql`\r\n        query order($id: ID) {\r\n          orders(_id: $id) {\r\n            _id,\r\n            name,\r\n            table,\r\n            notes,\r\n            dishes {\r\n              dish {\r\n                _id,\r\n                name,\r\n                type {\r\n                  _id,\r\n                  name\r\n                }\r\n              }, \r\n              made,\r\n              hasPayed,\r\n              delivered,\r\n              extras {\r\n                _id,\r\n                name,\r\n                type {\r\n                  _id, \r\n                  name\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }`} variables={{ id }}>\r\n      {({ loading, error, data }) => {\r\n\r\n        if (loading) return <LinearProgress />;\r\n        if (error) {\r\n          console.error(error)\r\n          return <p>Error :( </p>;\r\n          }\r\n\r\n        return <DetailContent order={data.orders[0]} dishes={dishes} extras={extras} id={id} history={this.props.history} />\r\n      }}\r\n    </Query>      \r\n  }\r\n\r\n  render() {\r\n    const { id } = this.props.match.params\r\n    return (\r\n      <Elevation className=\"main-elevation\" z={24}>\r\n        <Toolbar>\r\n          <ToolbarRow>\r\n            <ToolbarSection alignStart>\r\n              <ToolbarTitle>Order Details</ToolbarTitle>\r\n            </ToolbarSection>\r\n            <ToolbarSection alignEnd>\r\n              <ToolbarIcon icon=\"clear\" onClick={() => this.props.history.goBack()}/>\r\n            </ToolbarSection>\r\n          </ToolbarRow>\r\n        </Toolbar>\r\n\r\n        <Query\r\n          query={gql`\r\n            {\r\n              dishes {\r\n                _id,\r\n                name,\r\n                type {\r\n                  _id,\r\n                  name\r\n                }\r\n              },\r\n              dishExtras {\r\n                _id,\r\n                name,\r\n                type {\r\n                  _id,\r\n                  name\r\n                }\r\n              }\r\n            }`}>\r\n          {({ loading, error, data }) => {\r\n            if (loading) return <LinearProgress />;\r\n            if (error) {\r\n              return <p>Error :( <br /><br />{error.graphQLErrors.map(({ message }, i) => (\r\n              <span key={i}>{message}</span>))}</p>\r\n            };\r\n\r\n            if (id){\r\n              return this.fetchData(id, data.dishes, data.dishExtras)\r\n            }\r\n            return <DetailContent dishes={data.dishes} extras={data.dishExtras} history={this.props.history}/>\r\n\r\n          }} \r\n\r\n          </Query>\r\n      </Elevation>\r\n      )\r\n  }\r\n}","function CreateReceipt(dishes) {\r\n  let result = \"\"\r\n  const totalCosts = dishes.reduce((a, c) => a + c.cost, 0).toFixed(2)\r\n  dishes.forEach(d => {\r\n    result += `  \r\n        <tr>\r\n          <td>${d.name}</td>\r\n          <td>${d.cost.toFixed(2)}</td>\r\n        </tr>`\r\n  })\r\n  return `\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n  <body>\r\n    <h1>Receipt</h1>\r\n    <h3>${new Date().toLocaleString()}</h3>\r\n    <p>\r\n      <table>\r\n        <tr>\r\n          <th></th>\r\n          <th>Amount</th>\r\n        </tr>\r\n        ${ result }\r\n        <tr>\r\n          <td></td>\r\n          <td></td>\r\n        </tr>\r\n        <tr>\r\n          <td></td>\r\n          <td></td>\r\n        </tr>\r\n        <tr>\r\n          <td>Total</td>\r\n          <td>${totalCosts}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>Tax</td>\r\n          <td>${(totalCosts - (totalCosts/1.19)).toFixed(2)}</td>\r\n        </tr>\r\n      </table>\r\n    </p>\r\n  </body>\r\n</html>`\r\n}\r\n\r\nexport default CreateReceipt;","import React, { Component } from 'react'\r\nimport { TextField } from '@rmwc/textfield';\r\nimport { Button, ButtonIcon } from '@rmwc/button';\r\nimport gql from \"graphql-tag\";\r\nimport { Mutation } from \"react-apollo\";\r\nimport { LinearProgress } from '@rmwc/linear-progress';\r\nimport { Grid, GridCell } from '@rmwc/grid';\r\n\r\nimport CreateReceipt from './CreateReciept'\r\n\r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemGraphic,\r\n  ListItemMeta,\r\n  ListDivider,\r\n  ListItemSecondaryText,\r\n  ListItemPrimaryText\r\n} from '@rmwc/list';\r\n\r\nimport FileSaver from \"filesaver.js-npm\"\r\n\r\nconst PAY = gql`\r\n  mutation pay($id: ID!, $dishes: [orderDishMutation]!){\r\n    updateOrder(_id: $id, dishes: $dishes){\r\n      _id\r\n    }\r\n  }`\r\n\r\nexport default class PayOrderContent extends Component {\r\n  constructor(){\r\n    super()\r\n\r\n    this.changePayment = this.changePayment.bind(this)\r\n    this.toggleSelection = this.toggleSelection.bind(this)\r\n    this.toggleAll = this.toggleAll.bind(this)\r\n    this.saveFile = this.saveFile.bind(this)\r\n  }\r\n  state = {\r\n    dishes: [],\r\n    paying: 0,\r\n    selectAll: true\r\n  }\r\n\r\n  toggleSelection(i){\r\n    return () => {\r\n      const dishes = this.state.dishes\r\n      dishes[i].paying = !dishes[i].paying\r\n      this.setState({\r\n        dishes: dishes,\r\n        selectAll: dishes.every(d => d.paying)\r\n      })\r\n    }\r\n  }\r\n\r\n  toggleAll() {\r\n    const selected = !this.state.selectAll\r\n    const dishes = this.state.dishes\r\n\r\n    for (const dish of dishes) {\r\n      dish.paying = selected\r\n    }\r\n\r\n    this.setState({\r\n      dishes: dishes,\r\n      selectAll: selected\r\n    })\r\n  }\r\n\r\n  changePayment(){\r\n    return (e) => {\r\n      if (!isNaN(e.target.value))\r\n        this.setState({ paying: e.target.value})\r\n    }\r\n  }\r\n  componentDidMount(){\r\n    this.setState({\r\n      dishes: this.props.dishesToPay\r\n    })\r\n  }\r\n\r\n  saveFile(data){\r\n    const blob = new Blob([CreateReceipt(data)], {\r\n        type: \"text/plain;charset=utf-8\"\r\n      })\r\n    FileSaver.saveAs(blob, `Receipt ${new Date().toUTCString()}.html`, true)\r\n  }\r\n\r\n  render(){\r\n    let total = 0\r\n    return (\r\n      <React.Fragment>\r\n        <List>\r\n          <ListItem key={-1} onClick={this.toggleAll}>\r\n            <ListItemGraphic icon={this.state.selectAll ? \"radio_button_checked\" : \"radio_button_unchecked\"}/>\r\n            <ListItemText>Everything</ListItemText>\r\n          </ListItem>\r\n\r\n          <ListDivider />\r\n          {this.state.dishes.map((v, i) => {\r\n            const extraCost = v.extras.reduce((a, e) => a + e.cost, 0);\r\n            if (v.paying)\r\n              total = v.dish.cost + total + extraCost\r\n          \r\n            return (\r\n            <ListItem key={i} onClick={this.toggleSelection(i)}>\r\n              <ListItemGraphic icon={v.paying ? \"radio_button_checked\" : \"radio_button_unchecked\"}/>\r\n              <ListItemText>\r\n                <ListItemPrimaryText>{v.dish.name}</ListItemPrimaryText>\r\n                <ListItemSecondaryText>{v.extras.map(e => e.name).join(\", \")}</ListItemSecondaryText>\r\n              </ListItemText>\r\n              <ListItemMeta tag=\"span\" basename=\"\">{(v.dish.cost + extraCost).toFixed(2)}</ListItemMeta>\r\n            </ListItem>)\r\n          })}\r\n        \r\n        </List>\r\n        <Grid>\r\n          <GridCell span=\"12\">\r\n            <TextField icon=\"euro_symbol\" disabled label=\"Total\" value={total.toFixed(2)} />\r\n            <TextField icon=\"euro_symbol\" label=\"Difference\" value={(this.state.paying - total).toFixed(2)} onChange={() => {}} invalid={this.state.paying - total < 0} />\r\n            <TextField icon=\"euro_symbol\" label=\"Paying\" type=\"number\" inputMode=\"numeric\" pattern=\"\\d*.*,*\\d*\" value={this.state.paying} onChange={this.changePayment()}/>\r\n          </GridCell>\r\n        </Grid>\r\n        <Mutation mutation={PAY}>\r\n          {(pay, { data, loading, error }) => {\r\n            let result = <Button onClick={() => {\r\n              pay({\r\n              variables: {\r\n                id: this.props.id,\r\n                dishes: this.state.dishes.map(d => {\r\n                  return {\r\n                    id: d.dish._id,\r\n                    made: d.made,\r\n                    hasPayed: d.paying,\r\n                    delivered: d.delivered,\r\n                    extras: d.extras.map(e => e._id)\r\n                   }\r\n                }).concat(this.props.payedDishes.map(d => {\r\n                  return {\r\n                    id: d.dish._id,\r\n                    made: d.made,\r\n                    hasPayed: d.hasPayed,\r\n                    delivered: d.delivered,\r\n                    extras: d.extras.map(e => e._id)\r\n                  }\r\n                }))\r\n              }\r\n            })}}>Pay</Button>\r\n\r\n            if (loading)\r\n              result =\r\n                <React.Fragment>\r\n                  <LinearProgress />\r\n                  {result}\r\n                </React.Fragment>\r\n            if (error) console.error(error);\r\n\r\n            if (data) this.props.history.goBack()\r\n\r\n            return result\r\n          }}\r\n        </Mutation>\r\n        <Button theme=\"secondary\" onClick={() => this.saveFile(this.state.dishes.filter(d => d.paying).map(d => d.dish))}><ButtonIcon icon=\"cloud_download\" />Download</Button>\r\n    </React.Fragment>)\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport { Query } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\n\r\nimport PayOrderContent from \"../components/orders/PayOrderContent\"\r\n\r\nimport { Elevation } from '@rmwc/elevation';\r\nimport {\r\n  Toolbar,\r\n  ToolbarRow,\r\n  ToolbarSection,\r\n  ToolbarTitle,\r\n  ToolbarIcon\r\n} from '@rmwc/toolbar';\r\n\r\nexport default class PayOrder extends Component{\r\n  render() {\r\n    const { id } = this.props.match.params\r\n    return (\r\n      <Elevation className=\"main-elevation\" z={24}>\r\n        <Toolbar>\r\n          <ToolbarRow>\r\n            <ToolbarSection alignStart>\r\n              <ToolbarTitle>Pay Order</ToolbarTitle>\r\n            </ToolbarSection>\r\n            <ToolbarSection alignEnd>\r\n              <ToolbarIcon icon=\"clear\" onClick={() => this.props.history.goBack()} />\r\n            </ToolbarSection>\r\n          </ToolbarRow>\r\n        </Toolbar>\r\n\r\n        <Query\r\n          query={gql`\r\n                query order($id: ID) {\r\n                  orders(_id: $id) {\r\n                    _id,\r\n                    name,\r\n                    table,\r\n                    dishes {\r\n                      dish {\r\n                        _id,\r\n                        name,\r\n                        cost\r\n                      },\r\n                      hasPayed,\r\n                      made,\r\n                      delivered,\r\n                      extras {\r\n                        _id,\r\n                        cost,\r\n                        name\r\n                      }\r\n                    }\r\n                  }\r\n                }`} variables={{ id }}>\r\n          {({ loading, error, data }) => {\r\n            if (loading) return <p>Loading...</p>;\r\n            if (error) return <p>Error :(</p>;\r\n            \r\n            if (data.orders.length !== 1) return String()\r\n            return <PayOrderContent \r\n              history={this.props.history} \r\n              id={id} \r\n              payedDishes={data.orders[0].dishes.filter(d => d.hasPayed)} \r\n              dishesToPay={data.orders[0].dishes.filter(d => !d.hasPayed)\r\n                .map(d => {\r\n                  return {\r\n                    dish: d.dish,\r\n                    made: d.made,\r\n                    paying: true,\r\n                    delivered: d.delivered,\r\n                    extras: d.extras\r\n                  }\r\n                })\r\n                }\r\n                />\r\n\r\n          }}\r\n\r\n        </Query>\r\n      </Elevation>\r\n    )\r\n  }\r\n} ","import React, { Component } from 'react'\r\nimport { Mutation } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  DialogButton\r\n} from '@rmwc/dialog'\r\nimport { TextField } from '@rmwc/textfield';\r\nimport { Select } from '@rmwc/select';\r\n\r\nconst ADD = gql` mutation add($name: String!, $cost: Float!, $type: ID!){\r\n addDish(name: $name, cost: $cost, type: $type){\r\n   _id, \r\n   name\r\n }\r\n}`\r\nconst UPDATE = gql`mutation update($id: ID!, $name: String, $cost: Float, $type: ID){\r\n updateDish(_id: $id, name: $name, cost: $cost, type: $type){\r\n   _id, \r\n   name\r\n }\r\n}`\r\nconst REMOVE = gql`mutation remove($id: ID!){\r\n removeDish(_id: $id, ){\r\n   _id, \r\n   name\r\n }\r\n}`\r\n\r\nexport default class DishDialog extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { name: '', cost: 0.00, type: '' }\r\n\r\n    this.handleNameChange = this.handleNameChange.bind(this)\r\n    this.handleCostChange = this.handleCostChange.bind(this)\r\n    this.handleTypeChange = this.handleTypeChange.bind(this)\r\n  }\r\n\r\n  componentWillReceiveProps(newProps, oldProps) {\r\n    if (newProps._id && (newProps.name !== oldProps.name || newProps.cost !== oldProps.cost || newProps.type._id !== oldProps.type._id)) {\r\n      this.setState({ name: newProps.name, cost: newProps.cost.toFixed(2), type: newProps.type._id })\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props._id)\r\n      this.setState({ name: this.props.name, cost: this.props.cost.toFixed(2), type: this.props.type._id })\r\n  }\r\n\r\n  handleNameChange(e) {\r\n    this.setState({ name: e.target.value || '' })\r\n  }\r\n\r\n  handleCostChange(e) {\r\n    this.setState({ cost: e.target.value })\r\n  }\r\n\r\n  handleTypeChange(e) {\r\n    this.setState({ type: e.target.value })\r\n  }\r\n\r\n  toggleDialog() {\r\n    return () => {\r\n      this.setState({ name: this.props.name || \"\", cost: this.props.cost || 0, type: this.props.type ? this.props.type._id : '', standardDialogOpen: !this.state.standardDialogOpen })\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return (\r\n    <React.Fragment>\r\n      <Dialog\r\n        open={this.props.open}\r\n        onClose={this.props.onClose}\r\n      >\r\n          <DialogTitle>{this.props._id ? `Edit ${this.props.name}` : \"New dish\"}</DialogTitle>\r\n   \r\n          <DialogContent>\r\n            <TextField type=\"text\" label=\"Name\" value={this.state.name } onChange={this.handleNameChange} />\r\n            <TextField type=\"number\" inputMode=\"numeric\" label=\"Cost\" invalid={false} value={this.state.cost} onChange={this.handleCostChange} />\r\n            <Select\r\n              value={this.state.type}\r\n              onChange={this.handleTypeChange}\r\n              placeholder=\"\"\r\n              label=\"Dish type\"\r\n              options={this.props.dishTypes}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <DialogButton  theme=\"secondary\" action=\"close\" isDefaultAction>Cancel</DialogButton>\r\n            {\r\n              this.props._id ?\r\n                <Mutation mutation={REMOVE}>\r\n                  {(remove) =>\r\n                    <DialogButton action=\"accept\" onClick={() => remove({ variables: { id: this.props._id } }) }>Delete</DialogButton >\r\n                  }\r\n                </Mutation>\r\n                : String()\r\n            }\r\n            <Mutation mutation={this.props._id ? UPDATE : ADD}>\r\n              {(addOrUpdate) =>\r\n                <DialogButton action=\"accept\" onClick={() => {\r\n                  addOrUpdate({ variables: { id: this.props._id, name: this.state.name, type: this.state.type, cost: this.state.cost } })}}>Save</DialogButton>\r\n              }\r\n            </Mutation>\r\n          </DialogActions>\r\n      </Dialog>\r\n    </React.Fragment>)\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport { Elevation } from '@rmwc/elevation'; \r\nimport {\r\n  Toolbar,\r\n  ToolbarRow,\r\n  ToolbarSection,\r\n  ToolbarTitle\r\n} from '@rmwc/toolbar';\r\nimport {\r\n  List\r\n} from '@rmwc/list';\r\nimport DishDialog from './DishDialog';\r\n\r\nimport { SimpleListItem } from '@rmwc/list';\r\n\r\nexport default class DishCard extends Component {\r\n  state = {\r\n    device : {},\r\n    openDialog: false\r\n  }\r\n  render(){\r\n    return (\r\n      <Elevation className=\"main-elevation\" z={24} style={{margin: \"1rem\"}}>\r\n        <Toolbar>\r\n          <ToolbarRow>\r\n            <ToolbarSection alignStart>\r\n              <ToolbarTitle>{this.props.typeName}</ToolbarTitle>\r\n            </ToolbarSection>\r\n          </ToolbarRow>\r\n        </Toolbar>\r\n        <List twoLine>\r\n          {this.props.dishes.map(d => \r\n            <SimpleListItem key={d._id} onClick={() => this.setState({device: d, openDialog: true})} text={d.name} secondaryText={`€ ${d.cost.toFixed(2)}`} metaIcon=\"edit\" />\r\n          )}\r\n        </List>\r\n        <DishDialog {...this.state.device} open={this.state.openDialog} dishTypes={this.props.dishTypes} onClose={() => {this.setState({openDialog: false})}}/>\r\n      </Elevation>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport { Query } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport Masonry from 'react-masonry-component';\r\nimport { Fab } from '@rmwc/fab';\r\n\r\nimport DishCard from '../components/dishes/DishCard';\r\nimport DishDialog from '../components/dishes/DishDialog';\r\nimport { LinearProgress } from '@rmwc/linear-progress';\r\nimport { observer, inject } from \"mobx-react\";\r\n\r\nclass Dishes extends Component {\r\n  state = {\r\n    openDialog: false\r\n  }\r\n\r\n  groupBy(xs, func) {\r\n    return xs.reduce(function (rv, x) {\r\n      (rv[func(x)] = rv[func(x)] || []).push(x);\r\n      return rv;\r\n    }, {});\r\n  }\r\n\r\n  render() {\r\n    const filter = this.props.store.searchText\r\n    const matchesFilter = new RegExp(filter, \"i\")\r\n    return (\r\n      <Query\r\n        query={gql`query dishTypes {\r\n              dishTypes {\r\n                _id,\r\n                name\r\n                }\r\n              }`}\r\n        pollInterval={1000}>\r\n        {({ data }) => {\r\n          let dishTypes = []\r\n          if (data && data.dishTypes)\r\n            dishTypes = data.dishTypes.map(d => {return {label: d.name, value: d._id}})\r\n          return (\r\n            <React.Fragment>\r\n              <Query\r\n                query={gql`query dishes {\r\n                  dishes {\r\n                    _id,\r\n                    name,\r\n                    cost,\r\n                    type {\r\n                      _id,\r\n                      name\r\n                    }\r\n                  }\r\n                }`}\r\n                pollInterval={1000}>\r\n                {({ loading, error, data }) => {\r\n                  if (!data || !data.dishes)\r\n                    data = { dishes: [] }\r\n\r\n                  const grouped = this.groupBy(data.dishes.filter(o => {\r\n                    return (!filter || matchesFilter.test(o.name) || matchesFilter.test(o.type.name))\r\n                  }), d => d.type.name)\r\n\r\n                  const groupedDishes = []\r\n                  for (const group in grouped) {\r\n                    groupedDishes.push(<div\r\n                      key={grouped[group][0]._id}\r\n                      style={{\r\n                        width: '-webkit-fill-available',\r\n                        maxWidth: '500px',\r\n                        minWidth: '320px'\r\n                      }}>\r\n                      <DishCard typeName={group} dishes={grouped[group]} dishTypes={dishTypes} />\r\n                    </div>)\r\n                  }\r\n\r\n                  let result = \r\n                  <React.Fragment>\r\n                    <Masonry id=\"masonry-layout\">\r\n                      {groupedDishes}\r\n                    </Masonry>\r\n                    <Fab className=\"floating-right\" icon=\"add\"  onClick={() => this.setState({openDialog: true})} />\r\n                  </React.Fragment>\r\n\r\n                  if (loading) result =\r\n                    <React.Fragment>\r\n                      <LinearProgress />\r\n                      { result }\r\n                    </React.Fragment>\r\n                  if (error) return <p>Error :(</p>;\r\n\r\n                  return result\r\n\r\n                }}\r\n              </Query>\r\n              <DishDialog dishTypes={dishTypes} open={this.state.openDialog} onClose={() => this.setState({openDialog: false})}/>\r\n              <div className=\"bottomSpacer\" />\r\n            </React.Fragment>\r\n          )\r\n        }}\r\n      </Query>\r\n    )\r\n  }\r\n}\r\n\r\nexport default inject(\"store\")(observer(Dishes))","import React, { Component } from 'react'\r\nimport { observer, inject } from \"mobx-react\"\r\nimport {\r\n  List,\r\n  ListItem, \r\n  ListItemGraphic,\r\n  ListItemText\r\n} from '@rmwc/list';\r\nimport {\r\n  Toolbar,\r\n  ToolbarRow,\r\n  ToolbarSection,\r\n  ToolbarTitle\r\n} from '@rmwc/toolbar';\r\n\r\nclass GlobalSettings extends Component {\r\n  render(){\r\n    return(\r\n      <React.Fragment>\r\n        <Toolbar>\r\n          <ToolbarRow>\r\n            <ToolbarSection alignStart>\r\n              <ToolbarTitle>Global Settings</ToolbarTitle>\r\n            </ToolbarSection>\r\n          </ToolbarRow>\r\n        </Toolbar>\r\n        \r\n        <List>\r\n          <ListItem onClick={() => this.props.store.setKitchenMode(!this.props.store.kitchenMode)}>\r\n            <ListItemGraphic icon={this.props.store.kitchenMode ? \"radio_button_checked\" : \"radio_button_unchecked\"}/>\r\n            <ListItemText>Kitchen Mode</ListItemText>\r\n          </ListItem>\r\n        </List>\r\n        </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default inject(\"store\")(observer(GlobalSettings))","import React, { Component } from 'react'\r\nimport { Mutation } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport {  ToolbarIcon } from '@rmwc/toolbar';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  DialogButton\r\n} from '@rmwc/dialog';\r\nimport { TextField } from '@rmwc/textfield';\r\nimport {\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemMeta } from '@rmwc/list';\r\n\r\nconst ADD = gql` mutation add($name: String!){\r\n addDishType(name: $name){\r\n   _id, \r\n   name\r\n }\r\n}`\r\nconst UPDATE = gql`mutation update($id: ID!, $name: String!){\r\n updateDishType(_id: $id, name: $name){\r\n   _id, \r\n   name\r\n }\r\n}`\r\nconst REMOVE = gql`mutation remove($id: ID!){\r\n removeDishType(_id: $id, ){\r\n   _id, \r\n   name\r\n }\r\n}`\r\n\r\nexport default class DishTypeDialog extends Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {name: \"\"}\r\n\r\n    this.handleNameChange = this.handleNameChange.bind(this)\r\n  }\r\n  \r\n\r\n  componentWillReceiveProps(newProps, oldProps){\r\n    if (newProps.name && newProps.name !== oldProps.name ){\r\n      this.setState({ name: newProps.name })\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    if (this.props.name)\r\n      this.setState({ name: this.props.name })\r\n  }\r\n\r\n  toggleDialog(){\r\n    return () => {\r\n      this.setState({name: this.props.name, standardDialogOpen: !this.state.standardDialogOpen})\r\n    }\r\n  }\r\n\r\n  handleNameChange(e){\r\n    this.setState({name: e.target.value || ''})\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <React.Fragment>\r\n        <Dialog\r\n          open={this.state.standardDialogOpen}\r\n          onClose={evt => this.setState({ standardDialogOpen: false })}\r\n        >\r\n          <DialogTitle>{this.props._id ? \"Edit dish type\" : \"New dish type\"}</DialogTitle>\r\n            <DialogContent>\r\n              <TextField type=\"text\" label=\"Name\" value={this.state.name || ''} onChange={this.handleNameChange} />\r\n            </DialogContent>\r\n            <DialogActions >\r\n              <DialogButton  theme=\"secondary\" action=\"cancel\" isDefaultAction >Cancel</DialogButton>\r\n              {\r\n                this.props._id ?\r\n                  <Mutation mutation={REMOVE}>\r\n                    {(remove) =>\r\n                      <DialogButton action=\"accept\" onClick={() => remove({ variables: { id: this.props._id } })}>Delete</DialogButton>\r\n                    }\r\n                  </Mutation>\r\n                : String()\r\n              }\r\n              <Mutation mutation={this.props._id ? UPDATE : ADD}>\r\n                {(addOrUpdate) =>\r\n                  <DialogButton action=\"accept\" onClick={() => addOrUpdate({variables: { id: this.props._id, name: this.state.name}})}>Save</DialogButton>\r\n                }\r\n              </Mutation>\r\n            </DialogActions>\r\n        </Dialog>\r\n        {\r\n          this.props._id ?\r\n            <ListItem onClick={this.toggleDialog()}>\r\n              <ListItemText>{this.props.name}</ListItemText>\r\n              <ListItemMeta icon=\"edit\" />\r\n            </ListItem> :\r\n            <ToolbarIcon icon=\"add\" onClick={this.toggleDialog()} />\r\n        }\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport { Query } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\n\r\nimport { LinearProgress } from '@rmwc/linear-progress';\r\nimport {\r\n  Toolbar,\r\n  ToolbarRow,\r\n  ToolbarSection,\r\n  ToolbarTitle\r\n} from '@rmwc/toolbar';\r\nimport {\r\n  List\r\n} from '@rmwc/list';\r\nimport DishTypeDialog from './DishTypeDialog';\r\n\r\nexport default class DishTypes extends Component {\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Toolbar>\r\n          <ToolbarRow>\r\n            <ToolbarSection alignStart>\r\n              <ToolbarTitle>Dish types</ToolbarTitle>\r\n            </ToolbarSection>\r\n            <ToolbarSection alignEnd>\r\n              <DishTypeDialog />\r\n            </ToolbarSection>\r\n          </ToolbarRow>\r\n        </Toolbar>\r\n        <Query\r\n          query={gql`query dishTypes {\r\n              dishTypes {\r\n                _id,\r\n                name\r\n                }\r\n              }`}\r\n          variables={{ hasPayed: false }}\r\n          pollInterval={1000}>\r\n          {({ loading, error, data }) => {\r\n            if (!data || !data.dishTypes)\r\n              data = {dishTypes: []}\r\n\r\n            let result = <List>{\r\n                data.dishTypes.map(d => \r\n                  <DishTypeDialog key={d._id} {...d}/>\r\n                )}\r\n              </List>\r\n\r\n            if (loading) result =\r\n              <React.Fragment>\r\n                <LinearProgress />\r\n                {result}\r\n              </React.Fragment>\r\n            if (error) return <p>Error :(</p>;\r\n            return(result)\r\n            }\r\n          }\r\n          </Query>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react'\r\n\r\nimport { Elevation } from '@rmwc/elevation';\r\nimport { Grid, GridCell } from '@rmwc/grid';\r\n\r\nimport GlobalSettings from '../components/settings/GlobalSettings'\r\nimport DishTypes from '../components/settings/DishTypes'\r\n\r\nexport default class Settings extends Component {\r\n  render(){\r\n    return(\r\n      <Grid>\r\n        <GridCell span=\"12\">\r\n          <Elevation className=\"main-elevation\" z={24}>\r\n            <GlobalSettings />\r\n\r\n          </Elevation>\r\n        </GridCell>\r\n        <GridCell span=\"12\">\r\n          <Elevation className=\"main-elevation\" z={24}>\r\n            <DishTypes />\r\n          </Elevation>\r\n        </GridCell>\r\n      </Grid>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport { Query } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\n\r\nimport { Elevation } from '@rmwc/elevation';\r\nimport {\r\n  Toolbar,\r\n  ToolbarRow,\r\n  ToolbarSection,\r\n  ToolbarTitle,\r\n  ToolbarIcon\r\n} from '@rmwc/toolbar'; \r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemSecondaryText,\r\n  ListItemMeta\r\n} from '@rmwc/list';\r\nimport { LinearProgress } from '@rmwc/linear-progress';\r\nimport { Menu, MenuItem, MenuSurfaceAnchor } from '@rmwc/menu';\r\nimport FileSaver from \"filesaver.js-npm\"\r\n\r\nexport default class History extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.setHistoryFilter = this.setHistoryFilter.bind(this)\r\n    this.getMonday = this.getMonday.bind(this)\r\n  }\r\n\r\n  state={\r\n    menuIsOpen: false,\r\n    minOrderTimestamp: new Date(\"0\"),\r\n    header: \"History\"\r\n  }\r\n\r\n  getMonday(d) {\r\n    d = new Date(d);\r\n    var day = d.getDay(),\r\n      diff = d.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\r\n    return new Date(d.setDate(diff));\r\n  }\r\n\r\n  downloadData(data){\r\n    const blob = new Blob(\r\n      data.map(o => `${o.timestamp.toISOString()},${o.name},${o.type},${o.cost}\\n`), { type: \"text/plain;charset=utf-8\" })\r\n    FileSaver.saveAs(blob, `Orders.csv`, true)\r\n  }\r\n\r\n  setHistoryFilter(evt){\r\n      let tmsp = new Date(\"0\");\r\n      let title = \"History\"\r\n\r\n      if (evt.detail.index === 1){\r\n        tmsp = this.getMonday(new Date(new Date().toDateString()))\r\n        title = \"This weeks History\"\r\n      } else if (evt.detail.index === 2) {\r\n        tmsp = new Date(new Date().toDateString())\r\n        title = \"Todays History\"\r\n      }\r\n\r\n      this.setState({\r\n        minOrderTimestamp: tmsp,\r\n        header: title\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const { id } = this.props.match.params\r\n    return (\r\n      <Elevation className=\"main-elevation\" z={24}>\r\n        <Query\r\n          query={gql`\r\n            {\r\n              orders(hasPayed: true) {\r\n                timestamp\r\n                dishes {\r\n                  dish {\r\n                    name,\r\n                    cost,\r\n                    type{\r\n                      name\r\n                    } \r\n                  }\r\n                }\r\n              }\r\n            }`}>\r\n          {({ loading, error, data }) => {\r\n            if (loading) return <LinearProgress />;\r\n            if (error) return <p>Error :(</p>;\r\n\r\n            if (id) {\r\n              return this.fetchData(id, data.dishes)\r\n            }\r\n\r\n            var ordered = []\r\n            if (data && data.orders)\r\n              data.orders.forEach(o => {\r\n                o.dishes.forEach(d => {\r\n                  const timestamp = new Date(o.timestamp)\r\n                  if (timestamp >= this.state.minOrderTimestamp)\r\n                    ordered.push({\r\n                      timestamp: timestamp,\r\n                      name: d.dish.name,\r\n                      cost: d.dish.cost.toFixed(2),\r\n                      type: d.dish.type.name\r\n                    })\r\n                })\r\n              })\r\n\r\n            return (\r\n              <React.Fragment>\r\n                <Toolbar>\r\n                  <ToolbarRow>\r\n                    <ToolbarSection alignStart>\r\n                      <ToolbarTitle>{ this.state.header }</ToolbarTitle>\r\n                    </ToolbarSection>\r\n                    <ToolbarSection alignEnd>\r\n                      <MenuSurfaceAnchor>\r\n                        <Menu\r\n                          open={this.state.menuIsOpen}\r\n                          onSelect={this.setHistoryFilter}\r\n                          onClose={_ => this.setState({menuIsOpen: false})}\r\n                        >\r\n                          <MenuItem>Everything</MenuItem>\r\n                          <MenuItem>This Week</MenuItem>\r\n                          <MenuItem>Today</MenuItem>\r\n                        </Menu>\r\n\r\n                        < ToolbarIcon icon = \"filter_list\"\r\n                          onClick={evt => this.setState({'menuIsOpen': !this.state.menuIsOpen})}\r\n                        />\r\n                        </MenuSurfaceAnchor>\r\n                        <ToolbarIcon icon=\"cloud_download\" onClick={() => this.downloadData(ordered)} />\r\n                    </ToolbarSection>\r\n                  </ToolbarRow>\r\n                </Toolbar>\r\n                <List>{\r\n                  ordered.map((o, i) => \r\n                    <ListItem key={i} >\r\n                      <ListItemText>{o.name}\r\n                        <ListItemSecondaryText> {o.timestamp.toDateString()} </ListItemSecondaryText>\r\n                      </ListItemText>\r\n                      <ListItemMeta tag=\"span\" basename=\"\" >{`€ ${o.cost}`}</ListItemMeta>\r\n                    </ListItem>\r\n                  )}\r\n                </List>\r\n              </React.Fragment>\r\n            )\r\n          }}\r\n        </Query>\r\n      </Elevation>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react'\r\nimport { Mutation } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  DialogButton\r\n} from '@rmwc/dialog'\r\nimport { TextField } from '@rmwc/textfield';\r\nimport { Select } from '@rmwc/select';\r\n\r\nconst ADD = gql` mutation add($name: String!, $cost: Float!, $type: ID!){\r\n addDishExtra(name: $name, cost: $cost, type: $type) {\r\n   _id, \r\n   name\r\n }\r\n}`\r\nconst UPDATE = gql `mutation update($id: ID!, $name: String!, $cost: Float!, $type: ID!){\r\n updateDishExtra(_id: $id, name: $name, cost: $cost, type: $type) {\r\n   _id, \r\n   name\r\n }\r\n}`\r\nconst REMOVE = gql`mutation remove($id: ID!){\r\n removeDishExtra(_id: $id, ) {\r\n   _id, \r\n   name\r\n }\r\n}`\r\n\r\nexport default class ExtraDialog extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { name: '', cost: 0.00, type: '' }\r\n\r\n    this.handleNameChange = this.handleNameChange.bind(this)\r\n    this.handleCostChange = this.handleCostChange.bind(this)\r\n    this.handleTypeChange = this.handleTypeChange.bind(this)\r\n  }\r\n\r\n  componentWillReceiveProps(newProps, oldProps) {\r\n    if (newProps._id && (newProps.name !== oldProps.name || newProps.cost !== oldProps.cost || newProps.type._id !== oldProps.type._id)) {\r\n      this.setState({ name: newProps.name, cost: newProps.cost.toFixed(2), type: newProps.type._id })\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props._id)\r\n      this.setState({ name: this.props.name, cost: this.props.cost.toFixed(2), type: this.props.type._id })\r\n  }\r\n\r\n  handleNameChange(e) {\r\n    this.setState({ name: e.target.value || '' })\r\n  }\r\n\r\n  handleCostChange(e) {\r\n    this.setState({ cost: e.target.value })\r\n  }\r\n\r\n  handleTypeChange(e) {\r\n    this.setState({ type: e.target.value })\r\n  }\r\n\r\n  toggleDialog() {\r\n    this.setState({ name: this.props.name || \"\", cost: this.props.cost || 0, type: this.props.type ? this.props.type._id : '', standardDialogOpen: !this.state.standardDialogOpen })\r\n  }\r\n\r\n  render(){\r\n    return (\r\n    <React.Fragment>\r\n      <Dialog\r\n        open={this.props.open}\r\n        onClose={ () => {\r\n          this.toggleDialog()\r\n          this.props.onClose()\r\n        }}\r\n      >\r\n          <DialogTitle>{this.props._id ? `Edit ${this.props.name}` : \"New extra for dish type\"}</DialogTitle>\r\n   \r\n          <DialogContent>\r\n            <TextField type=\"text\" label=\"Name\" value={this.state.name } onChange={this.handleNameChange} />\r\n            <TextField type=\"number\" inputMode=\"numeric\" label=\"Cost\" invalid={false} value={this.state.cost} onChange={this.handleCostChange} />\r\n            <Select\r\n              value={this.state.type}\r\n              onChange={this.handleTypeChange}\r\n              placeholder=\"\"\r\n              label=\"Dish type\"\r\n              options={this.props.dishTypes}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <DialogButton  theme=\"secondary\" action=\"cloase\" isDefaultAction>Cancel</DialogButton>\r\n            {\r\n              this.props._id ?\r\n                <Mutation mutation={REMOVE}>\r\n                  {(remove) =>\r\n                    <DialogButton action=\"accept\" onClick={() => remove({ variables: { id: this.props._id } }) }>Delete</DialogButton >\r\n                  }\r\n                </Mutation>\r\n                : String()\r\n            }\r\n            <Mutation mutation={this.props._id ? UPDATE : ADD}>\r\n              {(addOrUpdate) =>\r\n                <DialogButton action=\"accept\" onClick={() => {\r\n                  addOrUpdate({ variables: { id: this.props._id, name: this.state.name, type: this.state.type, cost: this.state.cost } })}}>Save</DialogButton>\r\n              }\r\n            </Mutation>\r\n          </DialogActions>\r\n      </Dialog>\r\n    </React.Fragment>)\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport { Elevation } from '@rmwc/elevation'; \r\nimport {\r\n  Toolbar,\r\n  ToolbarRow,\r\n  ToolbarSection,\r\n  ToolbarTitle\r\n} from '@rmwc/toolbar';\r\nimport {\r\n  List\r\n} from '@rmwc/list';\r\n\r\nimport { SimpleListItem } from '@rmwc/list';\r\nimport ExtraDialog from './ExtraDialog';\r\n\r\nexport default class DishCard extends Component {\r\n  state = {\r\n    extra : {},\r\n    openDialog: false\r\n  }\r\n  render(){\r\n    return (\r\n      <Elevation className=\"main-elevation\" z={24} style={{margin: \"1rem\"}}>\r\n        <Toolbar>\r\n          <ToolbarRow>\r\n            <ToolbarSection alignStart>\r\n              <ToolbarTitle>{this.props.typeName}</ToolbarTitle>\r\n            </ToolbarSection>\r\n          </ToolbarRow>\r\n        </Toolbar>\r\n        <List twoLine>\r\n          {this.props.extras.map(d => \r\n            <SimpleListItem key = {\r\n              d._id\r\n            }\r\n            onClick = {\r\n              () => this.setState({\r\n                extra: d,\r\n                openDialog: true\r\n              })\r\n            }\r\n            text = {\r\n              d.name\r\n            }\r\n            secondaryText = {\r\n              `€ ${d.cost.toFixed(2)}`\r\n            }\r\n            metaIcon = \"edit\" />\r\n          )}\r\n        </List>\r\n        < ExtraDialog {\r\n          ...this.state.extra\r\n        }\r\n        open = {\r\n          this.state.openDialog\r\n        }\r\n        dishTypes = {\r\n          this.props.dishTypes\r\n        }\r\n        onClose = {\r\n          () => {\r\n            this.setState({\r\n              openDialog: false\r\n            })\r\n          }\r\n        }\r\n        />\r\n      </Elevation>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport { Query } from \"react-apollo\";\r\nimport gql from \"graphql-tag\";\r\nimport Masonry from 'react-masonry-component';\r\nimport { Fab } from '@rmwc/fab';\r\nimport { LinearProgress } from '@rmwc/linear-progress';\r\nimport { observer, inject } from \"mobx-react\";\r\n\r\nimport ExtraCard from \"../components/extras/ExtraCard\";\r\nimport ExtraDialog from \"../components/extras/ExtraDialog\";\r\nclass DishExtra extends Component {\r\n  state = {\r\n    openDialog: false\r\n  }\r\n  \r\n  groupBy(xs, func) {\r\n    return xs.reduce(function (rv, x) {\r\n      (rv[func(x)] = rv[func(x)] || []).push(x);\r\n      return rv;\r\n    }, {});\r\n  }\r\n\r\n  render(){\r\n    const filter = this.props.store.searchText\r\n    const matchesFilter = new RegExp(filter, \"i\")\r\n    return (\r\n      <Query\r\n        query={gql`query dishTypes {\r\n              dishTypes {\r\n                _id,\r\n                name\r\n                }\r\n              }`}\r\n        pollInterval={5000}>\r\n        {({ data }) => {\r\n          let dishTypes = []\r\n          if (data && data.dishTypes)\r\n            dishTypes = data.dishTypes.map(d => {return {label: d.name, value: d._id}})\r\n          return (\r\n            <React.Fragment>\r\n              <Query\r\n                query = {\r\n                    gql `{\r\n                      dishExtras {\r\n                        _id, \r\n                        name, \r\n                        cost, \r\n                        type {\r\n                          _id,\r\n                          name\r\n                        }\r\n                      }\r\n                    }\r\n                `}\r\n                pollInterval={1000}>\r\n                {({ loading, error, data }) => {\r\n                  if (!data || !data.dishExtras)\r\n                    data = { dishExtras: []}\r\n\r\n                  const grouped = this.groupBy(data.dishExtras.filter(o => {\r\n                    return (!filter || matchesFilter.test(o.name) || matchesFilter.test(o.type.name))\r\n                  }), d => d.type.name)\r\n\r\n                  const groupedExtras = []\r\n                  for (const group in grouped){\r\n                    groupedExtras.push(<div\r\n                      key={grouped[group][0]._id}\r\n                      style={{\r\n                        width: '-webkit-fill-available',\r\n                        maxWidth: '500px',\r\n                        minWidth: '320px'\r\n                      }}>\r\n                        <ExtraCard typeName={group} extras={grouped[group]} dishTypes={dishTypes} />\r\n                    </div>)\r\n                  }\r\n\r\n                  let result = \r\n                  <React.Fragment>\r\n                    <Masonry id=\"masonry-layout\">\r\n                      {groupedExtras}\r\n                    </Masonry>\r\n                    <Fab className=\"floating-right\" icon=\"add\"  onClick={() => this.setState({openDialog: true})} />\r\n                  </React.Fragment>\r\n\r\n                  if (loading) result =\r\n                    <React.Fragment>\r\n                      <LinearProgress />\r\n                      { result }\r\n                    </React.Fragment>\r\n                  if (error) return <p>Error :(</p>;\r\n\r\n                  return result\r\n                }}\r\n                </Query>\r\n                < ExtraDialog dishTypes = {\r\n                  dishTypes\r\n                }\r\n                open = {\r\n                  this.state.openDialog\r\n                }\r\n                onClose = {\r\n                  () => this.setState({\r\n                    openDialog: false\r\n                  })\r\n                }/>\r\n            </React.Fragment>\r\n          )}\r\n        }\r\n      </Query>\r\n    )\r\n  }\r\n}\r\nexport default inject(\"store\")(observer(DishExtra))","import React, { Component } from 'react'\nimport { Route } from 'react-router-dom'\nimport './App.css';\n\nimport Nav from './components/navigation/Nav'\nimport Orders from './pages/Orders'\nimport OrderDetails from './pages/OrderDetails'\nimport PayOrder from './pages/PayOrder'\nimport Dishes from './pages/Dishes'\nimport Settings from './pages/Settings'\nimport Hist from './pages/History'\nimport Extras from './pages/DishExtra'\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Nav />\n\n        \n        <div className=\"mdc-top-app-bar--fixed-adjust\">\n          <Route exact path=\"/\" component={ Orders } />\n          <Route path=\"/orders\" component={ Orders } />\n          <Route path=\"/orderDetails/:id?\" component={OrderDetails} />\n          <Route path=\"/payOrder/:id\" component={PayOrder} />\n          <Route path=\"/dishes\" component={Dishes} />\n          <Route path=\"/settings\" component={Settings} />\n          <Route path=\"/orderHistory\" component={Hist} />\n          <Route path=\"/dishExtra\" component={Extras} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {\r\n  observable,\r\n  decorate\r\n} from \"mobx\"\r\n\r\nclass Store {\r\n  searchText = \"\"\r\n  kitchenMode = localStorage.getItem(\"Bit.KitchenMode\") === \"true\" || false\r\n \r\n  setKitchenMode(isOn) {\r\n    this.kitchenMode = isOn;\r\n    localStorage.setItem(\"Bit.KitchenMode\", isOn);\r\n  }\r\n}\r\n\r\ndecorate(Store, {\r\n  searchText: observable,\r\n  kitchenMode: observable\r\n})\r\n\r\nlet DefaultStore = new Store()\r\n\r\nexport default DefaultStore","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport { HashRouter as Router } from 'react-router-dom'\r\nimport { Provider } from \"mobx-react\"\r\nimport ApolloClient from \"apollo-boost\";\r\nimport { ApolloProvider } from \"react-apollo\";\r\nimport Store from \"./stores/Store\"\r\nimport { ThemeProvider } from '@rmwc/theme';\r\n\r\nconst client = new ApolloClient();\r\n\r\nconst stores = {\r\n  store: Store\r\n}\r\n\r\nReactDOM.render(  \r\n  <ThemeProvider options = {\r\n    {\r\n      primary: '#795548',\r\n      secondary: '#486c79',\r\n      background: '#fff'\r\n    }\r\n  } >\r\n    <ApolloProvider client={client}>\r\n      <Provider {...stores}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n      </Provider>\r\n    </ApolloProvider>\r\n  </ThemeProvider>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}